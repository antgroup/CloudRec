"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1054],{5966:function(ue,F,t){var A=t(97685),E=t(1413),T=t(91),b=t(21770),p=t(99859),o=t(55241),V=t(98423),k=t(62435),h=t(58055),f=t(86074),I=["fieldProps","proFieldProps"],S=["fieldProps","proFieldProps"],g="text",ne=function(s){var n=s.fieldProps,O=s.proFieldProps,i=(0,T.Z)(s,I);return(0,f.jsx)(h.Z,(0,E.Z)({valueType:g,fieldProps:n,filedConfig:{valueType:g},proFieldProps:O},i))},te=function(s){var n=(0,b.Z)(s.open||!1,{value:s.open,onChange:s.onOpenChange}),O=(0,A.Z)(n,2),i=O[0],w=O[1];return(0,f.jsx)(p.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(L){var m,U=L.getFieldValue(s.name||[]);return(0,f.jsx)(o.Z,(0,E.Z)((0,E.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return w(e)},content:(0,f.jsxs)("div",{style:{padding:"4px 0"},children:[(m=s.statusRender)===null||m===void 0?void 0:m.call(s,U),s.strengthText?(0,f.jsx)("div",{style:{marginTop:10},children:(0,f.jsx)("span",{children:s.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},s.popoverProps),{},{open:i,children:s.children}))}})},re=function(s){var n=s.fieldProps,O=s.proFieldProps,i=(0,T.Z)(s,S),w=(0,k.useState)(!1),N=(0,A.Z)(w,2),L=N[0],m=N[1];return n!=null&&n.statusRender&&i.name?(0,f.jsx)(te,{name:i.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:L,onOpenChange:m,children:(0,f.jsx)("div",{children:(0,f.jsx)(h.Z,(0,E.Z)({valueType:"password",fieldProps:(0,E.Z)((0,E.Z)({},(0,V.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(M){var e;n==null||(e=n.onBlur)===null||e===void 0||e.call(n,M),m(!1)},onClick:function(M){var e;n==null||(e=n.onClick)===null||e===void 0||e.call(n,M),m(!0)}}),proFieldProps:O,filedConfig:{valueType:g}},i))})}):(0,f.jsx)(h.Z,(0,E.Z)({valueType:"password",fieldProps:n,proFieldProps:O,filedConfig:{valueType:g}},i))},$=ne;$.Password=re,$.displayName="ProFormComponent",F.Z=$},90672:function(ue,F,t){var A=t(1413),E=t(91),T=t(62435),b=t(58055),p=t(86074),o=["fieldProps","proFieldProps"],V=function(h,f){var I=h.fieldProps,S=h.proFieldProps,g=(0,E.Z)(h,o);return(0,p.jsx)(b.Z,(0,A.Z)({ref:f,valueType:"textarea",fieldProps:I,proFieldProps:S},g))};F.Z=T.forwardRef(V)},50727:function(ue,F,t){var A=t(4942),E=t(97685),T=t(91),b=t(55850),p=t(15861),o=t(1413),V=t(24969),k=t(97462),h=t(952),f=t(10915),I=t(48171),S=t(53914),g=t(22270),ne=t(60249),te=t(83622),re=t(99859),$=t(21770),W=t(88306),s=t(8880),n=t(62435),O=t(90498),i=t(86074),w=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],N=["record","position","creatorButtonText","newRecordType","parentKey","style"],L=n.createContext(void 0);function m(e){var C=e.children,j=e.record,J=e.position,H=e.newRecordType,R=e.parentKey,G=(0,n.useContext)(L);return n.cloneElement(C,(0,o.Z)((0,o.Z)({},C.props),{},{onClick:function(){var Y=(0,p.Z)((0,b.Z)().mark(function le(ae){var q,ee,x,y;return(0,b.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(q=(ee=C.props).onClick)===null||q===void 0?void 0:q.call(ee,ae);case 2:if(y=c.sent,y!==!1){c.next=5;break}return c.abrupt("return");case 5:G==null||(x=G.current)===null||x===void 0||x.addEditRecord(j,{position:J,newRecordType:H,parentKey:R});case 6:case"end":return c.stop()}},le)}));function Z(le){return Y.apply(this,arguments)}return Z}()}))}function U(e){var C,j,J=(0,f.YB)(),H=e.onTableChange,R=e.maxLength,G=e.formItemProps,Y=e.recordCreatorProps,Z=e.rowKey,le=e.controlled,ae=e.defaultValue,q=e.onChange,ee=e.editableFormRef,x=(0,T.Z)(e,w),y=(0,n.useRef)(void 0),z=(0,n.useRef)(),c=(0,n.useRef)();(0,n.useImperativeHandle)(x.actionRef,function(){return z.current},[z.current]);var ve=(0,$.Z)(function(){return e.value||ae||[]},{value:e.value,onChange:e.onChange}),_e=(0,E.Z)(ve,2),u=_e[0],ce=_e[1],B=n.useMemo(function(){return typeof Z=="function"?Z:function(r,v){return r[Z]||v}},[Z]),oe=(0,I.J)(function(r){if(typeof r=="number"&&!e.name){if(r>=u.length)return r;var v=u&&u[r];return B==null?void 0:B(v,r)}if((typeof r=="string"||r>=u.length)&&e.name){var l=u.findIndex(function(a,d){var _;return(B==null||(_=B(a,d))===null||_===void 0?void 0:_.toString())===(r==null?void 0:r.toString())});if(l!==-1)return l}return r});(0,n.useImperativeHandle)(ee,function(){var r=function(a){var d,_;if(a==null)throw new Error("rowIndex is required");var P=oe(a),D=[e.name,(d=P==null?void 0:P.toString())!==null&&d!==void 0?d:""].flat(1).filter(Boolean);return(_=c.current)===null||_===void 0?void 0:_.getFieldValue(D)},v=function(){var a,d=[e.name].flat(1).filter(Boolean);if(Array.isArray(d)&&d.length===0){var _,P=(_=c.current)===null||_===void 0?void 0:_.getFieldsValue();return Array.isArray(P)?P:Object.keys(P).map(function(D){return P[D]})}return(a=c.current)===null||a===void 0?void 0:a.getFieldValue(d)};return(0,o.Z)((0,o.Z)({},c.current),{},{getRowData:r,getRowsData:v,setRowData:function(a,d){var _,P;if(a==null)throw new Error("rowIndex is required");var D=oe(a),X=[e.name,(_=D==null?void 0:D.toString())!==null&&_!==void 0?_:""].flat(1).filter(Boolean),De=Object.assign({},(0,o.Z)((0,o.Z)({},r(a)),d||{})),Me=(0,s.Z)({},X,De);return(P=c.current)===null||P===void 0||P.setFieldsValue(Me),!0}})},[oe,e.name,c.current]),(0,n.useEffect)(function(){e.controlled&&(u||[]).forEach(function(r,v){var l;(l=c.current)===null||l===void 0||l.setFieldsValue((0,A.Z)({},"".concat(B(r,v)),r))},{})},[(0,S.ZP)(u),e.controlled]),(0,n.useEffect)(function(){if(e.name){var r;c.current=e==null||(r=e.editable)===null||r===void 0?void 0:r.form}},[(C=e.editable)===null||C===void 0?void 0:C.form,e.name]);var K=Y||{},fe=K.record,ie=K.position,Pe=K.creatorButtonText,Ee=K.newRecordType,me=K.parentKey,he=K.style,ge=(0,T.Z)(K,N),se=ie==="top",Q=(0,n.useMemo)(function(){return typeof R=="number"&&R<=(u==null?void 0:u.length)?!1:Y!==!1&&(0,i.jsx)(m,{record:(0,g.h)(fe,u==null?void 0:u.length,u)||{},position:ie,parentKey:(0,g.h)(me,u==null?void 0:u.length,u),newRecordType:Ee,children:(0,i.jsx)(te.ZP,(0,o.Z)((0,o.Z)({type:"dashed",style:(0,o.Z)({display:"block",margin:"10px 0",width:"100%"},he),icon:(0,i.jsx)(V.Z,{})},ge),{},{children:Pe||J.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[Y,R,u==null?void 0:u.length]),Oe=(0,n.useMemo)(function(){return Q?se?{components:{header:{wrapper:function(v){var l,a=v.className,d=v.children;return(0,i.jsxs)("thead",{className:a,children:[d,(0,i.jsxs)("tr",{style:{position:"relative"},children:[(0,i.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:Q}),(0,i.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(l=x.columns)===null||l===void 0?void 0:l.length,children:Q})]})]})}}}}:{tableViewRender:function(v,l){var a,d;return(0,i.jsxs)(i.Fragment,{children:[(a=(d=e.tableViewRender)===null||d===void 0?void 0:d.call(e,v,l))!==null&&a!==void 0?a:l,Q]})}}:{}},[se,Q]),de=(0,o.Z)({},e.editable),Ce=(0,I.J)(function(r,v){var l,a,d;if((l=e.editable)===null||l===void 0||(a=l.onValuesChange)===null||a===void 0||a.call(l,r,v),(d=e.onValuesChange)===null||d===void 0||d.call(e,v,r),e.controlled){var _;e==null||(_=e.onChange)===null||_===void 0||_.call(e,v)}});return(e!=null&&e.onValuesChange||(j=e.editable)!==null&&j!==void 0&&j.onValuesChange||e.controlled&&e!==null&&e!==void 0&&e.onChange)&&(de.onValuesChange=Ce),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L.Provider,{value:z,children:(0,i.jsx)(O.Z,(0,o.Z)((0,o.Z)((0,o.Z)({search:!1,options:!1,pagination:!1,rowKey:Z,revalidateOnFocus:!1},x),Oe),{},{tableLayout:"fixed",actionRef:z,onChange:H,editable:(0,o.Z)((0,o.Z)({},de),{},{formProps:(0,o.Z)({formRef:c},de.formProps)}),dataSource:u,onDataSourceChange:function(v){if(ce(v),e.name&&ie==="top"){var l,a=(0,s.Z)({},[e.name].flat(1).filter(Boolean),v);(l=c.current)===null||l===void 0||l.setFieldsValue(a)}}}))}),e.name?(0,i.jsx)(k.Z,{name:[e.name],children:function(v){var l,a;if(!y.current)return y.current=u,null;var d=(0,W.Z)(v,[e.name].flat(1)),_=d==null?void 0:d.find(function(P,D){var X;return!(0,ne.A)(P,(X=y.current)===null||X===void 0?void 0:X[D])});return y.current=u,_&&(e==null||(l=e.editable)===null||l===void 0||(a=l.onValuesChange)===null||a===void 0||a.call(l,_,d)),null}}):null]})}function M(e){var C=h.ZP.useFormInstance();return e.name?(0,i.jsx)(re.Z.Item,(0,o.Z)((0,o.Z)({style:{maxWidth:"100%"},shouldUpdate:function(J,H){var R=[e.name].flat(1);try{return JSON.stringify((0,W.Z)(J,R))!==JSON.stringify((0,W.Z)(H,R))}catch(G){return!0}}},e==null?void 0:e.formItemProps),{},{name:e.name,children:(0,i.jsx)(U,(0,o.Z)((0,o.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},e),{},{editable:(0,o.Z)((0,o.Z)({},e.editable),{},{form:C})}))})):(0,i.jsx)(U,(0,o.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},e))}M.RecordCreator=m,F.Z=M}}]);
