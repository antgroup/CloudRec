"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3231],{8751:function(q,T,t){t.d(T,{Z:function(){return x}});var P=t(87462),Z=t(62435),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},z=k,w=t(84089),h=function(b,B){return Z.createElement(w.Z,(0,P.Z)({},b,{ref:B,icon:z}))},O=Z.forwardRef(h),x=O},18429:function(q,T,t){t.d(T,{Z:function(){return x}});var P=t(87462),Z=t(62435),k={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},z=k,w=t(84089),h=function(b,B){return Z.createElement(w.Z,(0,P.Z)({},b,{ref:B,icon:z}))},O=Z.forwardRef(h),x=O},56477:function(q,T,t){t.d(T,{Z:function(){return x}});var P=t(87462),Z=t(62435),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"down-circle",theme:"outlined"},z=k,w=t(84089),h=function(b,B){return Z.createElement(w.Z,(0,P.Z)({},b,{ref:B,icon:z}))},O=Z.forwardRef(h),x=O},61011:function(q,T,t){t.d(T,{Z:function(){return x}});var P=t(87462),Z=t(62435),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M666.7 505.5l-246-178A8 8 0 00408 334v46.9c0 10.2 4.9 19.9 13.2 25.9L566.6 512 421.2 617.2c-8.3 6-13.2 15.6-13.2 25.9V690c0 6.5 7.4 10.3 12.7 6.5l246-178c4.4-3.2 4.4-9.8 0-13z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"right-circle",theme:"outlined"},z=k,w=t(84089),h=function(b,B){return Z.createElement(w.Z,(0,P.Z)({},b,{ref:B,icon:z}))},O=Z.forwardRef(h),x=O},28058:function(q,T,t){t.d(T,{Z:function(){return x}});var P=t(87462),Z=t(62435),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},z=k,w=t(84089),h=function(b,B){return Z.createElement(w.Z,(0,P.Z)({},b,{ref:B,icon:z}))},O=Z.forwardRef(h),x=O},3859:function(q,T,t){var P=t(97857),Z=t.n(P),k=t(66309),z=t(62435),w=t(53846),h=t(86074);T.Z=function(O){var x,Y=O.text,b=O.style,B=O.level;return(0,h.jsx)(k.Z,{className:w.Z[B==="HIGH"?"riskHigh":(x=["MEDIUM","MIDDLE"])!==null&&x!==void 0&&x.includes(B)?"riskMedium":B==="LOW"?"riskLow":""],style:Z()({},b),children:Y})}},92834:function(q,T,t){t.r(T),t.d(T,{default:function(){return ht}});var P=t(15009),Z=t.n(P),k=t(99289),z=t.n(k),w=t(97857),h=t.n(w),O=t(5574),x=t.n(O),Y=t(81569),b=t(3859),B=t(31732),ze=t(53846),Se=t(24163),ie=t(21171),re=t(29448),we=t(45742),ue=t(93410),N=t(45830),xe=t(25593),ge=t(85265),We=t(83062),Ke=t(86250),$e=t(92398),C=t(62435),M=t(24732),Le=t(29297),j=t(96486),e=t(86074),He=function(g){var n=g.assetInstanceVisible,m=g.assetInfo,u=g.setAssetInstanceVisible,v=(0,C.useState)(""),o=x()(v,2),d=o[0],E=o[1],F=(0,N.useIntl)(),Q=function(){u(!1),E("")},R=function(){Q()};return(0,C.useEffect)(function(){if(n&&!(0,j.isEmpty)(m)){var A=JSON.stringify(m==null?void 0:m.instance,null,4);(0,j.isEmpty)(A)||E(A)}},[n]),(0,e.jsx)(ge.Z,{title:F.formatMessage({id:"asset.extend.text.detail"}),width:"42%",destroyOnClose:!0,open:n,onClose:R,children:!(0,j.isEmpty)(d)&&(0,e.jsx)(Le.q9,{editorKey:"assetInstance",value:d,readOnly:!0,editorStyle:{height:"100%"}})})},Qe=He,Ue=t(57207),ye=t(96364),Ge=t(72028),se=t(17910),Oe=t(90498),Ie=t(66309),_=t(83622),Je=function(g){var n=g.assetInfo,m=(0,C.useRef)(),u=(0,C.useRef)(),v=(0,C.useState)(!1),o=x()(v,2),d=o[0],E=o[1],F=(0,C.useRef)({}),Q=[{title:"\u8D44\u6E90\u540D\u79F0",dataIndex:"resourceName",valueType:"text",align:"center",render:function(A,l){return(0,e.jsx)(Se.Z,{text:l!=null&&l.resourceExist?l.resourceName:"(\u4E0D\u5B58\u5728) "+l.resourceName,maxWidth:280})}},{title:"\u8D44\u6E90\u7C7B\u578B",dataIndex:"resourceType",valueType:"text",align:"center",render:function(A,l){return(0,e.jsx)(Ie.Z,{color:"geekblue",children:l==null?void 0:l.resourceType})}},{title:"\u89C4\u5219\u540D\u79F0",dataIndex:"ruleName",valueType:"text",align:"center",render:function(A,l){var r;return(0,e.jsx)("span",{children:l==null||(r=l.ruleVO)===null||r===void 0?void 0:r.ruleName})}},{title:"\u89C4\u5219\u7EC4",dataIndex:"groupName",valueType:"text",align:"center",render:function(A,l){var r;return(0,e.jsx)("span",{children:l==null||(r=l.ruleVO)===null||r===void 0?void 0:r.groupName})}},{title:"\u98CE\u9669\u7B49\u7EA7",dataIndex:"riskLevel",valueType:"text",align:"center",render:function(A,l){var r=se.I9===null||se.I9===void 0?void 0:se.I9.find(function(c){var V;return c.value===(l==null||(V=l.ruleVO)===null||V===void 0?void 0:V.riskLevel)});return(0,e.jsx)(Ie.Z,{color:r==null?void 0:r.color,children:(r==null?void 0:r.text)||"-"})}},{title:"\u98CE\u9669\u72B6\u6001",dataIndex:"status",valueType:"text",align:"center",render:function(A,l){var r=ye.MW===null||ye.MW===void 0?void 0:ye.MW.find(function(c){return c.value===(l==null?void 0:l.status)});return(0,e.jsx)(Ie.Z,{color:r==null?void 0:r.color,children:(r==null?void 0:r.label)||"-"})}},{title:"\u6700\u8FD1\u626B\u63CF\u547D\u4E2D",dataIndex:"gmtModified",valueType:"text",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",align:"center",render:function(A,l){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(_.ZP,{type:"link",onClick:function(){F.current=h()({},l),E(!0)},children:"\u8BE6\u60C5"})})}}];return(0,e.jsxs)(ue.Z,{boxShadow:!0,bodyStyle:{padding:"32px 4px 12px 4px"},children:[(0,e.jsx)(Oe.Z,{tableStyle:{padding:0},scroll:{x:"max-content"},rowKey:"id",search:!1,options:!1,actionRef:m,formRef:u,columns:Q,request:function(){var R=z()(Z()().mark(function A(l){var r,c,V,X,y,i,te,K,ae;return Z()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return r=l.pageSize,c=l.current,V=l.cloudAccountId,X=l.resourceId,y=l.platform,i={page:c,size:r,cloudAccountId:V,resourceId:X,platformList:[y]},U.next=4,(0,Ge.queryRiskList)(i);case 4:return te=U.sent,K=te.content,ae=te.code,U.abrupt("return",{data:(K==null?void 0:K.data)||[],total:(K==null?void 0:K.total)||0,success:ae===200||!1});case 8:case"end":return U.stop()}},A)}));return function(A){return R.apply(this,arguments)}}(),params:h()({},n),pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1,showTotal:function(A){return"\u5171 ".concat(A," \u6761")}}}),(0,e.jsx)(Ue.Z,{locate:"asset",riskDrawerVisible:d,setRiskDrawerVisible:E,riskDrawerInfo:F.current,tableActionRef:m})]})},Xe=Je,de=t(32983),W=t(99859),be=xe.Z.Text,Ye=function(g){var n=(0,N.useAccess)(),m=n.isAdmin,u=g.assetInfo;return(0,e.jsx)("div",{children:m?(0,e.jsx)(_.ZP,{type:"link",size:"small",href:"/assetManagement/asseConfig?id=".concat(u==null?void 0:u.id),target:"_blank",children:"\u914D\u7F6E\u8BE6\u60C5"}):(0,e.jsx)(e.Fragment,{})})},qe=function(g){var n,m,u,v,o=g.assetInfo;return(0,e.jsx)(ue.Z,{boxShadow:!0,extra:(0,e.jsx)(Ye,{assetInfo:o}),bodyStyle:{paddingBlockStart:0},children:(0,j.isEmpty)(o==null||(n=o.resourceDetailConfigMap)===null||n===void 0?void 0:n.BASE_INFO)&&(0,j.isEmpty)(o==null||(m=o.resourceDetailConfigMap)===null||m===void 0?void 0:m.NETWORK)?(0,e.jsx)(de.Z,{image:de.Z.PRESENTED_IMAGE_SIMPLE}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(be,{style:{marginBottom:6,display:"block",color:"#377df7"},children:"\u57FA\u672C\u4FE1\u606F:"}),o==null||(u=o.resourceDetailConfigMap)===null||u===void 0||(u=u.BASE_INFO)===null||u===void 0?void 0:u.map(function(d,E){return(0,e.jsx)(W.Z.Item,{label:d==null?void 0:d.name,children:d.value},E)}),(0,e.jsx)(be,{style:{marginBottom:6,display:"block",color:"#377df7"},children:"\u7F51\u7EDC\u4FE1\u606F:"}),o==null||(v=o.resourceDetailConfigMap)===null||v===void 0||(v=v.NETWORK)===null||v===void 0?void 0:v.map(function(d,E){return(0,e.jsx)(W.Z.Item,{label:d==null?void 0:d.name,children:d.value},E)})]})})},_e=qe,ce=xe.Z.Text,et=function(g){var n,m=g.assetDrawerVisible,u=g.assetDrawerInfo,v=g.setAssetDrawerVisible,o=(0,N.useModel)("rule"),d=o.platformList,E=(0,N.useModel)("asset"),F=E.assetList,Q=(0,C.useState)(!1),R=x()(Q,2),A=R[0],l=R[1],r=(0,N.useRequest)(function(G){return(0,ie.queryResourceDetailById)({id:G})},{manual:!0,formatResult:function(ne){return ne.content||{}}}),c=r.data,V=r.run,X=r.loading,y=(0,C.useState)("BasicAsset"),i=x()(y,2),te=i[0],K=i[1],ae=[{key:"BasicAsset",label:"\u8D44\u4EA7\u4FE1\u606F",children:(0,e.jsx)(_e,{assetInfo:c})},{key:"AssociateRisk",label:"\u98CE\u9669\u4FE1\u606F",children:(0,e.jsx)(Xe,{assetInfo:c})}],ve=function(ne){K(ne)},U=function(){v(!1),K("BasicAsset")},fe=function(){U()};return(0,C.useEffect)(function(){m&&u!==null&&u!==void 0&&u.id&&V(u.id)},[m,u]),(0,e.jsxs)(ge.Z,{title:"\u8D44\u4EA7\u8BE6\u60C5",width:"50%",open:m,onClose:fe,loading:X,children:[(0,e.jsxs)(ue.Z,{boxShadow:!0,style:{marginBottom:16},bodyStyle:{paddingBlock:6},children:[(0,e.jsxs)(ce,{className:M.Z.customText,children:["\u8D44\u6E90\u540D\u79F0: ",(c==null?void 0:c.resourceName)||"-"]}),(0,e.jsxs)(ce,{className:M.Z.customText,children:["\u8D44\u6E90id: ",(c==null?void 0:c.resourceId)||"-",(0,e.jsx)(We.Z,{title:"\u8D44\u6E90\u8BE6\u60C5",children:(0,e.jsx)("span",{className:M.Z.iconWrap,onClick:function(){return l(!0)},children:(0,e.jsx)(we.Z,{className:M.Z.resourceInstance})})})]}),(0,e.jsx)(ce,{className:M.Z.customText,children:(0,e.jsxs)(Ke.Z,{children:["\u4E91\u670D\u52A1:",(0,e.jsx)("span",{style:{margin:"0 12px 0 6px"},children:(0,re.fD)(c==null?void 0:c.platform,d)}),(0,e.jsx)("span",{children:c==null?void 0:c.platform})]})}),(0,e.jsxs)(ce,{className:M.Z.customText,children:["\u8D44\u6E90\u7C7B\u578B:",(0,e.jsx)("span",{style:{color:"#0958d9",marginLeft:"4px"},children:(F==null||(n=F.find(function(G){return G.value===(c==null?void 0:c.resourceType)}))===null||n===void 0?void 0:n.label)||"-"})]})]}),(0,e.jsx)($e.Z,{activeKey:te,items:ae,onChange:ve,destroyInactiveTabPane:!0}),(0,e.jsx)(Qe,{assetInstanceVisible:A,setAssetInstanceVisible:l,assetInfo:c})]})},tt=et,st=function(g){var n=g.assetInformVisible,m=g.assetInfo,u=g.setAssetInformVisible,v=(0,C.useState)(""),o=x()(v,2),d=o[0],E=o[1],F=(0,N.useIntl)(),Q=function(){u(!1)},R=(0,N.useRequest)(function(r){return(0,ie.queryResourceDetailById)({id:r})},{manual:!0,formatResult:function(c){var V=c.content,X=JSON.stringify(V==null?void 0:V.instance,null,4);(0,j.isEmpty)(X)||E(X)}}),A=R.run,l=R.loading;return(0,C.useEffect)(function(){n&&m!==null&&m!==void 0&&m.id&&A(Number(m.id))},[n,m]),(0,e.jsx)(ge.Z,{title:F.formatMessage({id:"asset.extend.text.detail"}),width:"46%",open:n,onClose:Q,destroyOnClose:!0,loading:l,children:d&&(0,e.jsx)(Le.q9,{editorKey:"ASSET_CONFIG_INSTANCE",value:d,readOnly:!0,editorStyle:{height:"100%"}})})},at=st,nt=t(96987),Be=t(92635),lt=t(79930),rt=t(59999),ot=t(86548),it=t(39380),ut=t(42075),Fe=t(3303),me=t(71230),D=t(15746),dt=t(84567),ct=t(34041),mt=t(57381),Ne=t(25278),vt=t(21532),oe=xe.Z.Paragraph,H={formItem:{marginBottom:0,color:"#999",fontSize:"12px"},paragraph:{marginBottom:0,fontSize:"12px",color:"#999"},paragraphTable:{maxWidth:"300px"},paragraphExpanded:{maxWidth:"500px"}},ft=function(g){var n=g.record,m=(0,N.useIntl)(),u=(0,N.useRequest)(function(d){return(0,ie.queryResourceRiskQuantity)({idList:[d]})},{manual:!0,formatResult:function(E){return E.content[0]}}),v=u.data,o=u.run;return(0,C.useEffect)(function(){n!=null&&n.id&&o(Number(n.id))},[n]),(0,e.jsxs)(ut.Z,{size:2,children:[(0,e.jsx)(_.ZP,{type:"link",style:{padding:0},size:"small",target:"_blank",href:"/riskManagement/riskList?platform=".concat(n==null?void 0:n.platform,"&riskLevel=").concat(se.I9[0].value,"&resourceId=").concat(n==null?void 0:n.resourceId),rel:"prefetch",children:(0,e.jsx)(b.Z,{level:"HIGH",text:"".concat(m.formatMessage({id:"common.link.text.high"})," ").concat((v==null?void 0:v.highLevelRiskCount)||0)})}),(0,e.jsx)(_.ZP,{type:"link",style:{padding:0},size:"small",target:"_blank",href:"/riskManagement/riskList?platform=".concat(n==null?void 0:n.platform,"&riskLevel=").concat(se.I9[1].value,"&resourceId=").concat(n==null?void 0:n.resourceId),rel:"prefetch",children:(0,e.jsx)(b.Z,{level:"MEDIUM",text:"".concat(m.formatMessage({id:"common.link.text.middle"})," ").concat((v==null?void 0:v.mediumLevelRiskCount)||0)})}),(0,e.jsx)(_.ZP,{type:"link",style:{padding:0},size:"small",target:"_blank",href:"/riskManagement/riskList?platform=".concat(n==null?void 0:n.platform,"&riskLevel=").concat(se.I9[2].value,"&resourceId=").concat(n==null?void 0:n.resourceId),rel:"prefetch",children:(0,e.jsx)(b.Z,{level:"LOW",text:"".concat(m.formatMessage({id:"common.link.text.low"}),"  ").concat((v==null?void 0:v.lowLevelRiskCount)||0)})})]})},pt=function(){var g,n=Fe.Z.SHOW_CHILD,m=(0,N.useModel)("rule"),u=m.platformList,v=new URLSearchParams((g=(0,N.useLocation)())===null||g===void 0?void 0:g.search),o=v.get("cloudAccountId"),d=v.get("platform"),E=v.get("resourceGroupType"),F=v.get("resourceType"),Q=(0,C.useRef)(),R=(0,C.useRef)(),A=(0,C.useState)(!1),l=x()(A,2),r=l[0],c=l[1],V=W.Z.useForm(),X=x()(V,1),y=X[0],i=(0,N.useIntl)(),te=(0,C.useState)(!1),K=x()(te,2),ae=K[0],ve=K[1],U=(0,C.useRef)({}),fe=(0,C.useRef)({}),G=(0,C.useState)([]),ne=x()(G,2),xt=ne[0],pe=ne[1],gt=(0,C.useState)({customField:{show:!1},cloudAccountId:{show:!1},platform:{show:!1},address:{show:!1},tenantName:{show:!1}}),yt=x()(gt,1),It=yt[0],Ct=(0,N.useRequest)(function(p){return(0,lt.queryGroupTypeList)({platformList:p})},{manual:!0,formatResult:function(a){var s=a.content;pe(s||[])}}),Ce=Ct.run,jt=[{title:(0,e.jsxs)(e.Fragment,{children:[i.formatMessage({id:"common.table.columns.assetId"}),"\xA0\xA0|\xA0\xA0",i.formatMessage({id:"common.table.columns.assetName"})]}),dataIndex:"resourceId",valueType:"text",align:"left",hideInSearch:!0,render:function(a,s){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.ZP,{style:{padding:0},size:"small",type:"link",onClick:function(){fe.current=h()({},s),c(!0)},children:(0,e.jsx)(oe,{copyable:!0,style:{color:"inherit",marginBottom:0},children:s.resourceId})}),(0,e.jsx)(Se.Z,{placement:"topLeft",text:s.resourceName,maxWidth:360,style:{color:"#333"}})]})}},{title:i.formatMessage({id:"cloudAccount.extend.title.asset.type"}),dataIndex:"resourceType",valueType:"text",align:"left",width:200,hideInSearch:!0,render:function(a,s){return(0,e.jsx)(B.Z,{text:s==null?void 0:s.resourceType})}},{title:i.formatMessage({id:"asset.module.risk.number"}),width:200,dataIndex:"rulePassRate",valueType:"text",align:"left",hideInSearch:!0,render:function(a,s){return(0,e.jsx)(ft,{record:s})}},{title:i.formatMessage({id:"common.input.text.custom.fields"}),dataIndex:"customFieldValue",valueType:"text",align:"left",width:500,render:function(a,s){var S,$,L,I;return(0,e.jsx)("div",{style:{maxHeight:"120px",overflow:"auto"},children:(0,e.jsx)(me.Z,{children:(0,e.jsx)(D.Z,{span:24,children:(0,j.isEmpty)(s==null||(S=s.resourceDetailConfigMap)===null||S===void 0?void 0:S.BASE_INFO)&&(0,j.isEmpty)(s==null||($=s.resourceDetailConfigMap)===null||$===void 0?void 0:$.NETWORK)?"-":(0,e.jsxs)(e.Fragment,{children:[s==null||(L=s.resourceDetailConfigMap)===null||L===void 0||(L=L.BASE_INFO)===null||L===void 0?void 0:L.map(function(f,J){return(0,e.jsx)(W.Z.Item,{label:f==null?void 0:f.name,style:H.formItem,children:(0,e.jsx)(oe,{copyable:{text:f.value},style:h()(h()({},H.paragraph),H.paragraphTable),ellipsis:{tooltip:f.value},children:f.value})},J)}),s==null||(I=s.resourceDetailConfigMap)===null||I===void 0||(I=I.NETWORK)===null||I===void 0?void 0:I.map(function(f,J){return(0,e.jsx)(W.Z.Item,{label:f==null?void 0:f.name,style:H.formItem,children:(0,e.jsx)(oe,{copyable:{text:f.value},style:h()(h()({},H.paragraph),H.paragraphTable),ellipsis:{tooltip:f.value},children:f.value})},J)})]})})})})}},{title:i.formatMessage({id:"common.table.columns.createAndUpdateTime"}),dataIndex:"gmt_modified",tooltip:i.formatMessage({id:"common.table.columns.sort.update"}),valueType:"text",align:"left",hideInSearch:!0,sorter:!0,width:240,render:function(a,s){return(0,e.jsxs)("div",{children:[(0,e.jsx)("section",{style:{color:"#999"},children:(s==null?void 0:s.gmtCreate)||"-"}),(0,e.jsx)("section",{style:{color:"#999"},children:(s==null?void 0:s.gmtModified)||"-"})]})}},{title:i.formatMessage({id:"common.select.label.cloudAccount"}),dataIndex:"cloudAccountId",valueType:"text",align:"left",hideInSearch:!0,render:function(a,s){return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:s==null?void 0:s.cloudAccountId}),(0,e.jsx)("div",{style:{color:"#999"},children:s==null?void 0:s.alias})]})}},{title:i.formatMessage({id:"common.select.label.cloudPlatform"}),dataIndex:"platform",valueType:"text",align:"center",hideInSearch:!0,render:function(a,s){return(0,re.fD)(s.platform,u)}},{title:i.formatMessage({id:"asset.module.input.text.ip"}),dataIndex:"address",valueType:"text",align:"left",hideInSearch:!0},{title:i.formatMessage({id:"common.select.label.tenant"}),dataIndex:"tenantName",valueType:"text",align:"left",hideInSearch:!0}],je=(0,N.useRequest)(function(p){return(0,Be.cloudAccountBaseInfoList)(h()({},p))},{manual:!0,formatResult:function(a){if(a.msg==="success"){var s;return(a==null||(s=a.content)===null||s===void 0||(s=s.accountAliasList)===null||s===void 0?void 0:s.map(function(S){return{label:S,value:S}}))||[]}}}),At=je.data,he=je.run,Zt=je.loading;(0,rt.j)({platformList:u,form:y,requestResourceTypeList:function(a){pe([]),Ce(a)},requestCloudAccountBaseInfoList:he,platformFieldName:"platformList",resourceTypeFieldName:"resourceTypeList"});var Rt=(0,C.useMemo)(function(){var p=function(s){he({platformList:y.getFieldValue("platformList")||[],cloudAccountSearch:s})};return(0,j.debounce)(p,500)},[Be.cloudAccountBaseInfoList]);return(0,C.useEffect)(function(){var p={};if(d&&(p.platformList=[d]),o&&(p.cloudAccountSearch=o),he(p),(!(0,j.isEmpty)(o)||!(0,j.isEmpty)(d)||!(0,j.isEmpty)(E)&&!(0,j.isEmpty)(F))&&(o&&(y==null||y.setFieldValue("cloudAccountId",o)),!(0,j.isEmpty)(d)&&(y==null||y.setFieldValue("platformList",[d]),y.setFieldValue("resourceTypeList",null),pe([]),Ce([d]),!(0,j.isEmpty)(E)&&!(0,j.isEmpty)(F)))){var a=[],s=[E,F];a.push(s),y.setFieldValue("resourceTypeList",a)}},[d,o,F]),(0,e.jsxs)(it._z,{title:!1,className:M.Z.assetPageContainer,breadcrumb:void 0,children:[(0,e.jsx)(ue.Z,{bodyStyle:{paddingBottom:0},className:M.Z.customFilterCard,children:(0,e.jsx)(W.Z,{form:y,children:(0,e.jsxs)(me.Z,{gutter:[24,10],children:[(0,e.jsx)(D.Z,{span:24,children:(0,e.jsx)(W.Z.Item,{name:"platformList",label:i.formatMessage({id:"common.select.label.cloudPlatform"}),style:{marginBottom:0},children:(0,e.jsx)(dt.Z.Group,{options:(0,re.T$)(u),onChange:function(a){var s,S=a||[];y.setFieldValue("resourceTypeList",null),pe([]),Ce(S),he({platformList:S}),(s=Q.current)===null||s===void 0||s.reload()}})})}),(0,e.jsx)(D.Z,{span:6,children:(0,e.jsx)(W.Z.Item,{name:"resourceTypeList",label:i.formatMessage({id:"cloudAccount.extend.title.asset.type"}),style:{marginBottom:0,width:"100%"},children:(0,e.jsx)(Fe.Z,{options:xt,multiple:!0,placeholder:i.formatMessage({id:"common.select.text.placeholder"}),showCheckedStrategy:n,allowClear:!0,showSearch:!0})})}),(0,e.jsx)(D.Z,{span:6,children:(0,e.jsx)(W.Z.Item,{name:"cloudAccountId",label:i.formatMessage({id:"common.select.label.cloudAccount"}),style:{marginBottom:0,width:"100%"},children:(0,e.jsx)(ct.Z,{allowClear:!0,showSearch:!0,placeholder:i.formatMessage({id:"common.select.query.text.placeholder"}),notFoundContent:Zt&&(0,e.jsx)(mt.Z,{size:"small"}),onSearch:Rt,options:At||[]})})}),(0,e.jsx)(D.Z,{span:6,children:(0,e.jsx)(W.Z.Item,{name:"searchParam",label:i.formatMessage({id:"common.input.text.assetIdAndName"}),style:{marginBottom:0,width:"100%"},children:(0,e.jsx)(Ne.Z,{placeholder:i.formatMessage({id:"common.input.text.placeholder"}),allowClear:!0})})}),(0,e.jsx)(D.Z,{span:6,children:(0,e.jsx)(W.Z.Item,{name:"address",label:i.formatMessage({id:"asset.module.input.text.ip"}),style:{marginBottom:0,width:"100%"},children:(0,e.jsx)(Ne.Z,{placeholder:i.formatMessage({id:"common.input.text.placeholder"}),allowClear:!0})})})]})})}),(0,e.jsx)(Oe.Z,{scroll:{x:"max-content"},rowKey:"id",search:{span:6,labelWidth:0},headerTitle:(0,e.jsx)("div",{className:ze.Z.customTitle,children:i.formatMessage({id:"asset.module.text.asset.inquiry"})}),actionRef:Q,formRef:R,columns:jt,columnsState:{defaultValue:It,persistenceType:"localStorage",persistenceKey:"ASSET_TABLE_LIST_CACHE"},onReset:function(){var a;y.resetFields(),(a=R.current)===null||a===void 0||a.resetFields()},pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1,pageSizeOptions:[10,20,50]},request:function(){var p=z()(Z()().mark(function a(s,S){var $,L,I,f,J,Ae,Ze,Re,Me,Ee,De,Te,Ve,Pe,ke;return Z()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return $=s.customFieldValue,L=s.current,I=s.pageSize,f={customFieldValue:$,page:L,size:I},J=(0,re.Hm)(S),(0,j.isEmpty)(J)||(f.sortParam=J==null?void 0:J.key,f.sortType=nt.ym[J.value]),Ae=y.getFieldValue("platformList"),(0,j.isEmpty)(Ae)||(f.platformList=Ae),Ze=y.getFieldValue("resourceTypeList"),(0,j.isEmpty)(Ze)||(f.resourceTypeList=Ze),Re=y.getFieldValue("cloudAccountId"),(0,j.isEmpty)(Re)||(f.cloudAccountId=Re),Me=y.getFieldValue("searchParam"),Me&&(f.searchParam=Me),Ee=y.getFieldValue("address"),Ee&&(f.address=Ee),le.next=16,(0,ie.queryResourceList)(f);case 16:return De=le.sent,Te=De.content,Ve=De.code,Pe=Te.data,ke=Te.total,le.abrupt("return",{data:Pe||[],total:ke||0,success:Ve===200||!1});case 21:case"end":return le.stop()}},a)}));return function(a,s){return p.apply(this,arguments)}}(),tableClassName:M.Z.customAssetTable,expandable:{expandedRowRender:function(a){var s,S,$,L;return(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(D.Z,{span:2,className:M.Z.dimBlock,style:{borderLeft:"0.5px solid rgb(239, 239, 239)"},children:i.formatMessage({id:"common.select.label.cloudAccount"})}),(0,e.jsxs)(D.Z,{span:4,className:M.Z.cleanBlock,style:{flexDirection:"column"},children:[(0,e.jsx)("div",{children:a==null?void 0:a.cloudAccountId}),(0,e.jsx)("div",{style:{color:"#999"},children:a==null?void 0:a.alias})]}),(0,e.jsx)(D.Z,{span:2,className:M.Z.dimBlock,children:i.formatMessage({id:"common.select.label.cloudPlatform"})}),(0,e.jsx)(D.Z,{span:4,className:M.Z.cleanBlock,children:(0,re.fD)(a.platform,u)}),(0,e.jsx)(D.Z,{span:2,className:M.Z.dimBlock,children:i.formatMessage({id:"asset.module.input.text.ip"})}),(0,e.jsx)(D.Z,{span:4,className:M.Z.cleanBlock,children:(a==null?void 0:a.address)||"-"}),(0,e.jsx)(D.Z,{span:2,className:M.Z.dimBlock,children:i.formatMessage({id:"common.select.label.tenant"})}),(0,e.jsx)(D.Z,{span:4,className:M.Z.cleanBlock,children:(a==null?void 0:a.tenantName)||"-"}),(0,e.jsx)(D.Z,{span:2,className:M.Z.dimBlock,style:{borderTop:"none",borderLeft:"0.5px solid rgb(239, 239, 239)"},children:i.formatMessage({id:"common.input.text.custom.fields"})}),(0,e.jsx)(D.Z,{span:22,className:M.Z.customField,style:{borderTop:"none"},children:(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(D.Z,{span:22,style:{maxHeight:"200px",overflow:"auto"},children:(0,j.isEmpty)(a==null||(s=a.resourceDetailConfigMap)===null||s===void 0?void 0:s.BASE_INFO)&&(0,j.isEmpty)(a==null||(S=a.resourceDetailConfigMap)===null||S===void 0?void 0:S.NETWORK)?(0,e.jsx)(vt.ZP,{theme:{token:{margin:8,marginXL:8,marginXS:8}},children:(0,e.jsx)(de.Z,{image:de.Z.PRESENTED_IMAGE_SIMPLE})}):(0,e.jsxs)(e.Fragment,{children:[a==null||($=a.resourceDetailConfigMap)===null||$===void 0||($=$.BASE_INFO)===null||$===void 0?void 0:$.map(function(I,f){return(0,e.jsx)(W.Z.Item,{label:I==null?void 0:I.name,style:H.formItem,children:(0,e.jsx)(oe,{copyable:{text:I.value},style:h()(h()({},H.paragraph),H.paragraphExpanded),ellipsis:{tooltip:I.value},children:I.value})},f)}),a==null||(L=a.resourceDetailConfigMap)===null||L===void 0||(L=L.NETWORK)===null||L===void 0?void 0:L.map(function(I,f){return(0,e.jsx)(W.Z.Item,{label:I==null?void 0:I.name,style:H.formItem,children:(0,e.jsx)(oe,{copyable:{text:I.value},style:h()(h()({},H.paragraph),H.paragraphExpanded),ellipsis:{tooltip:I.value},children:I.value})},f)})]})}),(0,e.jsx)(D.Z,{span:2,children:(0,e.jsxs)(_.ZP,{size:"small",type:"link",target:"_self",href:"/assetManagement/asseConfig?id=".concat(a==null?void 0:a.id),children:[(0,e.jsx)(ot.Z,{}),i.formatMessage({id:"common.button.text.edit"})]})})]})})]})},columnTitle:(0,e.jsx)("div",{style:{width:30,textAlign:"center"}}),columnWidth:30,rowExpandable:function(){return!0},expandIcon:Y.Z}}),(0,e.jsx)(tt,{assetDrawerVisible:ae,setAssetDrawerVisible:ve,assetDrawerInfo:U.current,tableActionRef:Q}),(0,e.jsx)(at,{assetInformVisible:r,setAssetInformVisible:c,assetInfo:fe.current})]})},ht=pt},24732:function(q,T){T.Z={polymerizeWrap:"polymerizeWrap___DA0Kx",polymerizeCard:"polymerizeCard___cqy_L",polymerizeHead:"polymerizeHead___wg2jK",polymerizeMain:"polymerizeMain___MABwi",riskWrap:"riskWrap___bmqQb",riskWrapLeft:"riskWrapLeft___IXwxM",riskWrapRight:"riskWrapRight___Kdvj4",riskAsset:"riskAsset___QyUxz",assetMain:"assetMain___cdM5B",newTag:"newTag___MqjNr",assetMainItem:"assetMainItem___m8m8F",assetMainItemLabel:"assetMainItemLabel___xE6cJ",assetView:"assetView____rh3f",assetPageContainer:"assetPageContainer___XCTom",customFilterCard:"customFilterCard___vdglF",customText:"customText___B_t7o",iconWrap:"iconWrap___tQQp4",resourceInstance:"resourceInstance___Y06OO",assetConfigPageContainer:"assetConfigPageContainer___tB7j6",customAssetTable:"customAssetTable___J9RJC",cleanBlock:"cleanBlock___xLiWM",dimBlock:"dimBlock___HBpS1",customField:"customField___J1Iyu",tabProCard:"tabProCard___ahTeu"}}}]);
