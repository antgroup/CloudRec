(self.webpackChunk=self.webpackChunk||[]).push([[4470],{8751:function(F,z,r){"use strict";r.d(z,{Z:function(){return y}});var d=r(87462),D=r(62435),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},x=_,C=r(84089),h=function(s,g){return D.createElement(C.Z,(0,d.Z)({},s,{ref:g,icon:x}))},A=D.forwardRef(h),y=A},15260:function(F,z,r){"use strict";r.r(z);var d=r(52677),D=r.n(d),_=r(97857),x=r.n(_),C=r(15009),h=r.n(C),A=r(99289),y=r.n(A),$=r(5574),s=r.n($),g=r(45830),S=r(39380),ee=r(78253),O=r(23323),L=r(83062),E=r(42075),B=r(38703),Y=r(66309),f=r(34041),ce=r(83622),pe=r(89094),ve=r(17788),Ce=r(68872),ge=r(25593),ie=r(45605),J=r(8751),Ee=r(4340),be=r(57132),Ue=r(92635),te=r(29448),m=r(62435),e=r(31272),a=r(27484),u=r.n(a),t=r(86074),o=ee.default.RangePicker,T=function(){var V=(0,g.useModel)("rule"),P=V.platformList,w=O.Z.useForm(),K=s()(w,1),X=K[0],p=(0,g.useIntl)(),re=(0,g.useSearchParams)(),ne=s()(re,1),R=ne[0],oe=(0,m.useState)(!1),G=s()(oe,2),De=G[0],ae=G[1],ue=(0,m.useState)([]),Q=s()(ue,2),Me=Q[0],j=Q[1],Oe=(0,m.useState)(0),de=s()(Oe,2),ye=de[0],_e=de[1],fe=(0,m.useState)([u()().subtract(1,"day"),u()().add(1,"day")]),me=s()(fe,2),H=me[0],he=me[1],Se=(0,m.useState)(R.get("platform")||""),se=s()(Se,2),b=se[0],Pe=se[1],N=(0,m.useState)(""),le=s()(N,2),Z=le[0],je=le[1],we=(0,m.useState)([]),Be=s()(we,2),Xe=Be[0],We=Be[1],Ge=(0,m.useState)([]),$e=s()(Ge,2),Je=$e[0],Ke=$e[1],Qe=(0,m.useState)(),Ze=s()(Qe,2),Te=Ze[0],ze=Ze[1],qe=(0,m.useState)(!0),Ve=s()(qe,2),et=Ve[0],tt=Ve[1],rt=(0,m.useState)(!1),Ne=s()(rt,2),nt=Ne[0],Ie=Ne[1],ot=(0,m.useState)(null),Fe=s()(ot,2),k=Fe[0],at=Fe[1],Re=function(){var l=y()(h()().mark(function n(v,M){var U,c,W;return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(v){i.next=3;break}return We([]),i.abrupt("return");case 3:return i.prev=3,i.next=6,(0,Ue.cloudAccountBaseInfoListV2)({platformList:[v],cloudAccountSearch:M});case 6:U=i.sent,U.code===200&&(W=((c=U.content)===null||c===void 0?void 0:c.map(function(q){return{label:q.alias,value:q.cloudAccountId}}))||[],We(W)),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(3),console.error("Failed to obtain the list of cloud accounts:",i.t0);case 13:case"end":return i.stop()}},n,null,[[3,10]])}));return function(v,M){return l.apply(this,arguments)}}();(0,m.useEffect)(function(){b&&Re(b)},[b]),(0,m.useEffect)(function(){var l=R.get("platform"),n=R.get("cloudAccountId");l&&(Re(l),n&&je(n))},[]);var st=(0,m.useState)(1),He=s()(st,2),xe=He[0],Ae=He[1],lt=(0,m.useState)(10),ke=s()(lt,2),Le=ke[0],ct=ke[1],Ye=function(){var l=y()(h()().mark(function n(){var v,M;return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(!Z&&et)){c.next=3;break}return tt(!1),c.abrupt("return");case 3:return ae(!0),j([]),_e(0),c.prev=6,v={platform:b,cloudAccountId:Z,errorCode:Te,startTimeArray:H[0]&&H[1]?[H[0].format("YYYY-MM-DD HH:mm:ss"),H[1].format("YYYY-MM-DD HH:mm:ss")]:void 0,page:xe,size:Le},c.next=10,(0,e.Yq)(v);case 10:M=c.sent,M.code===200&&(j(M.content.data),_e(M.content.total)),c.next=17;break;case 14:c.prev=14,c.t0=c.catch(6),console.error("Failed to obtain the collection record list:",c.t0);case 17:return c.prev=17,ae(!1),c.finish(17);case 20:case"end":return c.stop()}},n,null,[[6,14,17,20]])}));return function(){return l.apply(this,arguments)}}(),it=function(){var l=y()(h()().mark(function n(v,M){var U,c,W;return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(v){i.next=3;break}return Ke([]),i.abrupt("return");case 3:return i.prev=3,i.next=6,(0,e.XX)({platform:v,cloudAccountId:M});case 6:U=i.sent,U&&(W=(U==null||(c=U.content)===null||c===void 0?void 0:c.map(function(q){return{label:"".concat(q.description," (").concat(q.count,")"),value:q.description}}))||[],Ke(W)),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(3),console.error("Failed to obtain the list of error codes:",i.t0);case 13:case"end":return i.stop()}},n,null,[[3,10]])}));return function(v,M){return l.apply(this,arguments)}}();(0,m.useEffect)(function(){b&&it(b,Z)},[b,Z]);var ut=function(){Ae(1),Ye()};(0,m.useEffect)(function(){Ye()},[xe,Le,b,Z,Te,H]);var dt=[{title:p.formatMessage({id:"cloudAccount.extend.title.cloud.platform"}),dataIndex:"platform",key:"platform",render:function(n){return(0,te.c5)(n,P)}},{title:p.formatMessage({id:"cloudAccount.extend.title.account.id"}),dataIndex:"cloudAccountId",key:"cloudAccountId",render:function(n,v){return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:n}),(0,t.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:v.alias})]})}},{title:p.formatMessage({id:"cloudAccount.table.column.collector.name"}),dataIndex:"collectorName",key:"collectorName",ellipsis:!0,render:function(n){return(0,t.jsx)(L.Z,{title:n,children:(0,t.jsx)("span",{children:n})})}},{title:p.formatMessage({id:"cloudAccount.table.column.start.time"}),dataIndex:"startTime",key:"startTime"},{title:p.formatMessage({id:"cloudAccount.table.column.end.time"}),dataIndex:"endTime",key:"endTime"},{title:"Metadata",dataIndex:"collectRecordInfo",key:"collectRecordInfo",width:200,render:function(n,v){var M=null;if(n)try{M=typeof n=="string"?JSON.parse(n):n}catch(c){console.warn("Failed to parse collectRecordInfo:",c),M=n}var U=function(){at(M),Ie(!0)};return M?(0,t.jsx)("div",{style:{cursor:"pointer",padding:"4px 8px",borderRadius:"4px",border:"1px solid #d9d9d9",backgroundColor:"#fafafa",transition:"all 0.3s"},onClick:U,onMouseEnter:function(W){W.currentTarget.style.backgroundColor="#e6f7ff",W.currentTarget.style.borderColor="#1890ff"},onMouseLeave:function(W){W.currentTarget.style.backgroundColor="#fafafa",W.currentTarget.style.borderColor="#d9d9d9"},children:(0,t.jsxs)(E.Z,{children:[(0,t.jsx)(ie.Z,{style:{color:"#1890ff"}}),(0,t.jsx)("span",{style:{color:"#1890ff",fontSize:"12px"},children:"View Details"})]})}):(0,t.jsx)("span",{style:{color:"#999"},children:"No metadata"})}},{title:p.formatMessage({id:"cloudAccount.table.column.status"}),dataIndex:"percent",key:"status",render:function(n,v){return n!==null&&n<100&&v.endTime==null?(0,t.jsx)(B.Z,{percent:n,size:"small",status:n===100?"success":"active",strokeColor:n===100?"#52c41a":"#1890ff"}):(0,t.jsx)(Y.Z,{color:"success",icon:(0,t.jsx)(J.Z,{}),children:"Completed"})}},{title:p.formatMessage({id:"cloudAccount.table.column.error.number"}),dataIndex:"errorResourceTypeList",key:"errorResourceTypeList",render:function(n,v){return(0,t.jsx)("a",{onClick:function(){g.history.push("/cloudAccount/collectionRecord/".concat(v.id))},children:(0,t.jsxs)(E.Z,{children:[(n==null?void 0:n.length)||0,(n==null?void 0:n.length)>0&&(0,t.jsx)(Ee.Z,{style:{color:"#ff4d4f"}})]})})}}];return(0,t.jsxs)(S._z,{title:p.formatMessage({id:"cloudAccount.title.collection.record"}),extra:(0,t.jsxs)(O.Z,{form:X,layout:"inline",children:[(0,t.jsx)(O.Z.Item,{children:(0,t.jsx)(f.Z,{style:{minWidth:200,maxWidth:"100%"},options:P==null?void 0:P.map(function(l){return x()(x()({},l),{},{label:(0,t.jsxs)(E.Z,{children:[(0,te.c5)(l.value,P),l.label]})})}),value:b,onChange:function(n){Pe(n),je(""),Ae(1)}})}),(0,t.jsx)(O.Z.Item,{children:(0,t.jsx)(f.Z,{placeholder:p.formatMessage({id:"cloudAccount.extend.title.account.id"}),style:{width:200},value:Z,onChange:function(n){je(n),ze("")},options:Xe,allowClear:!0,showSearch:!0,filterOption:!1,onSearch:function(n){Re(b,n)}})}),(0,t.jsx)(O.Z.Item,{children:(0,t.jsx)(f.Z,{placeholder:p.formatMessage({id:"cloudAccount.table.column.error.number"}),style:{width:200},value:Te,onChange:function(n){return ze(n)},options:Je,allowClear:!0})}),(0,t.jsx)(O.Z.Item,{children:(0,t.jsx)(o,{showTime:!0,value:H,onChange:function(n){return he(n)}})}),(0,t.jsx)(O.Z.Item,{children:(0,t.jsx)(ce.ZP,{type:"primary",onClick:ut,children:p.formatMessage({id:"common.button.text.query"})})})]}),children:[(0,t.jsx)(pe.Z,{columns:dt,dataSource:Me,rowKey:"id",loading:De,scroll:{x:"max-content"},pagination:{current:xe,pageSize:Le,total:ye,showSizeChanger:!0,showQuickJumper:!0,onChange:function(n,v){Ae(n),ct(v)}}}),(0,t.jsx)(ve.Z,{title:(0,t.jsxs)(E.Z,{children:[(0,t.jsx)(ie.Z,{style:{color:"#1890ff"}}),(0,t.jsx)("span",{children:"Metadata Details"})]}),open:nt,onCancel:function(){return Ie(!1)},footer:[(0,t.jsx)(ce.ZP,{icon:(0,t.jsx)(be.Z,{}),onClick:function(){if(k){var n=D()(k)==="object"?JSON.stringify(k,null,2):k;navigator.clipboard.writeText(n),Ce.ZP.success("Metadata copied to clipboard!")}},children:"Copy"},"copy"),(0,t.jsx)(ce.ZP,{onClick:function(){return Ie(!1)},children:"Close"},"close")],width:800,children:(0,t.jsx)("div",{style:{maxHeight:"60vh",overflow:"auto",backgroundColor:"#f6f8fa",border:"1px solid #e1e4e8",borderRadius:"6px",padding:"16px"},children:(0,t.jsx)(ge.Z.Text,{code:!0,style:{fontSize:"13px",fontFamily:'SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace'},children:(0,t.jsx)("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word",margin:0,lineHeight:"1.45",color:"#24292e"},children:k?D()(k)==="object"?JSON.stringify(k,null,2):k:""})})})})]})};z.default=T},31272:function(F,z,r){"use strict";r.d(z,{XX:function(){return ee},Yq:function(){return $},xd:function(){return g}});var d=r(15009),D=r.n(d),_=r(97857),x=r.n(_),C=r(99289),h=r.n(C),A=r(40396),y=r(45830);function $(L,E){return s.apply(this,arguments)}function s(){return s=h()(D()().mark(function L(E,B){return D()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,y.request)("".concat(A._,"/api/cloudAccount/collectorRecord/getCollectorRecordList"),x()({method:"POST",headers:{"Content-Type":"application/json"},data:E},B||{})));case 1:case"end":return f.stop()}},L)})),s.apply(this,arguments)}function g(L,E){return S.apply(this,arguments)}function S(){return S=h()(D()().mark(function L(E,B){return D()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,y.request)("".concat(A._,"/api/cloudAccount/collectorRecord/getCollectorRecordDetail"),x()({method:"POST",headers:{"Content-Type":"application/json"},data:E},B||{})));case 1:case"end":return f.stop()}},L)})),S.apply(this,arguments)}function ee(L,E){return O.apply(this,arguments)}function O(){return O=h()(D()().mark(function L(E,B){return D()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,y.request)("".concat(A._,"/api/cloudAccount/collectorRecord/getErrorCodeList"),x()({method:"POST",headers:{"Content-Type":"application/json"},data:E},B||{})));case 1:case"end":return f.stop()}},L)})),O.apply(this,arguments)}},66309:function(F,z,r){"use strict";r.d(z,{Z:function(){return m}});var d=r(62435),D=r(93967),_=r.n(D),x=r(98423),C=r(98787),h=r(69760),A=r(96159),y=r(45353),$=r(53124),s=r(861),g=r(15063),S=r(14747),ee=r(83262),O=r(83559);const L=e=>{const{paddingXXS:a,lineWidth:u,tagPaddingHorizontal:t,componentCls:o,calc:T}=e,I=T(t).sub(u).equal(),V=T(a).sub(u).equal();return{[o]:Object.assign(Object.assign({},(0,S.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:I,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,s.unit)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${o}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${o}-close-icon`]:{marginInlineStart:V,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${o}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${o}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:I}}),[`${o}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},E=e=>{const{lineWidth:a,fontSizeIcon:u,calc:t}=e,o=e.fontSizeSM;return(0,ee.mergeToken)(e,{tagFontSize:o,tagLineHeight:(0,s.unit)(t(e.lineHeightSM).mul(o).equal()),tagIconSize:t(u).sub(t(a).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},B=e=>({defaultBg:new g.FastColor(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var Y=(0,O.I$)("Tag",e=>{const a=E(e);return L(a)},B),f=function(e,a){var u={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(u[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)a.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(u[t[o]]=e[t[o]]);return u},pe=d.forwardRef((e,a)=>{const{prefixCls:u,style:t,className:o,checked:T,onChange:I,onClick:V}=e,P=f(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:w,tag:K}=d.useContext($.E_),X=G=>{I==null||I(!T),V==null||V(G)},p=w("tag",u),[re,ne,R]=Y(p),oe=_()(p,`${p}-checkable`,{[`${p}-checkable-checked`]:T},K==null?void 0:K.className,o,ne,R);return re(d.createElement("span",Object.assign({},P,{ref:a,style:Object.assign(Object.assign({},t),K==null?void 0:K.style),className:oe,onClick:X})))}),ve=r(98719);const Ce=e=>(0,ve.Z)(e,(a,{textColor:u,lightBorderColor:t,lightColor:o,darkColor:T})=>({[`${e.componentCls}${e.componentCls}-${a}`]:{color:u,background:o,borderColor:t,"&-inverse":{color:e.colorTextLightSolid,background:T,borderColor:T},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}));var ge=(0,O.bk)(["Tag","preset"],e=>{const a=E(e);return Ce(a)},B);function ie(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const J=(e,a,u)=>{const t=ie(u);return{[`${e.componentCls}${e.componentCls}-${a}`]:{color:e[`color${u}`],background:e[`color${t}Bg`],borderColor:e[`color${t}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var Ee=(0,O.bk)(["Tag","status"],e=>{const a=E(e);return[J(a,"success","Success"),J(a,"processing","Info"),J(a,"error","Error"),J(a,"warning","Warning")]},B),be=function(e,a){var u={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(u[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)a.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(u[t[o]]=e[t[o]]);return u};const te=d.forwardRef((e,a)=>{const{prefixCls:u,className:t,rootClassName:o,style:T,children:I,icon:V,color:P,onClose:w,bordered:K=!0,visible:X}=e,p=be(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:re,direction:ne,tag:R}=d.useContext($.E_),[oe,G]=d.useState(!0),De=(0,x.Z)(p,["closeIcon","closable"]);d.useEffect(()=>{X!==void 0&&G(X)},[X]);const ae=(0,C.o2)(P),ue=(0,C.yT)(P),Q=ae||ue,Me=Object.assign(Object.assign({backgroundColor:P&&!Q?P:void 0},R==null?void 0:R.style),T),j=re("tag",u),[Oe,de,ye]=Y(j),_e=_()(j,R==null?void 0:R.className,{[`${j}-${P}`]:Q,[`${j}-has-color`]:P&&!Q,[`${j}-hidden`]:!oe,[`${j}-rtl`]:ne==="rtl",[`${j}-borderless`]:!K},t,o,de,ye),fe=b=>{b.stopPropagation(),w==null||w(b),!b.defaultPrevented&&G(!1)},[,me]=(0,h.Z)((0,h.w)(e),(0,h.w)(R),{closable:!1,closeIconRender:b=>{const Pe=d.createElement("span",{className:`${j}-close-icon`,onClick:fe},b);return(0,A.wm)(b,Pe,N=>({onClick:le=>{var Z;(Z=N==null?void 0:N.onClick)===null||Z===void 0||Z.call(N,le),fe(le)},className:_()(N==null?void 0:N.className,`${j}-close-icon`)}))}}),H=typeof p.onClick=="function"||I&&I.type==="a",he=V||null,Se=he?d.createElement(d.Fragment,null,he,I&&d.createElement("span",null,I)):I,se=d.createElement("span",Object.assign({},De,{ref:a,className:_e,style:Me}),Se,me,ae&&d.createElement(ge,{key:"preset",prefixCls:j}),ue&&d.createElement(Ee,{key:"status",prefixCls:j}));return Oe(H?d.createElement(y.Z,{component:"Tag"},se):se)});te.CheckableTag=pe;var m=te},64599:function(F,z,r){var d=r(96263);function D(_,x){var C=typeof Symbol!="undefined"&&_[Symbol.iterator]||_["@@iterator"];if(!C){if(Array.isArray(_)||(C=d(_))||x&&_&&typeof _.length=="number"){C&&(_=C);var h=0,A=function(){};return{s:A,n:function(){return h>=_.length?{done:!0}:{done:!1,value:_[h++]}},e:function(S){throw S},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y=!0,$=!1,s;return{s:function(){C=C.call(_)},n:function(){var S=C.next();return y=S.done,S},e:function(S){$=!0,s=S},f:function(){try{!y&&C.return!=null&&C.return()}finally{if($)throw s}}}}F.exports=D,F.exports.__esModule=!0,F.exports.default=F.exports}}]);
