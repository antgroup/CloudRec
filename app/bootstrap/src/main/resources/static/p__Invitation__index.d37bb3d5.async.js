"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6090],{94149:function(Q,I,e){e.d(I,{Z:function(){return D}});var g=e(87462),u=e(62435),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},T=Z,N=e(84089),y=function(c,E){return u.createElement(N.Z,(0,g.Z)({},c,{ref:E,icon:T}))},B=u.forwardRef(y),D=B},5966:function(Q,I,e){var g=e(97685),u=e(1413),Z=e(91),T=e(21770),N=e(99859),y=e(55241),B=e(98423),D=e(62435),h=e(58055),c=e(86074),E=["fieldProps","proFieldProps"],U=["fieldProps","proFieldProps"],r="text",$=function(l){var n=l.fieldProps,v=l.proFieldProps,m=(0,Z.Z)(l,E);return(0,c.jsx)(h.Z,(0,u.Z)({valueType:r,fieldProps:n,filedConfig:{valueType:r},proFieldProps:v},m))},O=function(l){var n=(0,T.Z)(l.open||!1,{value:l.open,onChange:l.onOpenChange}),v=(0,g.Z)(n,2),m=v[0],t=v[1];return(0,c.jsx)(N.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(z){var b,L=z.getFieldValue(l.name||[]);return(0,c.jsx)(y.Z,(0,u.Z)((0,u.Z)({getPopupContainer:function(o){return o&&o.parentNode?o.parentNode:o},onOpenChange:function(o){return t(o)},content:(0,c.jsxs)("div",{style:{padding:"4px 0"},children:[(b=l.statusRender)===null||b===void 0?void 0:b.call(l,L),l.strengthText?(0,c.jsx)("div",{style:{marginTop:10},children:(0,c.jsx)("span",{children:l.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},l.popoverProps),{},{open:m,children:l.children}))}})},d=function(l){var n=l.fieldProps,v=l.proFieldProps,m=(0,Z.Z)(l,U),t=(0,D.useState)(!1),F=(0,g.Z)(t,2),z=F[0],b=F[1];return n!=null&&n.statusRender&&m.name?(0,c.jsx)(O,{name:m.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:z,onOpenChange:b,children:(0,c.jsx)("div",{children:(0,c.jsx)(h.Z,(0,u.Z)({valueType:"password",fieldProps:(0,u.Z)((0,u.Z)({},(0,B.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(C){var o;n==null||(o=n.onBlur)===null||o===void 0||o.call(n,C),b(!1)},onClick:function(C){var o;n==null||(o=n.onClick)===null||o===void 0||o.call(n,C),b(!0)}}),proFieldProps:v,filedConfig:{valueType:r}},m))})}):(0,c.jsx)(h.Z,(0,u.Z)({valueType:"password",fieldProps:n,proFieldProps:v,filedConfig:{valueType:r}},m))},s=$;s.Password=d,s.displayName="ProFormComponent",I.Z=s},26:function(Q,I,e){e.d(I,{B:function(){return O}});var g=e(1413),u=e(91),Z=e(10915),T=e(21532),N=e(93967),y=e.n(N),B=e(62435),D=e(97269),h=e(4942),c=e(64847),E=function(s){return(0,h.Z)((0,h.Z)((0,h.Z)((0,h.Z)({},s.componentCls,{display:"flex",width:"100%",height:"100%",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat","&-notice":{display:"flex",flex:"1",zIndex:99,alignItems:"flex-end","&-activity":{marginBlock:24,marginInline:24,paddingInline:24,paddingBlock:24,"&-title":{fontWeight:"500",fontSize:"28px"},"&-subTitle":{marginBlockStart:8,fontSize:"16px"},"&-action":{marginBlockStart:"24px"}}},"&-left":{display:"flex",flex:"1",zIndex:99,flexDirection:"column",maxWidth:"550px",paddingInline:0,paddingBlock:32,overflow:"auto",alignItems:"center",justifyContent:"center",padding:24,height:"max-content",margin:"auto"},"&-container":{borderRadius:s.borderRadius,backgroundSize:"100%",backgroundPosition:"top",backdropFilter:"blur(10px)",backgroundColor:(0,c.uK)(s.colorBgContainer,.8),backgroundImage:"radial-gradient(circle at 93% 1e+02%, rgba(22,119,255,0.17) 0%, rgba(255,255,255,0.05) 23%, rgba(255,255,255,0.03) 87%, rgba(22,119,255,0.12) 109%)",padding:32,boxShadow:"0px 0px 24px 0px rgba(0,0,0,0.1)"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",tinsetBlockStartop:"2px",color:s.colorTextHeading,fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:s.colorTextSecondary,fontSize:s.fontSize},"&-main":{width:"328px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (max-width: ".concat(s.screenMDMin,"px)"),(0,h.Z)({},s.componentCls,{flexDirection:"column-reverse",background:"none !important","&-container":{padding:24,boxShadow:"none",backgroundImage:"none",borderRadius:"0px"},"&-notice":{display:"flex",flex:"none",alignItems:"flex-start",width:"100%","> div":{width:"100%"}}})),"@media (min-width: ".concat(s.screenMDMin,"px)"),(0,h.Z)({},s.componentCls,{"&-left":{backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}})),"@media (max-width: ".concat(s.screenSM,"px)"),(0,h.Z)({},s.componentCls,{"&-main":{width:"95%",maxWidth:"328px"}}))};function U(d){return(0,c.Xj)("LoginFormPage",function(s){var R=(0,g.Z)((0,g.Z)({},s),{},{componentCls:".".concat(d)});return[E(R)]})}var r=e(86074),$=["logo","message","style","activityConfig","backgroundImageUrl","backgroundVideoUrl","title","subTitle","actions","children","containerStyle","otherStyle","mainStyle"];function O(d){var s=d.logo,R=d.message,l=d.style,n=d.activityConfig,v=d.backgroundImageUrl,m=d.backgroundVideoUrl,t=d.title,F=d.subTitle,z=d.actions,b=d.children,L=d.containerStyle,C=d.otherStyle,o=d.mainStyle,w=(0,u.Z)(d,$),a=(0,Z.YB)(),X=function(){var M,A;return w.submitter===!1||((M=w.submitter)===null||M===void 0?void 0:M.submitButtonProps)===!1?!1:(0,g.Z)({size:"large",style:{width:"100%"}},(A=w.submitter)===null||A===void 0?void 0:A.submitButtonProps)},q=(0,g.Z)((0,g.Z)({searchConfig:{submitText:a.getMessage("loginForm.submitText","\u767B\u5F55")},render:function(M,A){return A.pop()}},w.submitter),{},{submitButtonProps:X()}),k=(0,B.useContext)(T.ZP.ConfigContext),K=k.getPrefixCls("pro-form-login-page"),V=U(K),_=V.wrapSSR,J=V.hashId,f=function(M){return"".concat(K,"-").concat(M," ").concat(J).trim()},H=(0,B.useMemo)(function(){return s?typeof s=="string"?(0,r.jsx)("img",{src:s}):s:null},[s]);return _((0,r.jsxs)("div",{className:y()(K,J),style:(0,g.Z)((0,g.Z)({},l),{},{position:"relative",backgroundImage:v?'url("'.concat(v,'")'):void 0}),children:[m?(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",overflow:"hidden",height:"100%",zIndex:1,pointerEvents:"none"},children:(0,r.jsx)("video",{src:m,controls:!1,autoPlay:!0,playsInline:!0,loop:!0,muted:!0,crossOrigin:"anonymous",style:{width:"100%",height:"100%",objectFit:"cover"}})}):null,(0,r.jsxs)("div",{className:y()(K,J),children:[(0,r.jsx)("div",{className:f("notice"),children:n&&(0,r.jsxs)("div",{className:f("notice-activity"),style:n.style,children:[n.title&&(0,r.jsxs)("div",{className:f("notice-activity-title"),children:[" ",n.title," "]}),n.subTitle&&(0,r.jsx)("div",{className:f("notice-activity-subTitle"),children:n.subTitle}),n.action&&(0,r.jsx)("div",{className:f("notice-activity-action"),children:n.action})]})}),(0,r.jsx)("div",{className:f("left"),children:(0,r.jsxs)("div",{className:f("container"),style:L,children:[(0,r.jsxs)("div",{className:f("top"),children:[t||H?(0,r.jsxs)("div",{className:f("header"),children:[H?(0,r.jsx)("span",{className:f("logo"),children:H}):null,t?(0,r.jsx)("span",{className:f("title"),children:t}):null]}):null,F?(0,r.jsx)("div",{className:f("desc"),children:F}):null]}),(0,r.jsxs)("div",{className:f("main"),style:o,children:[(0,r.jsxs)(D.A,(0,g.Z)((0,g.Z)({isKeyPressSubmit:!0},w),{},{submitter:q,children:[R,b]})),z?(0,r.jsx)("div",{className:f("other"),style:C,children:z}):null]})]})})]})]}))}},14904:function(Q,I,e){e.r(I),e.d(I,{default:function(){return z}});var g=e(15009),u=e.n(g),Z=e(99289),T=e.n(Z),N=e(5574),y=e.n(N),B=e(55375),D=e(33651),h=e(98665),c=e(14748),E=e(87547),U=e(94149),r=e(39380),$=e(26),O=e(5966),d=e(45830),s=e(68872),R=e(57381),l=e(22181),n=e(83622),v=e(62435),m={invitation:"invitation___Fiy6u",invitationContainer:"invitationContainer___s31wH",invitationCard:"invitationCard___F9CsT",title:"title___KvZTK",subtitle:"subtitle___Io6iJ",loadingContainer:"loadingContainer___vfF73",loadingText:"loadingText___apBxr",errorContainer:"errorContainer___OKw9B",errorIcon:"errorIcon___K2Bdj",errorTitle:"errorTitle___YgWtk",errorMessage:"errorMessage___El_tT",autoJoinContainer:"autoJoinContainer___uNHfT",successIcon:"successIcon___VIG7W",autoJoinTitle:"autoJoinTitle___c91xT",autoJoinMessage:"autoJoinMessage___wMdGe",registerForm:"registerForm___v0UKo","ant-form-item":"ant-form-item___NslJY","ant-input":"ant-input___ODsuq","ant-btn":"ant-btn___Tp4Ed","ant-btn-primary":"ant-btn-primary___pNx2n",formTitle:"formTitle___ZTO9w"},t=e(86074),F=function(){var L=s.ZP.useMessage(),C=y()(L,2),o=C[0],w=C[1],a=(0,d.useIntl)(),X=(0,d.useSearchParams)(),q=y()(X,1),k=q[0],K=(0,v.useState)(!0),V=y()(K,2),_=V[0],J=V[1],f=(0,v.useState)(!1),H=y()(f,2),G=H[0],M=H[1],A=(0,v.useState)(null),ne=y()(A,2),ee=ne[0],le=ne[1],de=(0,v.useState)("checking"),ie=y()(de,2),re=ie[0],W=ie[1],ce=function(){var P=localStorage.getItem("JSESSIONID");return!!P},ue=function(){var S=T()(u()().mark(function P(){var p,j;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(p=k.get("code"),p){i.next=5;break}return W("invalid"),J(!1),i.abrupt("return");case 5:return i.prev=5,i.next=8,(0,D.checkInviteCode)({inviteCode:p});case 8:if(j=i.sent,!(j.code===200&&j.content)){i.next=19;break}if(le(j.content),!ce()){i.next=16;break}return i.next=14,ge(p);case 14:i.next=17;break;case 16:W("register");case 17:i.next=20;break;case 19:W("invalid");case 20:i.next=26;break;case 22:i.prev=22,i.t0=i.catch(5),console.error("Error validating invite code:",i.t0),W("invalid");case 26:return i.prev=26,J(!1),i.finish(26);case 29:case"end":return i.stop()}},P,null,[[5,22,26,29]])}));return function(){return S.apply(this,arguments)}}(),ge=function(){var S=T()(u()().mark(function P(p){var j;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,h.joinTenant)({inviteCode:p});case 3:j=i.sent,j.code===200?(W("auto-join"),o.success(a.formatMessage({id:"invitation.message.join.success"})),setTimeout(function(){window.location.href="/home"},1500)):(o.error(j.msg||a.formatMessage({id:"invitation.message.join.failed"})),W("invalid")),i.next=12;break;case 7:i.prev=7,i.t0=i.catch(0),console.error("Auto join tenant error:",i.t0),o.error(a.formatMessage({id:"invitation.message.join.failed"})),W("invalid");case 12:case"end":return i.stop()}},P,null,[[0,7]])}));return function(p){return S.apply(this,arguments)}}(),ve=function(){var S=T()(u()().mark(function P(p){var j,Y,i,ae,me,se,te;return u()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(j=p.userId,Y=p.username,i=p.password,ae=p.confirmPassword,me=p.email,se=k.get("code"),i===ae){x.next=5;break}return o.error(a.formatMessage({id:"invitation.message.password.mismatch"})),x.abrupt("return");case 5:return M(!0),x.prev=6,x.next=9,(0,h.register)({userId:j,username:Y,password:i,code:se});case 9:te=x.sent,te.code===200?(o.success(a.formatMessage({id:"invitation.message.register.success"})),setTimeout(function(){var oe=k.get("code"),fe=oe?"/login?code=".concat(oe):"/login";window.location.href=fe},1500)):o.error(te.msg||a.formatMessage({id:"invitation.message.register.failed"})),x.next=17;break;case 13:x.prev=13,x.t0=x.catch(6),console.error("Registration error:",x.t0),o.error(a.formatMessage({id:"invitation.message.register.failed"}));case 17:return x.prev=17,M(!1),x.finish(17);case 20:case"end":return x.stop()}},P,null,[[6,13,17,20]])}));return function(p){return S.apply(this,arguments)}}();return(0,v.useEffect)(function(){ue()},[]),_?(0,t.jsxs)(r._z,{ghost:!0,title:!1,breadcrumb:void 0,childrenContentStyle:{padding:0,height:"100%"},className:m.invitation,children:[(0,t.jsx)("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3,background:"rgba(255, 255, 255, 0.9)",borderRadius:"6px",padding:"4px"},children:(0,t.jsx)(c.Z,{})}),(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,t.jsx)(R.Z,{size:"large"})})]}):re==="invalid"?(0,t.jsxs)(r._z,{ghost:!0,title:!1,breadcrumb:void 0,childrenContentStyle:{padding:0,height:"100%"},className:m.invitation,children:[(0,t.jsx)("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3,background:"rgba(255, 255, 255, 0.9)",borderRadius:"6px",padding:"4px"},children:(0,t.jsx)(c.Z,{})}),(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,t.jsx)(l.ZP,{status:"error",title:a.formatMessage({id:"invitation.message.invalid"}),subTitle:a.formatMessage({id:"invitation.message.invalid.subtitle"}),extra:[(0,t.jsx)(n.ZP,{type:"primary",onClick:function(){return window.location.href="/home"},children:a.formatMessage({id:"invitation.button.text.return.home"})},"home")]})})]}):re==="auto-join"?(0,t.jsxs)(r._z,{ghost:!0,title:!1,breadcrumb:void 0,childrenContentStyle:{padding:0,height:"100%"},className:m.invitation,children:[(0,t.jsx)("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3,background:"rgba(255, 255, 255, 0.9)",borderRadius:"6px",padding:"4px"},children:(0,t.jsx)(c.Z,{})}),(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,t.jsx)(l.ZP,{status:"success",title:a.formatMessage({id:"invitation.message.join.success"}),subTitle:a.formatMessage({id:"invitation.message.join.success.subtitle"}),extra:[(0,t.jsx)(n.ZP,{type:"primary",onClick:function(){return window.location.href="/home"},children:a.formatMessage({id:"invitation.button.text.return.home"})},"home")]})})]}):(0,t.jsxs)(r._z,{ghost:!0,title:!1,breadcrumb:void 0,childrenContentStyle:{padding:0,height:"100%"},className:m.invitation,children:[w,(0,t.jsx)("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3,background:"rgba(255, 255, 255, 0.9)",borderRadius:"6px",padding:"4px"},children:(0,t.jsx)(c.Z,{})}),(0,t.jsxs)($.B,{backgroundImageUrl:"https://gw.alipayobjects.com/zos/rmsportal/FfdJeJRQWjEeGTpqgBKj.png",logo:"/favicon-light.ico",title:B.j2,subTitle:"CloudRec's Protecting More",onFinish:ve,submitter:{render:function(){return(0,t.jsx)(n.ZP,{loading:G,type:"primary",htmlType:"submit",style:{height:40,width:"100%",borderRadius:6,fontSize:16},children:a.formatMessage({id:"individual.button.text.register"})})}},children:[ee&&(0,t.jsxs)("div",{style:{marginBottom:24,padding:16,background:"#f6f8fa",borderRadius:8,border:"1px solid #e1e8ed"},children:[(0,t.jsxs)("div",{style:{fontSize:16,fontWeight:600,color:"#1890ff",marginBottom:12,textAlign:"center"},children:["\u{1F389} ",a.formatMessage({id:"invitation.message.invitation.received"})]}),(0,t.jsx)("div",{style:{fontSize:14,color:"#666",textAlign:"center"},children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{style:{margin:"0 4px"},children:[ee.inviter," ",a.formatMessage({id:"invitation.message.invitation.received"})]}),(0,t.jsx)("span",{style:{fontWeight:500},children:ee.tenantName})]})})]}),(0,t.jsx)(O.Z,{name:"username",fieldProps:{size:"large",prefix:(0,t.jsx)(E.Z,{className:"prefixIcon"})},placeholder:a.formatMessage({id:"invitation.input.text.username"}),rules:[{required:!0,message:a.formatMessage({id:"invitation.input.text.username"})}]}),(0,t.jsx)(O.Z,{name:"userId",fieldProps:{size:"large",prefix:(0,t.jsx)(E.Z,{className:"prefixIcon"})},placeholder:a.formatMessage({id:"invitation.input.text.user.id"}),rules:[{required:!0,message:a.formatMessage({id:"invitation.input.text.user.id"})}]}),(0,t.jsx)(O.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,t.jsx)(U.Z,{className:"prefixIcon"})},placeholder:a.formatMessage({id:"invitation.input.text.password"}),rules:[{required:!0,message:a.formatMessage({id:"invitation.input.text.password"})},{min:6,message:a.formatMessage({id:"invitation.input.text.password.length"})}]}),(0,t.jsx)(O.Z.Password,{name:"confirmPassword",fieldProps:{size:"large",prefix:(0,t.jsx)(U.Z,{className:"prefixIcon"})},placeholder:a.formatMessage({id:"invitation.input.text.password.confirm"}),rules:[{required:!0,message:a.formatMessage({id:"invitation.input.text.password.confirm"})}]}),(0,t.jsxs)("div",{style:{textAlign:"center",marginBottom:16,fontSize:14,color:"#666"},children:[a.formatMessage({id:"invitation.message.already.have.account"}),(0,t.jsx)("a",{style:{color:"#1890ff",marginLeft:4,textDecoration:"none"},onClick:function(){var P=k.get("code"),p=P?"/login?code=".concat(P):"/login";window.location.href=p},children:a.formatMessage({id:"invitation.message.already.have.account.login"})})]})]})]})},z=F}}]);
