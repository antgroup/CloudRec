"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7759],{24163:function(K,x,e){var D=e(97857),u=e.n(D),O=e(25593),y=e(83062),U=e(62435),m=e(86074),w=O.Z.Paragraph;x.Z=function(r){var A=r.text,j=r.width,L=r.maxWidth,C=r.rows,R=C===void 0?2:C,Z=r.placement,P=Z===void 0?"top":Z,E=r.color,I=E===void 0?"rgba(0, 0, 0, 0.88)":E,k=r.link,t=k===void 0?!1:k,$=r.onClickCallBackFunc,S=r.style,B=S===void 0?{}:S,h=r.copyable,W=h===void 0?!1:h;return(0,m.jsx)("div",{style:{maxWidth:L,width:j},children:(0,m.jsx)(y.Z,{title:(0,m.jsx)("div",{children:A}),placement:P,children:(0,m.jsx)(w,{ellipsis:{rows:R},style:u()({marginBottom:0,color:I,cursor:t?"pointer":""},B),onClick:$,copyable:W,children:A})})})}},64959:function(K,x,e){e.r(x),e.d(x,{default:function(){return ee}});var D=e(15009),u=e.n(D),O=e(99289),y=e.n(O),U=e(5574),m=e.n(U),w=e(53846),r=e(24163),A=e(45605),j=e(92016),L=e(17788),C=e(83062),R=e(2487),Z=e(71230),P=e(15746),E=e(21987),I=e(62435),k={toolTipWrap:"toolTipWrap___RxSDA",tooltipIcon:"tooltipIcon___lORng"},t=e(86074),$=function(){var s=(0,j.useIntl)();return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:s.formatMessage({id:"collector.extend.text.token.tip1"})}),(0,t.jsxs)("div",{children:[s.formatMessage({id:"collector.extend.text.token.tip2"}),(0,t.jsx)("div",{children:s.formatMessage({id:"collector.extend.text.token.tip3"})}),(0,t.jsx)("div",{children:s.formatMessage({id:"collector.extend.text.token.tip4"})})]})]})},S=function(s){var N=s.visible,b=s.onClose,a=s.tokenInfo,p=(0,j.useIntl)();return(0,t.jsxs)(L.Z,{width:740,style:{top:120},title:p.formatMessage({id:"collector.extend.text.token.information"}),open:N,onCancel:b,footer:null,children:[(0,t.jsxs)("p",{children:["Token",(0,t.jsx)(C.Z,{overlayClassName:k.toolTipWrap,placement:"top",title:(0,t.jsx)($,{}),children:(0,t.jsx)(A.Z,{className:k.tooltipIcon})}),":",a!=null&&a.token?(0,t.jsx)(E.Z,{copyable:!0,children:a.token}):"-"]}),(0,t.jsx)("p",{children:(0,t.jsx)(R.Z,{bordered:!0,dataSource:(a==null?void 0:a.tokenList)||[],renderItem:function(c){return(0,t.jsx)(R.Z.Item,{children:(0,t.jsxs)(Z.Z,{gutter:[24,0],style:{width:"100%"},children:[(0,t.jsx)(P.Z,{span:4,children:(0,t.jsx)(r.Z,{text:(c==null?void 0:c.platformName)||"-",rows:1,placement:"topLeft"})}),(0,t.jsx)(P.Z,{span:20,children:(0,t.jsx)(r.Z,{text:(c==null?void 0:c.script)||"-",rows:1,placement:"topLeft",copyable:!0})})]})})}})}),(0,t.jsxs)("p",{children:[p.formatMessage({id:"collector.extend.text.expiration.date"}),"\xA0:\xA0",(a==null?void 0:a.expireTime)||"-"]}),(0,t.jsxs)("p",{children:[p.formatMessage({id:"rule.input.text.rule.group.creator"}),"\xA0:\xA0",(a==null?void 0:a.username)||"-"]})]})},B=S,h=e(97470),W=e(29448),Q=e(39380),X=e(70989),Y=e(68872),_=e(86738),z=e(83622),q=function(){var s=(0,I.useRef)(),N=(0,I.useState)(!1),b=m()(N,2),a=b[0],p=b[1],F=(0,I.useState)({token:"",expireTime:"",username:"",script:"",tokenList:[]}),c=m()(F,2),te=c[0],ne=c[1],oe=Y.ZP.useMessage(),ae=m()(oe,1),re=ae[0],o=(0,j.useIntl)(),le=function(){var d=y()(u()().mark(function i(n){var g,l,T;return u()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,h.exitAgent)({onceToken:n});case 2:g=f.sent,(g.code===200||g.msg==="success")&&(re.success(o.formatMessage({id:"common.message.text.exit.success"})),(l=s.current)===null||l===void 0||(T=l.reloadAndRest)===null||T===void 0||T.call(l));case 4:case"end":return f.stop()}},i)}));return function(n){return d.apply(this,arguments)}}(),se=[{title:o.formatMessage({id:"collector.module.text.agent.name"}),dataIndex:"agentName",valueType:"text",align:"center",width:240},{title:o.formatMessage({id:"common.table.columns.platform"}),dataIndex:"platform",valueType:"text",align:"center",hideInSearch:!0,width:200,render:function(i,n){return(0,W.BD)(n.platform)}},{title:o.formatMessage({id:"collector.module.text.registry.value"}),dataIndex:"registryValue",valueType:"text",align:"left",width:200},{title:o.formatMessage({id:"collector.module.text.registry.time"}),dataIndex:"registryTime",valueType:"dateTime",hideInSearch:!0,align:"left",width:200},{title:"Cron",dataIndex:"cron",hideInSearch:!0,align:"left",width:100},{title:o.formatMessage({id:"collector.module.text.registry.user"}),dataIndex:"username",hideInSearch:!0,align:"left",width:120},{title:o.formatMessage({id:"collector.module.text.registry.Information"}),dataIndex:"healthStatus",hideInSearch:!0,align:"left",width:220},{title:o.formatMessage({id:"collector.module.text.registry.status"}),dataIndex:"status",hideInSearch:!0,align:"left",width:120,render:function(i,n){return(0,t.jsx)(C.Z,{title:n.status==="valid"?o.formatMessage({id:"collector.module.text.status.health"}):n.status==="invalid"?o.formatMessage({id:"collector.module.text.status.offline"}):o.formatMessage({id:"collector.module.text.status.abnormal"}),children:(0,t.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:n.status==="valid"?"rgb(17, 133, 86)":n.status==="invalid"?"rgb(288, 43, 53)":"rgb(253, 100, 8)"}})})}},{title:o.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),dataIndex:"option",valueType:"option",align:"center",width:120,render:function(i,n){return(0,t.jsx)(_.Z,{title:o.formatMessage({id:"collector.module.text.interrupt.process"}),onConfirm:function(){return le(n.onceToken)},okText:o.formatMessage({id:"common.button.text.ok"}),cancelText:o.formatMessage({id:"common.button.text.cancel"}),children:(0,t.jsx)(z.ZP,{type:"link",danger:!0,children:o.formatMessage({id:"collector.module.text.interrupt.process"})})})}}],ie=function(){var d=y()(u()().mark(function i(){var n;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,h.getOnceToken)();case 2:n=l.sent,n.code===200&&(ne({token:n.content.token,expireTime:n.content.expireTime,username:n.content.username,script:n.content.script,tokenList:n.content.tokenList}),p(!0));case 4:case"end":return l.stop()}},i)}));return function(){return d.apply(this,arguments)}}();return(0,t.jsxs)(Q._z,{ghost:!0,title:!1,breadcrumbRender:!1,children:[(0,t.jsx)(X.Z,{headerTitle:(0,t.jsx)("div",{className:w.Z.customTitle,children:o.formatMessage({id:"collector.module.text.collector.inquiry"})}),actionRef:s,rowKey:"id",search:{span:6,defaultCollapsed:!1,collapseRender:!1,labelWidth:0},options:!1,request:function(){var d=y()(u()().mark(function i(n){var g,l,T,V,f,G,v,H;return u()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return g=n.agentName,l=n.registryValue,T=n.current,V=n.pageSize,f={agentName:g,registryValue:l,page:T,size:V},M.next=4,(0,h.queryAgentList)(f);case 4:return G=M.sent,v=G.content,H=G.code,M.abrupt("return",{data:(v==null?void 0:v.data)||[],total:(v==null?void 0:v.total)||0,success:H===200||!1});case 8:case"end":return M.stop()}},i)}));return function(i){return d.apply(this,arguments)}}(),columns:se,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1},toolBarRender:function(){return[(0,t.jsx)(z.ZP,{type:"primary",onClick:ie,children:o.formatMessage({id:"common.button.text.deploy"})},"getToken"),(0,t.jsx)(z.ZP,{href:"https://cloudrec.yuque.com/org-wiki-cloudrec-iew3sz/hocvhx/ztfuupzril8i28tl",target:"_blank",style:{border:"1px solid #457aff",color:"#457aff",padding:"4px 10px",backgroundColor:"transparent"},children:o.formatMessage({id:"collector.extend.text.config"})},"config")]}}),(0,t.jsx)(B,{visible:a,onClose:function(){return p(!1)},tokenInfo:te})]})},ee=q},53846:function(K,x){x.Z={customTitle:"customTitle___nzcxh",riskHigh:"riskHigh___GstO6",riskMedium:"riskMedium___F4JTb",riskLow:"riskLow___HJopw",imgProcess:"imgProcess___NGndv",imgResult:"imgResult___wKhiG",validTag:"validTag___TRSau",invalidTag:"invalidTag___opVlG",waitingTag:"waitingTag___JZpZT"}}}]);
