"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7759],{69055:function(w,f,e){e.d(f,{Z:function(){return U}});var k=e(22181),l=e(83622),P=e(87462),r=e(62435),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},c=b,M=e(84089),a=function(x,h){return r.createElement(M.Z,(0,P.Z)({},x,{ref:h,icon:c}))},g=r.forwardRef(a),R=g,d=e(45830),T={noPermissionContainer:"noPermissionContainer___mfh3D","ant-result":"ant-result___HwWPh","ant-result-icon":"ant-result-icon___kCRak",anticon:"anticon___dFq4q","ant-result-title":"ant-result-title___qzgxn","ant-result-subtitle":"ant-result-subtitle___wgaK1","ant-result-extra":"ant-result-extra___YuiiI","ant-btn":"ant-btn___SR44Y",dark:"dark___6IwTX",fadeInUp:"fadeInUp___lq2_S"},u=e(86074),E=function(x){var h=x.title,S=x.subTitle,t=x.showReturnButton,D=t===void 0?!0:t,B=x.onReturn,y=(0,d.useIntl)(),Z=function(){B?B():d.history===null||d.history===void 0||d.history.push("/")};return(0,u.jsx)("div",{className:T.noPermissionContainer,children:(0,u.jsx)(k.ZP,{icon:(0,u.jsx)(R,{}),status:"403",title:h||y.formatMessage({id:"common.message.text.no.permission.title"}),subTitle:S||y.formatMessage({id:"common.message.text.no.permission.subtitle"}),extra:D&&(0,u.jsx)(l.ZP,{type:"primary",onClick:Z,children:y.formatMessage({id:"common.button.text.return"})})})})},U=E},82043:function(w,f,e){var k=e(62435),l=e(45830),P=e(69055),r=e(86074),b=function(M){var a=M.children,g=M.accessKey,R=M.fallback,d=(0,l.useAccess)(),T=(0,l.useIntl)();if(!g)return(0,r.jsx)(r.Fragment,{children:a});var u=d[g];return u?(0,r.jsx)(r.Fragment,{children:a}):(0,r.jsx)(r.Fragment,{children:R||(0,r.jsx)(P.Z,{title:T.formatMessage({id:"common.message.text.no.permission.title"}),subTitle:T.formatMessage({id:"common.message.text.no.permission.subtitle"})})})};f.Z=b},24163:function(w,f,e){var k=e(97857),l=e.n(k),P=e(25593),r=e(83062),b=e(62435),c=e(86074),M=P.Z.Paragraph;f.Z=function(a){var g=a.text,R=a.width,d=a.maxWidth,T=a.rows,u=T===void 0?2:T,E=a.placement,U=E===void 0?"top":E,A=a.color,x=A===void 0?"rgba(0, 0, 0, 0.88)":A,h=a.link,S=h===void 0?!1:h,t=a.onClickCallBackFunc,D=a.style,B=D===void 0?{}:D,y=a.copyable,Z=y===void 0?!1:y;return(0,c.jsx)("div",{style:{maxWidth:d,width:R},children:(0,c.jsx)(r.Z,{title:(0,c.jsx)("div",{children:g}),placement:U,children:(0,c.jsx)(M,{ellipsis:{rows:u},style:l()({marginBottom:0,color:x,cursor:S?"pointer":""},B),onClick:t,copyable:Z,children:g})})})}},64959:function(w,f,e){e.r(f),e.d(f,{default:function(){return ne}});var k=e(15009),l=e.n(k),P=e(99289),r=e.n(P),b=e(5574),c=e.n(b),M=e(53846),a=e(82043),g=e(24163),R=e(45605),d=e(45830),T=e(17788),u=e(83062),E=e(2487),U=e(71230),A=e(15746),x=e(21987),h=e(62435),S={toolTipWrap:"toolTipWrap___RxSDA",tooltipIcon:"tooltipIcon___lORng"},t=e(86074),D=function(){var m=(0,d.useIntl)();return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:m.formatMessage({id:"collector.extend.text.token.tip1"})}),(0,t.jsxs)("div",{children:[m.formatMessage({id:"collector.extend.text.token.tip2"}),(0,t.jsx)("div",{children:m.formatMessage({id:"collector.extend.text.token.tip3"})}),(0,t.jsx)("div",{children:m.formatMessage({id:"collector.extend.text.token.tip4"})})]})]})},B=function(m){var G=m.visible,z=m.onClose,s=m.tokenInfo,W=(0,d.useIntl)();return(0,t.jsxs)(T.Z,{width:740,style:{top:120},title:W.formatMessage({id:"collector.extend.text.token.information"}),open:G,onCancel:z,footer:null,children:[(0,t.jsxs)("p",{children:["Token",(0,t.jsx)(u.Z,{overlayClassName:S.toolTipWrap,placement:"top",title:(0,t.jsx)(D,{}),children:(0,t.jsx)(R.Z,{className:S.tooltipIcon})}),":",s!=null&&s.token?(0,t.jsx)(x.Z,{copyable:!0,children:s.token}):"-"]}),(0,t.jsx)("p",{children:(0,t.jsx)(E.Z,{bordered:!0,dataSource:(s==null?void 0:s.tokenList)||[],renderItem:function(j){return(0,t.jsx)(E.Z.Item,{children:(0,t.jsxs)(U.Z,{gutter:[24,0],style:{width:"100%"},children:[(0,t.jsx)(A.Z,{span:4,children:(0,t.jsx)(g.Z,{text:(j==null?void 0:j.platformName)||"-",rows:1,placement:"topLeft"})}),(0,t.jsx)(A.Z,{span:20,children:(0,t.jsx)(g.Z,{text:(j==null?void 0:j.script)||"-",rows:1,placement:"topLeft",copyable:!0})})]})})}})}),(0,t.jsxs)("p",{children:[W.formatMessage({id:"collector.extend.text.expiration.date"}),"\xA0:\xA0",(s==null?void 0:s.expireTime)||"-"]}),(0,t.jsxs)("p",{children:[W.formatMessage({id:"rule.input.text.rule.group.creator"}),"\xA0:\xA0",(s==null?void 0:s.username)||"-"]})]})},y=B,Z=e(97470),H=e(29448),Y=e(39380),Q=e(90498),X=e(68872),q=e(86738),N=e(83622),ee=function(){var m=(0,h.useRef)(),G=(0,h.useState)(!1),z=c()(G,2),s=z[0],W=z[1],_=(0,h.useState)({token:"",expireTime:"",username:"",script:"",tokenList:[]}),j=c()(_,2),oe=j[0],ae=j[1],re=X.ZP.useMessage(),se=c()(re,1),le=se[0],o=(0,d.useIntl)(),ie=function(){var p=r()(l()().mark(function v(n){var C,i,L;return l()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,Z.exitAgent)({onceToken:n});case 2:C=I.sent,(C.code===200||C.msg==="success")&&(le.success(o.formatMessage({id:"common.message.text.exit.success"})),(i=m.current)===null||i===void 0||(L=i.reloadAndRest)===null||L===void 0||L.call(i));case 4:case"end":return I.stop()}},v)}));return function(n){return p.apply(this,arguments)}}(),de=[{title:o.formatMessage({id:"collector.module.text.agent.name"}),dataIndex:"agentName",valueType:"text",align:"center",width:240},{title:o.formatMessage({id:"common.table.columns.platform"}),dataIndex:"platform",valueType:"text",align:"center",hideInSearch:!0,width:200,render:function(v,n){return(0,H.BD)(n.platform)}},{title:o.formatMessage({id:"collector.module.text.registry.value"}),dataIndex:"registryValue",valueType:"text",align:"left",width:200},{title:o.formatMessage({id:"collector.module.text.registry.time"}),dataIndex:"registryTime",valueType:"dateTime",hideInSearch:!0,align:"left",width:200},{title:"Cron",dataIndex:"cron",hideInSearch:!0,align:"left",width:100},{title:o.formatMessage({id:"collector.module.text.registry.user"}),dataIndex:"username",hideInSearch:!0,align:"left",width:120},{title:o.formatMessage({id:"collector.module.text.registry.Information"}),dataIndex:"healthStatus",hideInSearch:!0,align:"left",width:220},{title:o.formatMessage({id:"collector.module.text.registry.status"}),dataIndex:"status",hideInSearch:!0,align:"left",width:120,render:function(v,n){return(0,t.jsx)(u.Z,{title:n.status==="valid"?o.formatMessage({id:"collector.module.text.status.health"}):n.status==="invalid"?o.formatMessage({id:"collector.module.text.status.offline"}):o.formatMessage({id:"collector.module.text.status.abnormal"}),children:(0,t.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:n.status==="valid"?"rgb(17, 133, 86)":n.status==="invalid"?"rgb(288, 43, 53)":"rgb(253, 100, 8)"}})})}},{title:o.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),dataIndex:"option",valueType:"option",align:"center",width:120,render:function(v,n){return(0,t.jsx)(q.Z,{title:o.formatMessage({id:"collector.module.text.interrupt.process"}),onConfirm:function(){return ie(n.onceToken)},okText:o.formatMessage({id:"common.button.text.ok"}),cancelText:o.formatMessage({id:"common.button.text.cancel"}),children:(0,t.jsx)(N.ZP,{type:"link",danger:!0,children:o.formatMessage({id:"collector.module.text.interrupt.process"})})})}}],ce=function(){var p=r()(l()().mark(function v(){var n;return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,Z.getOnceToken)();case 2:n=i.sent,n.code===200&&(ae({token:n.content.token,expireTime:n.content.expireTime,username:n.content.username,script:n.content.script,tokenList:n.content.tokenList}),W(!0));case 4:case"end":return i.stop()}},v)}));return function(){return p.apply(this,arguments)}}();return(0,t.jsxs)(Y._z,{ghost:!0,title:!1,breadcrumbRender:!1,children:[(0,t.jsx)(Q.Z,{headerTitle:(0,t.jsx)("div",{className:M.Z.customTitle,children:o.formatMessage({id:"collector.module.text.collector.inquiry"})}),actionRef:m,rowKey:"id",search:{span:6,defaultCollapsed:!1,collapseRender:!1,labelWidth:0},options:!1,request:function(){var p=r()(l()().mark(function v(n){var C,i,L,V,I,F,O,J;return l()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return C=n.agentName,i=n.registryValue,L=n.current,V=n.pageSize,I={agentName:C,registryValue:i,page:L,size:V},K.next=4,(0,Z.queryAgentList)(I);case 4:return F=K.sent,O=F.content,J=F.code,K.abrupt("return",{data:(O==null?void 0:O.data)||[],total:(O==null?void 0:O.total)||0,success:J===200||!1});case 8:case"end":return K.stop()}},v)}));return function(v){return p.apply(this,arguments)}}(),columns:de,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1},toolBarRender:function(){return[(0,t.jsx)(N.ZP,{type:"primary",onClick:ce,children:o.formatMessage({id:"common.button.text.deploy"})},"getToken"),(0,t.jsx)(N.ZP,{href:"https://cloudrec.yuque.com/org-wiki-cloudrec-iew3sz/hocvhx/ztfuupzril8i28tl",target:"_blank",style:{border:"1px solid #457aff",color:"#457aff",padding:"4px 10px",backgroundColor:"transparent"},children:o.formatMessage({id:"collector.extend.text.config"})},"config")]}}),(0,t.jsx)(y,{visible:s,onClose:function(){return W(!1)},tokenInfo:oe})]})},te=function(){return(0,t.jsx)(a.Z,{accessKey:"isPlatformAdmin",children:(0,t.jsx)(ee,{})})},ne=te},53846:function(w,f){f.Z={customTitle:"customTitle___nzcxh",riskHigh:"riskHigh___GstO6",riskMedium:"riskMedium___F4JTb",riskLow:"riskLow___HJopw",imgProcess:"imgProcess___NGndv",imgResult:"imgResult___wKhiG",validTag:"validTag___TRSau",invalidTag:"invalidTag___opVlG",waitingTag:"waitingTag___JZpZT"}}}]);
