"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7759],{69055:function(z,g,e){e.d(g,{Z:function(){return w}});var O=e(22181),l=e(83622),P=e(87462),s=e(62435),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},u=D,M=e(84089),a=function(x,h){return s.createElement(M.Z,(0,P.Z)({},x,{ref:h,icon:u}))},f=s.forwardRef(a),E=f,d=e(45830),T={noPermissionContainer:"noPermissionContainer___mfh3D","ant-result":"ant-result___HwWPh","ant-result-icon":"ant-result-icon___kCRak",anticon:"anticon___dFq4q","ant-result-title":"ant-result-title___qzgxn","ant-result-subtitle":"ant-result-subtitle___wgaK1","ant-result-extra":"ant-result-extra___YuiiI","ant-btn":"ant-btn___SR44Y",dark:"dark___6IwTX",fadeInUp:"fadeInUp___lq2_S"},c=e(86074),R=function(x){var h=x.title,b=x.subTitle,t=x.showReturnButton,S=t===void 0?!0:t,B=x.onReturn,C=(0,d.useIntl)(),Z=function(){B?B():d.history===null||d.history===void 0||d.history.push("/")};return(0,c.jsx)("div",{className:T.noPermissionContainer,children:(0,c.jsx)(O.ZP,{icon:(0,c.jsx)(E,{}),status:"403",title:h||C.formatMessage({id:"common.message.text.no.permission.title"}),subTitle:b||C.formatMessage({id:"common.message.text.no.permission.subtitle"}),extra:S&&(0,c.jsx)(l.ZP,{type:"primary",onClick:Z,children:C.formatMessage({id:"common.button.text.return"})})})})},w=R},82043:function(z,g,e){var O=e(62435),l=e(45830),P=e(69055),s=e(86074),D=function(M){var a=M.children,f=M.accessKey,E=M.fallback,d=(0,l.useAccess)(),T=(0,l.useIntl)();if(!f)return(0,s.jsx)(s.Fragment,{children:a});var c=d[f];return c?(0,s.jsx)(s.Fragment,{children:a}):(0,s.jsx)(s.Fragment,{children:E||(0,s.jsx)(P.Z,{title:T.formatMessage({id:"common.message.text.no.permission.title"}),subTitle:T.formatMessage({id:"common.message.text.no.permission.subtitle"})})})};g.Z=D},24163:function(z,g,e){var O=e(97857),l=e.n(O),P=e(25593),s=e(83062),D=e(62435),u=e(86074),M=P.Z.Paragraph;g.Z=function(a){var f=a.text,E=a.width,d=a.maxWidth,T=a.rows,c=T===void 0?2:T,R=a.placement,w=R===void 0?"top":R,A=a.color,x=A===void 0?"rgba(0, 0, 0, 0.88)":A,h=a.link,b=h===void 0?!1:h,t=a.onClickCallBackFunc,S=a.style,B=S===void 0?{}:S,C=a.copyable,Z=C===void 0?!1:C;return(0,u.jsx)("div",{style:{maxWidth:d,width:E},children:(0,u.jsx)(s.Z,{title:(0,u.jsx)("div",{children:f}),placement:w,children:(0,u.jsx)(M,{ellipsis:{rows:c},style:l()({marginBottom:0,color:x,cursor:b?"pointer":""},B),onClick:t,copyable:Z,children:f})})})}},64959:function(z,g,e){e.r(g),e.d(g,{default:function(){return ne}});var O=e(15009),l=e.n(O),P=e(99289),s=e.n(P),D=e(5574),u=e.n(D),M=e(53846),a=e(82043),f=e(24163),E=e(45605),d=e(45830),T=e(17788),c=e(83062),R=e(2487),w=e(71230),A=e(15746),x=e(21987),h=e(62435),b={toolTipWrap:"toolTipWrap___RxSDA",tooltipIcon:"tooltipIcon___lORng"},t=e(86074),S=function(){var m=(0,d.useIntl)();return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:m.formatMessage({id:"collector.extend.text.token.tip1"})}),(0,t.jsxs)("div",{children:[m.formatMessage({id:"collector.extend.text.token.tip2"}),(0,t.jsx)("div",{children:m.formatMessage({id:"collector.extend.text.token.tip3"})}),(0,t.jsx)("div",{children:m.formatMessage({id:"collector.extend.text.token.tip4"})})]})]})},B=function(m){var V=m.visible,N=m.onClose,r=m.tokenInfo,W=(0,d.useIntl)();return(0,t.jsxs)(T.Z,{width:740,style:{top:120},title:W.formatMessage({id:"collector.extend.text.token.information"}),open:V,onCancel:N,footer:null,children:[(0,t.jsxs)("p",{children:["Token",(0,t.jsx)(c.Z,{overlayClassName:b.toolTipWrap,placement:"top",title:(0,t.jsx)(S,{}),children:(0,t.jsx)(E.Z,{className:b.tooltipIcon})}),":",r!=null&&r.token?(0,t.jsx)(x.Z,{copyable:!0,children:r.token}):"-"]}),(0,t.jsx)("p",{children:(0,t.jsx)(R.Z,{bordered:!0,dataSource:(r==null?void 0:r.tokenList)||[],renderItem:function(y){return(0,t.jsx)(R.Z.Item,{children:(0,t.jsxs)(w.Z,{gutter:[24,0],style:{width:"100%"},children:[(0,t.jsx)(A.Z,{span:4,children:(0,t.jsx)(f.Z,{text:(y==null?void 0:y.platformName)||"-",rows:1,placement:"topLeft"})}),(0,t.jsx)(A.Z,{span:20,children:(0,t.jsx)(f.Z,{text:(y==null?void 0:y.script)||"-",rows:1,placement:"topLeft",copyable:!0})})]})})}})}),(0,t.jsxs)("p",{children:[W.formatMessage({id:"collector.extend.text.expiration.date"}),"\xA0:\xA0",(r==null?void 0:r.expireTime)||"-"]}),(0,t.jsxs)("p",{children:[W.formatMessage({id:"rule.input.text.rule.group.creator"}),"\xA0:\xA0",(r==null?void 0:r.username)||"-"]})]})},C=B,Z=e(97470),_=e(29448),Y=e(39380),Q=e(90498),X=e(68872),q=e(86738),$=e(83622),ee=function(){var m=(0,h.useRef)(),V=(0,h.useState)(!1),N=u()(V,2),r=N[0],W=N[1],H=(0,h.useState)({token:"",expireTime:"",username:"",script:"",tokenList:[]}),y=u()(H,2),oe=y[0],ae=y[1],se=X.ZP.useMessage(),re=u()(se,1),le=re[0],o=(0,d.useIntl)(),ie=function(){var p=s()(l()().mark(function v(n){var j,i,L;return l()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,Z.exitAgent)({onceToken:n});case 2:j=I.sent,(j.code===200||j.msg==="success")&&(le.success(o.formatMessage({id:"common.message.text.exit.success"})),(i=m.current)===null||i===void 0||(L=i.reloadAndRest)===null||L===void 0||L.call(i));case 4:case"end":return I.stop()}},v)}));return function(n){return p.apply(this,arguments)}}(),de=[{title:o.formatMessage({id:"collector.module.text.agent.name"}),dataIndex:"agentName",valueType:"text",align:"center",width:240},{title:o.formatMessage({id:"common.table.columns.platform"}),dataIndex:"platform",valueType:"text",align:"center",hideInSearch:!0,width:200,render:function(v,n){return(0,_.BD)(n.platform)}},{title:o.formatMessage({id:"collector.module.text.registry.value"}),dataIndex:"registryValue",valueType:"text",align:"left",width:200},{title:o.formatMessage({id:"collector.module.text.registry.time"}),dataIndex:"registryTime",valueType:"dateTime",hideInSearch:!0,align:"left",width:200},{title:"Cron",dataIndex:"cron",hideInSearch:!0,align:"left",width:100},{title:o.formatMessage({id:"collector.module.text.registry.user"}),dataIndex:"username",hideInSearch:!0,align:"left",width:120},{title:o.formatMessage({id:"collector.module.text.registry.Information"}),dataIndex:"healthStatus",hideInSearch:!0,align:"left",width:220},{title:o.formatMessage({id:"collector.module.text.registry.status"}),dataIndex:"status",hideInSearch:!0,align:"left",width:120,render:function(v,n){return(0,t.jsx)(c.Z,{title:n.status==="valid"?o.formatMessage({id:"collector.module.text.status.health"}):n.status==="invalid"?o.formatMessage({id:"collector.module.text.status.offline"}):o.formatMessage({id:"collector.module.text.status.abnormal"}),children:(0,t.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:n.status==="valid"?"rgb(17, 133, 86)":n.status==="invalid"?"rgb(288, 43, 53)":"rgb(253, 100, 8)"}})})}},{title:o.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),dataIndex:"option",valueType:"option",align:"center",width:120,render:function(v,n){return(0,t.jsx)(q.Z,{title:o.formatMessage({id:"collector.module.text.interrupt.process"}),onConfirm:function(){return ie(n.onceToken)},okText:o.formatMessage({id:"common.button.text.ok"}),cancelText:o.formatMessage({id:"common.button.text.cancel"}),children:(0,t.jsx)($.ZP,{type:"link",danger:!0,children:o.formatMessage({id:"collector.module.text.interrupt.process"})})})}}],ue=function(){var p=s()(l()().mark(function v(){var n;return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,Z.getOnceToken)();case 2:n=i.sent,n.code===200&&(ae({token:n.content.token,expireTime:n.content.expireTime,username:n.content.username,script:n.content.script,tokenList:n.content.tokenList}),W(!0));case 4:case"end":return i.stop()}},v)}));return function(){return p.apply(this,arguments)}}();return(0,t.jsxs)(Y._z,{ghost:!0,title:!1,breadcrumbRender:!1,children:[(0,t.jsx)(Q.Z,{headerTitle:(0,t.jsx)("div",{className:M.Z.customTitle,children:o.formatMessage({id:"collector.module.text.collector.inquiry"})}),actionRef:m,rowKey:"id",search:{span:6,defaultCollapsed:!1,collapseRender:!1,labelWidth:0},options:!1,request:function(){var p=s()(l()().mark(function v(n){var j,i,L,G,I,F,k,J;return l()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return j=n.agentName,i=n.registryValue,L=n.current,G=n.pageSize,I={agentName:j,registryValue:i,page:L,size:G},K.next=4,(0,Z.queryAgentList)(I);case 4:return F=K.sent,k=F.content,J=F.code,K.abrupt("return",{data:(k==null?void 0:k.data)||[],total:(k==null?void 0:k.total)||0,success:J===200||!1});case 8:case"end":return K.stop()}},v)}));return function(v){return p.apply(this,arguments)}}(),columns:de,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1},toolBarRender:function(){return[(0,t.jsx)($.ZP,{type:"primary",onClick:ue,children:o.formatMessage({id:"common.button.text.deploy"})},"getToken"),(0,t.jsx)($.ZP,{href:"https://cloudrec.yuque.com/org-wiki-cloudrec-iew3sz/hocvhx/ztfuupzril8i28tl",target:"_blank",style:{border:"1px solid #457aff",color:"#457aff",padding:"4px 10px",backgroundColor:"transparent"},children:o.formatMessage({id:"collector.extend.text.config"})},"config")]}}),(0,t.jsx)(C,{visible:r,onClose:function(){return W(!1)},tokenInfo:oe})]})},te=function(){return(0,t.jsx)(a.Z,{accessKey:"isPlatformAdmin",children:(0,t.jsx)(ee,{})})},ne=te},53846:function(z,g){g.Z={customTitle:"customTitle___nzcxh",riskHigh:"riskHigh___GstO6",riskMedium:"riskMedium___F4JTb",riskLow:"riskLow___HJopw",imgProcess:"imgProcess___NGndv",imgResult:"imgResult___wKhiG",validTag:"validTag___TRSau",invalidTag:"invalidTag___opVlG",waitingTag:"waitingTag___JZpZT"}}}]);
