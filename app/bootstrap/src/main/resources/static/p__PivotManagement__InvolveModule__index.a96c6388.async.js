"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4427],{64317:function(ye,Q,t){var B=t(1413),x=t(91),oe=t(22270),M=t(62435),se=t(66758),O=t(10354),re=t(86074),h=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],ae=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],de=function(e,_){var q=e.fieldProps,N=e.children,ie=e.params,ee=e.proFieldProps,H=e.mode,K=e.valueEnum,te=e.request,le=e.showSearch,ne=e.options,$=(0,x.Z)(e,h),L=(0,M.useContext)(se.Z);return(0,re.jsx)(O.Z,(0,B.Z)((0,B.Z)({valueEnum:(0,oe.h)(K),request:te,params:ie,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,B.Z)({options:ne,mode:H,showSearch:le,getPopupContainer:L.getPopupContainer},q),ref:_,proFieldProps:ee},$),{},{children:N}))},ue=M.forwardRef(function(a,e){var _=a.fieldProps,q=a.children,N=a.params,ie=a.proFieldProps,ee=a.mode,H=a.valueEnum,K=a.request,te=a.options,le=(0,x.Z)(a,ae),ne=(0,B.Z)({options:te,mode:ee||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},_),$=(0,M.useContext)(se.Z);return(0,re.jsx)(O.Z,(0,B.Z)((0,B.Z)({valueEnum:(0,oe.h)(H),request:K,params:N,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,B.Z)({getPopupContainer:$.getPopupContainer},ne),ref:e,proFieldProps:ie},le),{},{children:q}))}),X=M.forwardRef(de),ce=ue,Y=X;Y.SearchSelect=ce,Y.displayName="ProFormComponent",Q.Z=Y},24163:function(ye,Q,t){var B=t(97857),x=t.n(B),oe=t(25593),M=t(83062),se=t(62435),O=t(86074),re=oe.Z.Paragraph;Q.Z=function(h){var ae=h.text,de=h.width,ue=h.maxWidth,X=h.rows,ce=X===void 0?2:X,Y=h.placement,a=Y===void 0?"top":Y,e=h.color,_=e===void 0?"rgba(0, 0, 0, 0.88)":e,q=h.link,N=q===void 0?!1:q,ie=h.onClickCallBackFunc,ee=h.style,H=ee===void 0?{}:ee,K=h.copyable,te=K===void 0?!1:K;return(0,O.jsx)("div",{style:{maxWidth:ue,width:de},children:(0,O.jsx)(M.Z,{title:(0,O.jsx)("div",{children:ae}),placement:a,children:(0,O.jsx)(re,{ellipsis:{rows:ce},style:x()({marginBottom:0,color:_,cursor:N?"pointer":""},H),onClick:ie,copyable:te,children:ae})})})}},37491:function(ye,Q,t){t.r(Q),t.d(Q,{default:function(){return it}});var B=t(97857),x=t.n(B),oe=t(15009),M=t.n(oe),se=t(99289),O=t.n(se),re=t(5574),h=t.n(re),ae=t(53846),de=t(24163),ue=t(13769),X=t.n(ue),ce=t(19632),Y=t.n(ce),a=t(92016),e=t(86074),_=[{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.title.timing.notice"}),value:"timing",desc:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.title.timing.notice.desc"})},{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.title.realtime.notice"}),value:"realtime",desc:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.title.realtime.notice.desc"})}],q=[{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.text.dingGroup"}),value:"dingGroup"},{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.text.wechat"}),value:"wechat"}],N=[{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.text.dingGroup"}),value:"dingGroup"},{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.text.interfaceCallback"}),value:"interfaceCallback"},{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.text.wechat"}),value:"wechat"}],ie=[{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.text.day.monday"}),value:"1"},{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.text.day.tuesday"}),value:"2"},{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.text.day.wednesday"}),value:"3"},{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.text.day.thursday"}),value:"4"},{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.text.day.friday"}),value:"5"},{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.text.day.saturday"}),value:"6"},{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.text.day.sunday"}),value:"7"},{label:(0,e.jsx)(a.FormattedMessage,{id:"involve.extend.text.every.day"}),value:"all"}],ee=[{label:"10: 00",value:"10"},{label:"11: 00",value:"11"},{label:"12: 00",value:"12"},{label:"13: 00",value:"13"},{label:"14: 00",value:"14"},{label:"15: 00",value:"15"},{label:"16: 00",value:"16"},{label:"17: 00",value:"17"},{label:"18: 00",value:"18"},{label:"19: 00",value:"19"},{label:"20: 00",value:"20"},{label:"21: 00",value:"21"}],H=t(37476),K=t(23323),te=t(84567),le=t(71230),ne=t(15746),$=t(96486),L=t(62435),we=function(P){var U=K.Z.useForm(),R=h()(U,1),Z=R[0],m=P.noticeFormVisible,T=P.setNoticeFormVisible,u=P.formRef,w=(0,a.useIntl)(),D=function(){var A=O()(M()().mark(function i(c){var j,l,v,n,I;return M()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(j=u.current.getFieldValue("actionList"),l=c==null?void 0:c.actionList,!(0,$.isEmpty)(l)){f.next=4;break}return f.abrupt("return",T(!1));case 4:v=l==null?void 0:l.map(function(S,V){return{idx:V+1,actionType:S}}),(0,$.isEmpty)(j)?u.current.setFieldValue("actionList",v):(I=(n=[].concat(Y()(j),Y()(v)))===null||n===void 0?void 0:n.map(function(S,V){return x()(x()({},S),{},{idx:V+1})}),u.current.setFieldValue("actionList",I)),T(!1);case 7:case"end":return f.stop()}},i)}));return function(c){return A.apply(this,arguments)}}(),G=function(){Z.resetFields()},z=function(){T(!1),G()};return(0,e.jsx)(H.Y,{title:w.formatMessage({id:"involve.extend.title.notification.configuration"}),width:540,labelCol:{span:6},wrapperCol:{span:18},form:Z,modalProps:{destroyOnClose:!0,onCancel:function(){return z()},styles:{body:{paddingTop:12}}},layout:"horizontal",open:m,onFinish:D,children:(0,e.jsx)(K.Z.Item,{name:"actionList",children:(0,e.jsx)(te.Z.Group,{style:{width:"100%"},children:(0,e.jsx)(le.Z,{children:_.map(function(A){return(0,e.jsxs)(ne.Z,{span:24,children:[(0,e.jsx)(te.Z,{value:A.value,children:A.label}),(0,e.jsxs)("p",{style:{fontSize:12,marginLeft:20,color:"#C0C0C0"},children:["(",A.desc,")"]})]},A.value)})})})})})},De=we,xe=t(64317),Ce=t(97462),ge=t(90672),W=t(83622),Ve=function(P){var U=K.Z.useForm(),R=h()(U,1),Z=R[0],m=(0,a.useIntl)(),T=P.realtimeFormVisible,u=P.setRealtimeFormVisible,w=P.formRef,D=P.notificationInfo,G=function(){var i=O()(M()().mark(function c(j){var l,v,n;return M()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:l=w.current.getFieldValue("actionList"),v=x()(x()({},D),j),n=l==null?void 0:l.map(function(f){return f.idx===D.idx?v:f}),w.current.setFieldValue("actionList",n),u(!1);case 5:case"end":return C.stop()}},c)}));return function(j){return i.apply(this,arguments)}}(),z=function(){Z.resetFields()},A=function(){u(!1)};return(0,L.useEffect)(function(){T&&!(0,$.isEmpty)(D)?Z.setFieldsValue(x()({},D)):T||z()},[T]),(0,e.jsxs)(H.Y,{title:m.formatMessage({id:"involve.extend.title.real.time.notification"}),width:560,form:Z,modalProps:{destroyOnClose:!0,onCancel:function(){return A()}},layout:"horizontal",open:T,onFinish:G,children:[(0,e.jsx)(xe.Z,{label:m.formatMessage({id:"involve.extend.title.subscription.type"}),name:"action",options:N,rules:[{required:!0}]}),(0,e.jsx)(Ce.Z,{name:["action"],children:function(c){var j,l=c.action;return l===((j=N[1])===null||j===void 0?void 0:j.value)?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(ge.Z,{label:m.formatMessage({id:"involve.extend.title.group.chat.name"}),name:"name",rules:[{required:!0}]})}}),(0,e.jsx)(Ce.Z,{name:["action"],children:function(c){var j,l,v=c.action;return(0,e.jsx)(ge.Z,{label:v===((j=N[1])===null||j===void 0?void 0:j.value)?(0,e.jsxs)("div",{style:{position:"relative"},children:[m.formatMessage({id:"involve.extend.title.callback.url"}),(0,e.jsx)(W.ZP,{type:"link",size:"small",style:{padding:0,position:"absolute",left:0,top:20,fontSize:12},href:"https://cloudrec.yuque.com/org-wiki-cloudrec-iew3sz/hocvhx/rqvy5gapmz43g29p",target:"_blank",children:m.formatMessage({id:"involve.extend.title.documentation"})})]}):(0,e.jsxs)("div",{style:{position:"relative"},children:[m.formatMessage({id:"involve.extend.title.to.be.notified.group"}),(0,e.jsx)(W.ZP,{type:"link",size:"small",style:{padding:0,position:"absolute",left:0,top:20,fontSize:12},href:"https://cloudrec.yuque.com/org-wiki-cloudrec-iew3sz/hocvhx/rqvy5gapmz43g29p",target:"_blank",children:m.formatMessage({id:"involve.extend.title.documentation"})})]}),name:"url",rules:[{required:!0,message:v===((l=N[1])===null||l===void 0?void 0:l.value)?m.formatMessage({id:"involve.input.text.callback.url.tip"}):m.formatMessage({id:"involve.input.text.notified.group.tip"})}]})}})]})},ke=Ve,Oe=function(P){var U=K.Z.useForm(),R=h()(U,1),Z=R[0],m=(0,a.useIntl)(),T=P.timingFormVisible,u=P.setTimingFormVisible,w=P.formRef,D=P.notificationInfo,G=function(){var i=O()(M()().mark(function c(j){var l,v,n;return M()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:l=w.current.getFieldValue("actionList"),v=x()(x()({},D),j),n=l==null?void 0:l.map(function(f){return f.idx===D.idx?v:f}),w.current.setFieldValue("actionList",n),u(!1);case 5:case"end":return C.stop()}},c)}));return function(j){return i.apply(this,arguments)}}(),z=function(){Z.resetFields()},A=function(){u(!1)};return(0,L.useEffect)(function(){T&&!(0,$.isEmpty)(D)?Z.setFieldsValue(x()({},D)):T||z()},[T]),(0,e.jsxs)(H.Y,{title:m.formatMessage({id:"involve.extend.title.scheduled.notification"}),width:560,form:Z,modalProps:{destroyOnClose:!0,onCancel:function(){return A()}},layout:"horizontal",open:T,onFinish:G,children:[(0,e.jsx)(xe.Z,{label:m.formatMessage({id:"involve.extend.title.subscription.type"}),name:"action",options:q,rules:[{required:!0}]}),(0,e.jsx)(ge.Z,{label:m.formatMessage({id:"involve.extend.title.group.chat.name"}),name:"name",rules:[{required:!0}]}),(0,e.jsx)(ge.Z,{label:(0,e.jsxs)("div",{style:{position:"relative"},children:[m.formatMessage({id:"involve.extend.title.to.be.notified.group"}),(0,e.jsx)(W.ZP,{type:"link",size:"small",style:{padding:0,position:"absolute",left:0,top:20,fontSize:12},href:"https://cloudrec.yuque.com/org-wiki-cloudrec-iew3sz/hocvhx/rqvy5gapmz43g29p",target:"_blank",children:m.formatMessage({id:"involve.extend.title.documentation"})})]}),name:"url",rules:[{required:!0}]}),(0,e.jsxs)(le.Z,{children:[(0,e.jsx)(ne.Z,{span:10,children:(0,e.jsx)(xe.Z,{label:m.formatMessage({id:"involve.extend.title.notification.time"}),name:"period",options:ie,rules:[{required:!0}]})}),(0,e.jsx)(ne.Z,{span:14,children:(0,e.jsx)(xe.Z,{label:"",name:"timeList",options:ee,rules:[{required:!0}],fieldProps:{mode:"tags"}})})]})]})},$e=Oe,ve=t(91910),ze=t(29448),Be=t(24969),Ke=t(97269),Fe=t(5966),Ne=t(93410),be=t(50727),Me=t(68872),je=t(86738),We=t(85265),Ue=t(57381),Ge=t(86250),Ye=["idx"],He=["idx"],Je=["id"],Qe=function(P){var U=(0,a.useModel)("involve"),R=U.subConfigList,Z=P.involveDrawerVisible,m=P.setInvolveDrawerVisible,T=P.involveDrawerInfo,u=P.tableActionRef,w=T.id,D=Me.ZP.useMessage(),G=h()(D,2),z=G[0],A=G[1],i=(0,a.useIntl)(),c=(0,L.useRef)(),j=(0,L.useRef)(),l=(0,L.useState)([]),v=h()(l,2),n=v[0],I=v[1],C=(0,L.useRef)(),f=(0,L.useRef)(),S=(0,L.useState)(!1),V=h()(S,2),k=V[0],me=V[1],Re=(0,L.useState)(!1),J=h()(Re,2),nt=J[0],Te=J[1],ot=(0,L.useState)(!1),Ie=h()(ot,2),rt=Ie[0],Ee=Ie[1],at=(0,L.useState)(!1),Le=h()(at,2),lt=Le[0],Se=Le[1],he=(0,L.useRef)({}),st=function(){var r;(r=c.current)===null||r===void 0||r.resetFields()},Ze=function(){m(!1)},dt=function(){Te(!0)},ut=function(r){var o=(0,$.cloneDeep)(r),s=o.ruleConfigList,d=o.actionList;if(Array.isArray(s)&&!(0,$.isEmpty)(s)){var F=s.map(function(y,E){var p=y.idx,fe=X()(y,Ye);return x()(x()({},fe),{},{id:E+1})});o.ruleConfigList=F}if(Array.isArray(d)&&!(0,$.isEmpty)(d)){var b=d.map(function(y){var E=y.idx,p=X()(y,He);return x()({},p)});o.actionList=b}return o},ct=function(r){var o=(0,$.cloneDeep)(r),s=o.ruleConfig,d=o.actionList,F=[];if(Array.isArray(s)&&!(0,$.isEmpty)(s)){var b=s.map(function(E){var p=E.id,fe=X()(E,Je);return F.push(p),x()(x()({},fe),{},{idx:p})});o.ruleConfigList=b}if(o.editableKeyList=F,Array.isArray(d)&&!(0,$.isEmpty)(d)){var y=d.map(function(E,p){return x()(x()({},E),{},{idx:p+1})});o.actionList=y}return o},vt=function(){var g=O()(M()().mark(function r(o){var s,d,F,b;return M()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return me(!0),s=ut(o),w&&(s.id=w),me(!1),E.next=6,(0,ve.saveSubscriptionConfig)(s);case 6:d=E.sent,d.code===200&&d.msg==="success"&&(w?z.success(i.formatMessage({id:"common.message.text.edit.success"})):z.success(i.formatMessage({id:"common.message.text.add.success"})),m(!1),u==null||(F=u.current)===null||F===void 0||(b=F.reloadAndRest)===null||b===void 0||b.call(F));case 8:case"end":return E.stop()}},r)}));return function(o){return g.apply(this,arguments)}}(),Ae=(0,a.useRequest)(function(g){return(0,ve.querySubscriptionDetailById)({id:g})},{manual:!0,formatResult:function(r){var o=r.content;return ct(o)||{}},onSuccess:function(r){var o,s=r.actionList,d=r.condition,F=r.name,b=r.ruleConfigList,y=r.editableKeyList;(o=c.current)===null||o===void 0||o.setFieldsValue({actionList:s,condition:d,name:F,ruleConfigList:b}),I(y)}}),mt=Ae.loading,ft=Ae.run;(0,L.useEffect)(function(){Z&&w?ft(w):Z||st()},[Z]);var xt=function(r){r.actionType==="timing"?(he.current=x()({},r),Ee(!0)):r.actionType==="realtime"&&(he.current=x()({},r),Se(!0))},gt=[{title:i.formatMessage({id:"involve.extend.title.serial.number"}),dataIndex:"id",editable:!1,width:100,align:"center",render:function(r,o,s){return s+1}},{title:i.formatMessage({id:"rule.module.text.variable.name"}),dataIndex:"key",formItemProps:{rules:[{required:!0}]},valueType:"select",fieldProps:function(r,o){var s=o.rowIndex,d=(R==null?void 0:R.map(function(F){return{label:F.keyName,value:F.key}}))||[];return{options:d,allowClear:!1,onSelect:function(){var b,y;(b=C.current)===null||b===void 0||(y=b.setRowData)===null||y===void 0||y.call(b,s,{operator:void 0,value:void 0})}}}},{title:i.formatMessage({id:"involve.extend.title.condition"}),dataIndex:"operator",formItemProps:{rules:[{required:!0}]},valueType:"select",fieldProps:function(r,o){var s,d,F=o.rowIndex,b=(s=C.current)===null||s===void 0||(d=s.getRowData)===null||d===void 0||(d=d.call(s,F))===null||d===void 0?void 0:d.key;if(!b)return[];var y=R==null?void 0:R.find(function(p){return p.key===b}),E=y==null?void 0:y.operatorList.map(function(p){return{label:p,value:p}});return{options:E||[]}}},{title:i.formatMessage({id:"rule.module.text.variable.value"}),dataIndex:"value",formItemProps:{rules:[{required:!0}]},valueType:"select",fieldProps:function(r,o){var s,d,F=o.rowIndex,b=(s=C.current)===null||s===void 0||(d=s.getRowData)===null||d===void 0||(d=d.call(s,F))===null||d===void 0?void 0:d.key;if(!b)return[];var y=R==null?void 0:R.find(function(p){return p.key===b}),E=y==null?void 0:y.value.map(function(p){return{label:p==null?void 0:p.valueName,value:p==null?void 0:p.value}});return{showSearch:!0,options:E||[]}}},{title:i.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),valueType:"option",width:140,render:function(){return[]}}],pt=[{title:i.formatMessage({id:"involve.extend.title.serial.number"}),dataIndex:"id",editable:!1,width:100,align:"center",render:function(r,o,s){return s+1}},{title:i.formatMessage({id:"involve.extend.title.action.title"}),dataIndex:"actionType",editable:!1,align:"center",valueType:"select",valueEnum:(0,ze.W_)(_)},{title:i.formatMessage({id:"involve.extend.title.action.content"}),dataIndex:"action",editable:!1,align:"center",render:function(r,o){return(0,e.jsx)(W.ZP,{type:"link",size:"small",style:{fontSize:12},onClick:function(){return xt(o)},children:o!=null&&o.action?i.formatMessage({id:"involve.button.text.click.edit"}):i.formatMessage({id:"involve.button.text.click.setting"})})}},{title:i.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),valueType:"option",width:200,render:function(r,o){return[(0,e.jsx)(je.Z,{title:i.formatMessage({id:"common.button.text.delete.confirm"}),onConfirm:function(){var d,F,b=c==null||(d=c.current)===null||d===void 0?void 0:d.getFieldValue("actionList"),y=b.filter(function(p){return p.idx!==o.idx}),E=y.map(function(p,fe){return x()(x()({},p),{},{idx:fe+1})});c==null||(F=c.current)===null||F===void 0||F.setFieldValue("actionList",E)},okText:i.formatMessage({id:"common.button.text.ok"}),cancelText:i.formatMessage({id:"common.button.text.cancel"}),children:(0,e.jsx)(W.ZP,{type:"link",danger:!0,children:i.formatMessage({id:"common.button.text.delete"})},"delete")},"action")]}}];return(0,e.jsxs)(We.Z,{title:w?i.formatMessage({id:"involve.extend.title.edit"}):i.formatMessage({id:"involve.extend.title.add"}),width:"64%",destroyOnClose:!0,open:Z,onClose:Ze,children:[A,(0,e.jsx)(Ue.Z,{spinning:mt,children:(0,e.jsxs)(Ke.A,{onFinish:vt,formRef:c,layout:"horizontal",submitter:{submitButtonProps:{loading:k},render:function(r,o){return(0,e.jsxs)(Ge.Z,{justify:"end",gap:"small",children:[(0,e.jsx)(W.ZP,{onClick:function(){return Ze()},children:i.formatMessage({id:"common.button.text.cancel"})}),o]})}},children:[(0,e.jsx)(Fe.Z,{label:i.formatMessage({id:"involve.module.text.involve.title"}),name:"name",formItemProps:{rules:[{required:!0}]}}),(0,e.jsxs)(Ne.Z,{style:{marginBottom:20},bodyStyle:{backgroundColor:"rgb(245, 245, 245)",padding:"0 20px 16px 20px"},children:[(0,e.jsx)(be.Z,{rowKey:"idx",name:"ruleConfigList",actionRef:j,editableFormRef:C,headerTitle:(0,e.jsx)("div",{style:{fontSize:14},children:i.formatMessage({id:"involve.extend.title.conditional.config"})}),recordCreatorProps:{creatorButtonText:i.formatMessage({id:"involve.extend.title.addRowConfig"}),record:function(){return{idx:(Math.random()*1e6).toFixed(0)}}},onChange:function(){var r;return(r=c.current)===null||r===void 0?void 0:r.setFieldValue("condition",void 0)},columns:gt,editable:{type:"multiple",editableKeys:n,onChange:I,actionRender:function(r,o,s){return[s.delete]}}}),(0,e.jsx)(Ce.Z,{name:["ruleConfigList"],children:function(r){var o=r.ruleConfigList;return(0,e.jsx)(Fe.Z,{label:i.formatMessage({id:"involve.extend.title.logical"}),name:"condition",fieldProps:{placeholder:i.formatMessage({id:"involve.extend.title.logical.example"}),style:{maxWidth:"64%"}},rules:[{required:(o==null?void 0:o.length)>1}]})}}),(0,e.jsxs)(W.ZP,{type:"primary",onClick:function(){return dt()},style:{fontSize:13,padding:"4px 10px",gap:2},children:[(0,e.jsx)(Be.Z,{}),i.formatMessage({id:"involve.extend.title.addAction"})]}),(0,e.jsx)(be.Z,{rowKey:"idx",name:"actionList",editableFormRef:f,headerTitle:(0,e.jsx)("div",{style:{fontSize:14},children:i.formatMessage({id:"involve.extend.title.action.config"})}),columns:pt,recordCreatorProps:!1})]})]})}),(0,e.jsx)(De,{noticeFormVisible:nt,setNoticeFormVisible:Te,formRef:c}),(0,e.jsx)($e,{notificationInfo:he.current,timingFormVisible:rt,setTimingFormVisible:Ee,formRef:c}),(0,e.jsx)(ke,{notificationInfo:he.current,realtimeFormVisible:lt,setRealtimeFormVisible:Se,formRef:c})]})},Xe=Qe,_e=t(39380),qe=t(70989),et=t(72269),Pe=t(96074),tt=function(){var P=Me.ZP.useMessage(),U=h()(P,2),R=U[0],Z=U[1],m=(0,L.useRef)(),T=(0,L.useRef)({}),u=(0,a.useIntl)(),w=(0,L.useState)(!1),D=h()(w,2),G=D[0],z=D[1],A=function(){var l=O()(M()().mark(function v(n){var I,C,f,S;return M()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return I={id:n==null?void 0:n.id,status:(n==null?void 0:n.status)==="valid"?"invalid":"valid"},k.next=3,(0,ve.queryChangeStatus)(I);case 3:C=k.sent,C.msg==="success"&&(R.success(u.formatMessage({id:"common.message.text.edit.success"})),(f=m.current)===null||f===void 0||(S=f.reloadAndRest)===null||S===void 0||S.call(f));case 5:case"end":return k.stop()}},v)}));return function(n){return l.apply(this,arguments)}}(),i=function(v){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"create";n==="edit"?(T.current=x()({},v),z(!0)):(T.current={},z(!0))},c=function(){var l=O()(M()().mark(function v(n){var I,C,f,S;return M()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return I=R.loading(u.formatMessage({id:"common.message.text.delete.loading"})),k.next=3,(0,ve.deleteInvolve)({id:n});case 3:C=k.sent,I(),(C.code===200||C.msg==="success")&&(R.success(u.formatMessage({id:"common.message.text.delete.success"})),(f=m.current)===null||f===void 0||(S=f.reloadAndRest)===null||S===void 0||S.call(f));case 6:case"end":return k.stop()}},v)}));return function(n){return l.apply(this,arguments)}}(),j=[{title:u.formatMessage({id:"cloudAccount.extend.title.createAndUpdateTime"}),dataIndex:"gmtCreated",valueType:"text",align:"left",hideInSearch:!0,render:function(v,n){return(0,e.jsxs)("div",{children:[(0,e.jsx)("section",{style:{color:"#999"},children:(n==null?void 0:n.gmtCreate)||"-"}),(0,e.jsx)("section",{style:{color:"#999"},children:(n==null?void 0:n.gmtModified)||"-"})]})}},{title:u.formatMessage({id:"involve.module.text.involve.id"}),dataIndex:"id",valueType:"text",align:"center",width:120},{title:u.formatMessage({id:"involve.module.text.involve.title"}),dataIndex:"name",valueType:"text",align:"center",width:240},{title:u.formatMessage({id:"involve.module.text.involve.type"}),dataIndex:"actionType",valueType:"text",align:"center",width:320,hideInSearch:!0,render:function(v,n){return(0,e.jsx)(de.Z,{placement:"top",text:n.actionType,maxWidth:320})}},{title:u.formatMessage({id:"rule.input.text.rule.group.creator"}),dataIndex:"username",valueType:"text",align:"center"},{title:u.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),dataIndex:"option",valueType:"option",align:"center",width:240,fixed:"right",render:function(v,n){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(et.Z,{checkedChildren:u.formatMessage({id:"common.button.text.enable"}),unCheckedChildren:u.formatMessage({id:"common.button.text.disable"}),checked:(n==null?void 0:n.status)==="valid",onClick:function(){return A(n)}}),(0,e.jsx)(Pe.Z,{type:"vertical"}),(0,e.jsx)(W.ZP,{size:"small",onClick:function(){return i(n,"edit")},type:"link",children:u.formatMessage({id:"common.button.text.edit"})}),(0,e.jsx)(Pe.Z,{type:"vertical"}),(0,e.jsx)(je.Z,{title:u.formatMessage({id:"common.button.text.delete.confirm"}),onConfirm:function(){return c(n.id)},okText:u.formatMessage({id:"common.button.text.ok"}),cancelText:u.formatMessage({id:"common.button.text.cancel"}),children:(0,e.jsx)(W.ZP,{type:"link",danger:!0,size:"small",children:u.formatMessage({id:"common.button.text.delete"})})})]})}}];return(0,e.jsxs)(_e._z,{ghost:!0,title:!1,breadcrumbRender:!1,children:[Z,(0,e.jsx)(qe.Z,{headerTitle:(0,e.jsx)("div",{className:ae.Z.customTitle,children:u.formatMessage({id:"involve.module.text.involve.inquiry"})}),scroll:{x:"max-content"},actionRef:m,rowKey:"id",search:!1,request:function(){var l=O()(M()().mark(function v(n){var I,C,f,S,V,k,me;return M()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return I=n.pageSize,C=n.current,f={page:C,size:I},J.next=4,(0,ve.querySubscriptionList)(f);case 4:return S=J.sent,V=S.content,k=S.code,me=S.msg,J.abrupt("return",{data:(V==null?void 0:V.data)||[],total:(V==null?void 0:V.total)||0,success:k===200&&me==="success"||!1});case 9:case"end":return J.stop()}},v)}));return function(v){return l.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(W.ZP,{type:"primary",onClick:function(){return i({})},children:u.formatMessage({id:"involve.extend.text.add"})},"create")]},columns:j,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1}}),(0,e.jsx)(Xe,{tableActionRef:m,involveDrawerVisible:G,setInvolveDrawerVisible:z,involveDrawerInfo:T.current})]})},it=tt},53846:function(ye,Q){Q.Z={customTitle:"customTitle___nzcxh",riskHigh:"riskHigh___GstO6",riskMedium:"riskMedium___F4JTb",riskLow:"riskLow___HJopw",imgProcess:"imgProcess___NGndv",imgResult:"imgResult___wKhiG",validTag:"validTag___TRSau",invalidTag:"invalidTag___opVlG",waitingTag:"waitingTag___JZpZT"}}}]);
