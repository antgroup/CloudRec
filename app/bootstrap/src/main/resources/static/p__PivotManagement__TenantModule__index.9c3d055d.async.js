(self.webpackChunk=self.webpackChunk||[]).push([[3159],{64317:function(ie,J,e){"use strict";var S=e(1413),o=e(91),g=e(22270),x=e(62435),F=e(66758),R=e(10354),Q=e(86074),y=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],$=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],f=function(u,X){var q=u.fieldProps,c=u.children,s=u.params,I=u.proFieldProps,A=u.mode,ee=u.valueEnum,te=u.request,U=u.showSearch,Z=u.options,K=(0,o.Z)(u,y),ne=(0,x.useContext)(F.Z);return(0,Q.jsx)(R.Z,(0,S.Z)((0,S.Z)({valueEnum:(0,g.h)(ee),request:te,params:s,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,S.Z)({options:Z,mode:A,showSearch:U,getPopupContainer:ne.getPopupContainer},q),ref:X,proFieldProps:I},K),{},{children:c}))},w=x.forwardRef(function(P,u){var X=P.fieldProps,q=P.children,c=P.params,s=P.proFieldProps,I=P.mode,A=P.valueEnum,ee=P.request,te=P.options,U=(0,o.Z)(P,$),Z=(0,S.Z)({options:te,mode:I||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},X),K=(0,x.useContext)(F.Z);return(0,Q.jsx)(R.Z,(0,S.Z)((0,S.Z)({valueEnum:(0,g.h)(A),request:ee,params:c,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,S.Z)({getPopupContainer:K.getPopupContainer},Z),ref:u,proFieldProps:s},U),{},{children:q}))}),j=x.forwardRef(f),D=w,Y=j;Y.SearchSelect=D,Y.displayName="ProFormComponent",J.Z=Y},5966:function(ie,J,e){"use strict";var S=e(97685),o=e(1413),g=e(91),x=e(21770),F=e(23323),R=e(55241),Q=e(98423),y=e(62435),$=e(10354),f=e(86074),w=["fieldProps","proFieldProps"],j=["fieldProps","proFieldProps"],D="text",Y=function(c){var s=c.fieldProps,I=c.proFieldProps,A=(0,g.Z)(c,w);return(0,f.jsx)($.Z,(0,o.Z)({valueType:D,fieldProps:s,filedConfig:{valueType:D},proFieldProps:I},A))},P=function(c){var s=(0,x.Z)(c.open||!1,{value:c.open,onChange:c.onOpenChange}),I=(0,S.Z)(s,2),A=I[0],ee=I[1];return(0,f.jsx)(F.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(U){var Z,K=U.getFieldValue(c.name||[]);return(0,f.jsx)(R.Z,(0,o.Z)((0,o.Z)({getPopupContainer:function(M){return M&&M.parentNode?M.parentNode:M},onOpenChange:function(M){return ee(M)},content:(0,f.jsxs)("div",{style:{padding:"4px 0"},children:[(Z=c.statusRender)===null||Z===void 0?void 0:Z.call(c,K),c.strengthText?(0,f.jsx)("div",{style:{marginTop:10},children:(0,f.jsx)("span",{children:c.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},c.popoverProps),{},{open:A,children:c.children}))}})},u=function(c){var s=c.fieldProps,I=c.proFieldProps,A=(0,g.Z)(c,j),ee=(0,y.useState)(!1),te=(0,S.Z)(ee,2),U=te[0],Z=te[1];return s!=null&&s.statusRender&&A.name?(0,f.jsx)(P,{name:A.name,statusRender:s==null?void 0:s.statusRender,popoverProps:s==null?void 0:s.popoverProps,strengthText:s==null?void 0:s.strengthText,open:U,onOpenChange:Z,children:(0,f.jsx)("div",{children:(0,f.jsx)($.Z,(0,o.Z)({valueType:"password",fieldProps:(0,o.Z)((0,o.Z)({},(0,Q.Z)(s,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(ne){var M;s==null||(M=s.onBlur)===null||M===void 0||M.call(s,ne),Z(!1)},onClick:function(ne){var M;s==null||(M=s.onClick)===null||M===void 0||M.call(s,ne),Z(!0)}}),proFieldProps:I,filedConfig:{valueType:D}},A))})}):(0,f.jsx)($.Z,(0,o.Z)({valueType:"password",fieldProps:s,proFieldProps:I,filedConfig:{valueType:D}},A))},X=Y;X.Password=u,X.displayName="ProFormComponent",J.Z=X},99564:function(ie,J,e){"use strict";e.r(J),e.d(J,{default:function(){return Te}});var S=e(15009),o=e.n(S),g=e(99289),x=e.n(g),F=e(97857),R=e.n(F),Q=e(5574),y=e.n(Q),$=e(53846),f=e(33651),w=e(39380),j=e(70989),D=e(92016),Y=e(42075),P=e(83622),u=e(62435),X=e(98665),q=e(17910),c=e(29448),s=e(184),I=e(68872),A=e(86738),ee=e(72269),te=e(40396),U=e(37476),Z=e(64317),K=e(23323),ne=e(57381),M=e(32983),me=e(96486),t=e(86074),fe=function(T){var C=I.ZP.useMessage(),re=y()(C,2),ae=re[0],le=re[1],d=K.Z.useForm(),se=y()(d,1),L=se[0],E=(0,D.useIntl)(),z=T.addFormVisible,b=T.addTenantInfo,k=T.setAddFormVisible,oe=T.drawerTableActionRef,V=function(){var n=x()(o()().mark(function r(a){var v,l,p,h;return o()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return v=R()(R()({},a),{},{tenantId:b.id}),B.next=3,(0,f.joinUser)(v);case 3:l=B.sent,(l.msg==="success"||[200].includes(l.code))&&(ae.success(E.formatMessage({id:"common.message.text.add.success"})),k(!1),(p=oe.current)===null||p===void 0||(h=p.reloadAndRest)===null||h===void 0||h.call(p));case 5:case"end":return B.stop()}},r)}));return function(a){return n.apply(this,arguments)}}(),O=function(){L.resetFields()},i=function(){k(!1),O()},W=(0,u.useState)(!1),N=y()(W,2),_=N[0],G=N[1],m=function(){var n=x()(o()().mark(function r(a){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(0,me.isEmpty)(a.keyWords.trim())){l.next=2;break}return l.abrupt("return");case 2:return G(!0),l.abrupt("return",(0,D.request)("".concat(te._,"/api/user/queryUserList"),{method:"POST",data:{username:a.keyWords}}).then(function(p){var h;return(p==null||(h=p.content)===null||h===void 0?void 0:h.data)||[]}).catch(function(){return[]}).finally(function(){G(!1)}));case 4:case"end":return l.stop()}},r)}));return function(a){return n.apply(this,arguments)}}();return(0,t.jsxs)(t.Fragment,{children:[le,(0,t.jsx)(U.Y,{title:E.formatMessage({id:"tenant.extend.member.add"}),width:520,form:L,modalProps:{destroyOnClose:!0,onCancel:function(){return i()},styles:{body:{paddingTop:12}}},layout:"horizontal",open:z,onFinish:V,children:(0,t.jsx)(Z.Z,{allowClear:!0,name:"userId",label:E.formatMessage({id:"user.module.title.user.name"}),placeholder:E.formatMessage({id:"tenant.extend.member.select"}),rules:[{required:!0}],debounceTime:800,request:m,fieldProps:{showSearch:!0,filterOption:!1,fieldNames:{label:"username",value:"userId"},suffixIcon:(0,t.jsx)(t.Fragment,{}),notFoundContent:_?(0,t.jsx)(ne.Z,{size:"small"}):(0,t.jsx)(M.Z,{image:M.Z.PRESENTED_IMAGE_SIMPLE})}})})]})},ve=fe,pe=function(T){var C=(0,u.useRef)(),re=I.ZP.useMessage(),ae=y()(re,1),le=ae[0],d=(0,D.useIntl)(),se=(0,u.useState)(!1),L=y()(se,2),E=L[0],z=L[1],b=(0,u.useRef)({}),k=T.drawerFormVisible,oe=T.drawerInfo,V=T.setDrawerFormVisible,O=T.tableActionRef,i=function(){var m=x()(o()().mark(function n(){var r,a;return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return V(!1),l.next=3,(r=O.current)===null||r===void 0||(a=r.reloadAndRest)===null||a===void 0?void 0:a.call(r);case 3:case"end":return l.stop()}},n)}));return function(){return m.apply(this,arguments)}}(),W=function(){var m=x()(o()().mark(function n(){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i();case 2:case"end":return a.stop()}},n)}));return function(){return m.apply(this,arguments)}}(),N=function(){var m=x()(o()().mark(function n(r){var a,v,l,p;return o()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return a={userId:r,tenantId:oe.id},H.next=3,(0,f.removeUser)(a);case 3:v=H.sent,(v.code===200||v.msg==="success")&&((l=C.current)===null||l===void 0||(p=l.reloadAndRest)===null||p===void 0||p.call(l));case 5:case"end":return H.stop()}},n)}));return function(r){return m.apply(this,arguments)}}(),_=function(){var m=x()(o()().mark(function n(r,a){var v,l,p,h;return o()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return v={id:r,status:a},B.next=3,(0,X.changeUserStatus)(v);case 3:l=B.sent,(l.code===200||l.msg==="success")&&(le.success(d.formatMessage({id:"common.message.text.edit.success"})),(p=C.current)===null||p===void 0||(h=p.reloadAndRest)===null||h===void 0||h.call(p));case 5:case"end":return B.stop()}},n)}));return function(r,a){return m.apply(this,arguments)}}(),G=[{title:d.formatMessage({id:"user.module.title.user.name"}),dataIndex:"username",valueType:"text",align:"center"},{title:d.formatMessage({id:"user.module.title.user.id"}),dataIndex:"userId",valueType:"text",align:"center"},{title:d.formatMessage({id:"user.module.title.user.role"}),dataIndex:"roleName",valueType:"select",hideInSearch:!0,align:"center",valueEnum:(0,c.W_)(q.QQ)},{title:d.formatMessage({id:"cloudAccount.extend.title.createTime"}),dataIndex:"gmtCreate",valueType:"dateTime",hideInSearch:!0,align:"center"},{title:d.formatMessage({id:"cloudAccount.extend.title.updateTime"}),dataIndex:"gmtModified",valueType:"dateTime",hideInSearch:!0,align:"center"},{title:d.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),dataIndex:"option",valueType:"option",align:"center",render:function(n,r){return(0,t.jsxs)(Y.Z,{size:"small",children:[(0,t.jsx)(A.Z,{title:d.formatMessage({id:"tenant.extend.member.delete.user"}),onConfirm:function(){return N(r.id)},okText:d.formatMessage({id:"common.button.text.ok"}),cancelText:d.formatMessage({id:"common.button.text.cancel"}),children:(0,t.jsx)(P.ZP,{type:"link",danger:!0,children:d.formatMessage({id:"common.button.text.delete"})})}),(0,t.jsx)(ee.Z,{checkedChildren:d.formatMessage({id:"common.button.text.normal"}),unCheckedChildren:d.formatMessage({id:"common.button.text.disable"}),checked:(r==null?void 0:r.status)==="valid",onClick:function(){return _(r.id,(r==null?void 0:r.status)==="valid"?"invalid":"valid")}})]})}}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.a,{title:d.formatMessage({id:"tenant.extend.member.edit"}),width:"50%",drawerProps:{destroyOnClose:!0,onClose:function(){return i()},styles:{body:{padding:"12px 0"}}},open:k,onFinish:W,children:(0,t.jsx)(j.Z,{actionRef:C,rowKey:"id",search:!1,options:!1,toolBarRender:function(){return[(0,t.jsx)(P.ZP,{type:"primary",onClick:function(){z(!0),b.current=R()({},oe)},children:d.formatMessage({id:"tenant.extend.member.add"})},"create")]},request:function(){var m=x()(o()().mark(function n(r){var a,v,l,p,h,H;return o()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return a=r.pageSize,v=r.current,l={id:oe.id,page:v,size:a},de.next=4,(0,f.queryMember)(l);case 4:return p=de.sent,h=p.content,H=p.code,de.abrupt("return",{data:(h==null?void 0:h.data)||[],total:(h==null?void 0:h.total)||0,success:H===200||!1});case 8:case"end":return de.stop()}},n)}));return function(n){return m.apply(this,arguments)}}(),columns:G,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1,showTotal:function(n,r){return(0,c.GO)(n,r,d==null?void 0:d.locale)}}})}),(0,t.jsx)(ve,{addFormVisible:E,setAddFormVisible:z,addTenantInfo:b==null?void 0:b.current,drawerTableActionRef:C})]})},he=pe,ce=e(5966),ge=function(T){var C=I.ZP.useMessage(),re=y()(C,2),ae=re[0],le=re[1],d=K.Z.useForm(),se=y()(d,1),L=se[0],E=(0,D.useIntl)(),z=T.editFormVisible,b=T.tenantInfo,k=T.setEditFormVisible,oe=T.tableActionRef,V=function(){var i=x()(o()().mark(function W(N){var _,G,m,n;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return _=R()({},N),b.id&&(_.id=b.id),a.next=4,(0,f.saveTenant)(_);case 4:G=a.sent,G.msg==="success"&&(b.id?ae.success(E.formatMessage({id:"common.message.text.edit.success"})):ae.success(E.formatMessage({id:"common.message.text.create.success"})),k(!1),(m=oe.current)===null||m===void 0||(n=m.reloadAndRest)===null||n===void 0||n.call(m));case 6:case"end":return a.stop()}},W)}));return function(N){return i.apply(this,arguments)}}();(0,u.useEffect)(function(){b.id&&L.setFieldsValue(R()({},b))},[z,b]);var O=function(){k(!1)};return(0,t.jsxs)(t.Fragment,{children:[le,(0,t.jsxs)(U.Y,{title:b.id?E.formatMessage({id:"tenant.extend.title.edit"}):E.formatMessage({id:"tenant.extend.title.add"}),width:520,form:L,modalProps:{destroyOnClose:!0,onCancel:function(){return O()},styles:{body:{paddingTop:12}}},layout:"horizontal",open:z,onFinish:V,children:[(0,t.jsx)(ce.Z,{name:"tenantName",label:E.formatMessage({id:"tenant.module.text.tenant.name"}),rules:[{required:!0}]}),(0,t.jsx)(ce.Z,{name:"tenantDesc",label:E.formatMessage({id:"tenant.module.text.tenant.description"}),rules:[{required:!0}]}),(0,t.jsx)(Z.Z,{label:E.formatMessage({id:"tenant.extend.text.status"}),name:"status",rules:[{required:!0}],options:q.Q4})]})]})},xe=ge,Pe=function(){var T=(0,u.useRef)(),C=(0,D.useIntl)(),re=(0,u.useState)(!1),ae=y()(re,2),le=ae[0],d=ae[1],se=(0,u.useRef)({}),L=(0,u.useRef)({}),E=(0,u.useState)(!1),z=y()(E,2),b=z[0],k=z[1],oe=[{title:C.formatMessage({id:"cloudAccount.extend.title.createAndUpdateTime"}),dataIndex:"gmtCreated",valueType:"text",align:"left",hideInSearch:!0,render:function(O,i){return(0,t.jsxs)("div",{children:[(0,t.jsx)("section",{style:{color:"#999"},children:(i==null?void 0:i.gmtCreate)||"-"}),(0,t.jsx)("section",{style:{color:"#999"},children:(i==null?void 0:i.gmtModified)||"-"})]})}},{title:C.formatMessage({id:"tenant.module.text.tenant.name"}),dataIndex:"tenantName",valueType:"text",align:"center"},{title:C.formatMessage({id:"tenant.module.text.tenant.description"}),dataIndex:"tenantDesc",hideInSearch:!0,valueType:"text",align:"center"},{title:C.formatMessage({id:"tenant.module.text.member.number"}),dataIndex:"memberCount",hideInSearch:!0,valueType:"text",align:"center",render:function(O,i){return(0,t.jsx)(Y.Z,{size:"small",children:(0,t.jsx)(P.ZP,{disabled:i.status!=="valid",type:"link",onClick:function(){k(!0),L.current=R()({},i)},children:i==null?void 0:i.memberCount})})}},{title:C.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),dataIndex:"option",valueType:"option",align:"center",render:function(O,i){return(0,t.jsx)(Y.Z,{size:"small",children:(0,t.jsx)(P.ZP,{type:"link",onClick:function(){d(!0),se.current=R()({},i)},children:C.formatMessage({id:"common.button.text.edit"})})})}}];return(0,t.jsxs)(w._z,{ghost:!0,title:!1,breadcrumbRender:!1,children:[(0,t.jsx)(j.Z,{headerTitle:(0,t.jsx)("div",{className:$.Z.customTitle,children:C.formatMessage({id:"tenant.module.text.tenant.inquiry"})}),actionRef:T,rowKey:"id",search:{span:6,defaultCollapsed:!1,collapseRender:!1,labelWidth:0},toolBarRender:function(){return[(0,t.jsx)(P.ZP,{type:"primary",onClick:function(){se.current={},d(!0)},children:C.formatMessage({id:"tenant.extend.text.add"})},"create")]},request:function(){var V=x()(o()().mark(function O(i){var W,N,_,G,m,n,r;return o()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return W=i.tenantName,N=i.pageSize,_=i.current,G={tenantName:W,page:_,size:N,pageLimit:!0},v.next=4,(0,f.queryTenantList)(G);case 4:return m=v.sent,n=m.content,r=m.code,v.abrupt("return",{data:(n==null?void 0:n.data)||[],total:(n==null?void 0:n.total)||0,success:r===200||!1});case 8:case"end":return v.stop()}},O)}));return function(O){return V.apply(this,arguments)}}(),columns:oe,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1}}),(0,t.jsx)(xe,{editFormVisible:le,setEditFormVisible:d,tenantInfo:se.current,tableActionRef:T}),(0,t.jsx)(he,{drawerFormVisible:b,setDrawerFormVisible:k,drawerInfo:L.current,tableActionRef:T})]})},Te=Pe},53846:function(ie,J){"use strict";J.Z={customTitle:"customTitle___nzcxh",riskHigh:"riskHigh___GstO6",riskMedium:"riskMedium___F4JTb",riskLow:"riskLow___HJopw",imgProcess:"imgProcess___NGndv",imgResult:"imgResult___wKhiG",validTag:"validTag___TRSau",invalidTag:"invalidTag___opVlG",waitingTag:"waitingTag___JZpZT"}},64599:function(ie,J,e){var S=e(96263);function o(g,x){var F=typeof Symbol!="undefined"&&g[Symbol.iterator]||g["@@iterator"];if(!F){if(Array.isArray(g)||(F=S(g))||x&&g&&typeof g.length=="number"){F&&(g=F);var R=0,Q=function(){};return{s:Q,n:function(){return R>=g.length?{done:!0}:{done:!1,value:g[R++]}},e:function(j){throw j},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y=!0,$=!1,f;return{s:function(){F=F.call(g)},n:function(){var j=F.next();return y=j.done,j},e:function(j){$=!0,f=j},f:function(){try{!y&&F.return!=null&&F.return()}finally{if($)throw f}}}}ie.exports=o,ie.exports.__esModule=!0,ie.exports.default=ie.exports}}]);
