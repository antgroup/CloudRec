"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3159],{8751:function(ae,F,e){e.d(F,{Z:function(){return l}});var L=e(87462),n=e(62435),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},s=D,W=e(84089),f=function(o,h){return n.createElement(W.Z,(0,L.Z)({},o,{ref:h,icon:s}))},Z=n.forwardRef(f),l=Z},18429:function(ae,F,e){e.d(F,{Z:function(){return l}});var L=e(87462),n=e(62435),D={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},s=D,W=e(84089),f=function(o,h){return n.createElement(W.Z,(0,L.Z)({},o,{ref:h,icon:s}))},Z=n.forwardRef(f),l=Z},5966:function(ae,F,e){var L=e(97685),n=e(1413),D=e(91),s=e(21770),W=e(99859),f=e(55241),Z=e(98423),l=e(62435),b=e(58055),o=e(86074),h=["fieldProps","proFieldProps"],G=["fieldProps","proFieldProps"],g="text",J=function(a){var r=a.fieldProps,N=a.proFieldProps,O=(0,D.Z)(a,h);return(0,o.jsx)(b.Z,(0,n.Z)({valueType:g,fieldProps:r,filedConfig:{valueType:g},proFieldProps:N},O))},ee=function(a){var r=(0,s.Z)(a.open||!1,{value:a.open,onChange:a.onOpenChange}),N=(0,L.Z)(r,2),O=N[0],V=N[1];return(0,o.jsx)(W.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(re){var B,t=re.getFieldValue(a.name||[]);return(0,o.jsx)(f.Z,(0,n.Z)((0,n.Z)({getPopupContainer:function(p){return p&&p.parentNode?p.parentNode:p},onOpenChange:function(p){return V(p)},content:(0,o.jsxs)("div",{style:{padding:"4px 0"},children:[(B=a.statusRender)===null||B===void 0?void 0:B.call(a,t),a.strengthText?(0,o.jsx)("div",{style:{marginTop:10},children:(0,o.jsx)("span",{children:a.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},a.popoverProps),{},{open:O,children:a.children}))}})},ie=function(a){var r=a.fieldProps,N=a.proFieldProps,O=(0,D.Z)(a,G),V=(0,l.useState)(!1),te=(0,L.Z)(V,2),re=te[0],B=te[1];return r!=null&&r.statusRender&&O.name?(0,o.jsx)(ee,{name:O.name,statusRender:r==null?void 0:r.statusRender,popoverProps:r==null?void 0:r.popoverProps,strengthText:r==null?void 0:r.strengthText,open:re,onOpenChange:B,children:(0,o.jsx)("div",{children:(0,o.jsx)(b.Z,(0,n.Z)({valueType:"password",fieldProps:(0,n.Z)((0,n.Z)({},(0,Z.Z)(r,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(ne){var p;r==null||(p=r.onBlur)===null||p===void 0||p.call(r,ne),B(!1)},onClick:function(ne){var p;r==null||(p=r.onClick)===null||p===void 0||p.call(r,ne),B(!0)}}),proFieldProps:N,filedConfig:{valueType:g}},O))})}):(0,o.jsx)(b.Z,(0,n.Z)({valueType:"password",fieldProps:r,proFieldProps:N,filedConfig:{valueType:g}},O))},A=J;A.Password=ie,A.displayName="ProFormComponent",F.Z=A},69055:function(ae,F,e){e.d(F,{Z:function(){return ee}});var L=e(22181),n=e(83622),D=e(87462),s=e(62435),W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},f=W,Z=e(84089),l=function(A,Q){return s.createElement(Z.Z,(0,D.Z)({},A,{ref:Q,icon:f}))},b=s.forwardRef(l),o=b,h=e(45830),G={noPermissionContainer:"noPermissionContainer___mfh3D","ant-result":"ant-result___HwWPh","ant-result-icon":"ant-result-icon___kCRak",anticon:"anticon___dFq4q","ant-result-title":"ant-result-title___qzgxn","ant-result-subtitle":"ant-result-subtitle___wgaK1","ant-result-extra":"ant-result-extra___YuiiI","ant-btn":"ant-btn___SR44Y",dark:"dark___6IwTX",fadeInUp:"fadeInUp___lq2_S"},g=e(86074),J=function(A){var Q=A.title,a=A.subTitle,r=A.showReturnButton,N=r===void 0?!0:r,O=A.onReturn,V=(0,h.useIntl)(),te=function(){O?O():h.history===null||h.history===void 0||h.history.push("/")};return(0,g.jsx)("div",{className:G.noPermissionContainer,children:(0,g.jsx)(L.ZP,{icon:(0,g.jsx)(o,{}),status:"403",title:Q||V.formatMessage({id:"common.message.text.no.permission.title"}),subTitle:a||V.formatMessage({id:"common.message.text.no.permission.subtitle"}),extra:N&&(0,g.jsx)(n.ZP,{type:"primary",onClick:te,children:V.formatMessage({id:"common.button.text.return"})})})})},ee=J},82043:function(ae,F,e){var L=e(62435),n=e(45830),D=e(69055),s=e(86074),W=function(Z){var l=Z.children,b=Z.accessKey,o=Z.fallback,h=(0,n.useAccess)(),G=(0,n.useIntl)();if(!b)return(0,s.jsx)(s.Fragment,{children:l});var g=h[b];return g?(0,s.jsx)(s.Fragment,{children:l}):(0,s.jsx)(s.Fragment,{children:o||(0,s.jsx)(D.Z,{title:G.formatMessage({id:"common.message.text.no.permission.title"}),subTitle:G.formatMessage({id:"common.message.text.no.permission.subtitle"})})})};F.Z=W},83748:function(ae,F,e){e.r(F),e.d(F,{default:function(){return Ie}});var L=e(15009),n=e.n(L),D=e(97857),s=e.n(D),W=e(99289),f=e.n(W),Z=e(5574),l=e.n(Z),b=e(53846),o=e(82043),h=e(33651),G=e(39380),g=e(45830),J=e(68872),ee=e(83622),ie=e(57381),A=e(32983),Q=e(24969),a=e(62435),r=e(17910),N=e(29448),O=e(184),V=e(90498),te=e(83062),re=e(54811),B=e(87547),t=e(86074),ne=function(c){var M=(0,a.useRef)(),$=J.ZP.useMessage(),K=l()($,1),se=K[0],x=(0,g.useIntl)(),X=c.drawerFormVisible,Y=c.drawerInfo,P=c.setDrawerFormVisible,y=c.tableActionRef,d=function(){var T=f()(n()().mark(function m(){var u,i;return n()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return P(!1),C.next=3,(u=y.current)===null||u===void 0||(i=u.reloadAndRest)===null||i===void 0?void 0:i.call(u);case 3:case"end":return C.stop()}},m)}));return function(){return T.apply(this,arguments)}}(),S=function(){var T=f()(n()().mark(function m(){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,d();case 2:case"end":return i.stop()}},m)}));return function(){return T.apply(this,arguments)}}(),k=[{title:x.formatMessage({id:"user.module.title.user.name"}),dataIndex:"username",valueType:"text",align:"center"},{title:x.formatMessage({id:"user.module.title.user.id"}),dataIndex:"userId",valueType:"text",align:"center"},{title:x.formatMessage({id:"user.module.title.user.role"}),dataIndex:"roleName",valueType:"select",hideInSearch:!0,align:"center",valueEnum:(0,N.W_)(r.QQ),render:function(m,u){var i=u.roleName==="admin";return(0,t.jsx)(te.Z,{title:x.formatMessage({id:i?"common.tag.text.admin":"common.tag.text.user"}),children:i?(0,t.jsx)(re.Z,{style:{color:"#faad14",fontSize:"16px"}}):(0,t.jsx)(B.Z,{style:{color:"#1890ff",fontSize:"16px"}})})}},{title:x.formatMessage({id:"cloudAccount.extend.title.createTime"}),dataIndex:"gmtCreate",valueType:"dateTime",hideInSearch:!0,align:"center"},{title:x.formatMessage({id:"cloudAccount.extend.title.updateTime"}),dataIndex:"gmtModified",valueType:"dateTime",hideInSearch:!0,align:"center"}];return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(O.a,{title:x.formatMessage({id:"tenant.extend.member.edit"}),width:"50%",drawerProps:{destroyOnClose:!0,onClose:function(){return d()},styles:{body:{padding:"12px 0"}}},open:X,onFinish:S,children:(0,t.jsx)(V.Z,{actionRef:M,rowKey:"id",search:!1,options:!1,request:function(){var T=f()(n()().mark(function m(u){var i,z,C,_,j,q;return n()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return i=u.pageSize,z=u.current,C={id:Y.id,page:z,size:i},R.next=4,(0,h.queryMember)(C);case 4:return _=R.sent,j=_.content,q=_.code,R.abrupt("return",{data:(j==null?void 0:j.data)||[],total:(j==null?void 0:j.total)||0,success:q===200||!1});case 8:case"end":return R.stop()}},m)}));return function(m){return T.apply(this,arguments)}}(),columns:k,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1,showTotal:function(m,u){return(0,N.GO)(m,u,x==null?void 0:x.locale)}}})})})},p=ne,xe=e(37476),fe=e(5966),Ce=e(64317),Me=e(99859),Pe=function(c){var M=J.ZP.useMessage(),$=l()(M,2),K=$[0],se=$[1],x=Me.Z.useForm(),X=l()(x,1),Y=X[0],P=(0,g.useIntl)(),y=c.editFormVisible,d=c.tenantInfo,S=c.setEditFormVisible,k=c.tableActionRef,T=function(){var u=f()(n()().mark(function i(z){var C,_,j,q;return n()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return C=s()({},z),d.id&&(C.id=d.id),R.next=4,(0,h.saveTenant)(C);case 4:_=R.sent,_.msg==="success"&&(d.id?K.success(P.formatMessage({id:"common.message.text.edit.success"})):K.success(P.formatMessage({id:"common.message.text.create.success"})),S(!1),(j=k.current)===null||j===void 0||(q=j.reloadAndRest)===null||q===void 0||q.call(j));case 6:case"end":return R.stop()}},i)}));return function(z){return u.apply(this,arguments)}}();(0,a.useEffect)(function(){d.id&&Y.setFieldsValue(s()({},d))},[y,d]);var m=function(){S(!1)};return(0,t.jsxs)(t.Fragment,{children:[se,(0,t.jsxs)(xe.Y,{title:d.id?P.formatMessage({id:"tenant.extend.title.edit"}):P.formatMessage({id:"tenant.extend.title.add"}),width:520,form:Y,modalProps:{destroyOnClose:!0,onCancel:function(){return m()},styles:{body:{paddingTop:12}}},layout:"horizontal",open:y,onFinish:T,children:[(0,t.jsx)(fe.Z,{name:"tenantName",label:P.formatMessage({id:"tenant.module.text.tenant.name"}),rules:[{required:!0}],disabled:d.disable}),(0,t.jsx)(fe.Z,{name:"tenantDesc",label:P.formatMessage({id:"tenant.module.text.tenant.description"}),rules:[{required:!0}]}),(0,t.jsx)(Ce.Z,{label:P.formatMessage({id:"tenant.extend.text.status"}),name:"status",rules:[{required:!0}],options:r.Q4,disabled:d.disable})]})]})},ye=Pe,he=e(86250),Te=e(96074),je=e(71230),de=e(15746),Fe=e(8751),Ee=e(18429),E={tenantModuleWrap:"tenantModuleWrap___wWLgW",tenantCardList:"tenantCardList___oXmsL",tenantCard:"tenantCard___CRF3O",divider:"divider___OLJ4k",propertyWrap:"propertyWrap___Ky9sD",propertyName:"propertyName___hQpwK",tenantNameWrap:"tenantNameWrap___INdmI",tenantName:"tenantName___CLnls",tenantDesc:"tenantDesc___b7q2i",searchForm:"searchForm___ivus9",emptyState:"emptyState___DoN5q",emptyIcon:"emptyIcon___b1SX4",emptyText:"emptyText___jy_bn"},Re=function(c){var M=c.tenant,$=c.onEdit,K=c.onViewMembers,se=M.tenantName,x=M.tenantDesc,X=M.memberCount,Y=M.gmtCreate,P=M.gmtModified,y=M.status,d=M.disable,S=(0,g.useIntl)(),k=J.ZP.useMessage(),T=l()(k,2),m=T[0],u=T[1],i=function(){if(d){m.warning(S.formatMessage({id:"tenant.module.message.edit.disabled"})||"This tenant cannot be edited");return}$(M)},z=function(){if(y!=="valid"){m.warning(S.formatMessage({id:"tenant.module.message.invalid.tenant"})||"Cannot view members of invalid tenant");return}K(M)};return(0,t.jsxs)(t.Fragment,{children:[u,(0,t.jsxs)("div",{className:E.tenantCard,children:[(0,t.jsx)(he.Z,{justify:"space-between",align:"flex-start",style:{width:"100%"},children:(0,t.jsxs)("div",{className:E.tenantNameWrap,children:[(0,t.jsx)("div",{className:E.tenantName,children:se||"-"}),(0,t.jsx)("div",{className:E.tenantDesc,children:x||"-"})]})}),(0,t.jsx)(Te.Z,{className:E.divider}),(0,t.jsxs)(je.Z,{gutter:[16,8],children:[(0,t.jsxs)(de.Z,{span:12,className:E.propertyWrap,children:[(0,t.jsx)("div",{className:E.propertyName,children:S.formatMessage({id:"tenant.module.text.member.number"})}),(0,t.jsx)(ee.ZP,{type:"link",disabled:y!=="valid",style:{padding:0,height:"auto",color:y==="valid"?"#1677FF":"#999",fontSize:13},onClick:z,children:X||0})]}),(0,t.jsxs)(de.Z,{span:12,className:E.propertyWrap,children:[(0,t.jsx)("div",{className:E.propertyName,children:S.formatMessage({id:"common.link.text.status"})||"Status"}),(0,t.jsxs)("div",{style:{color:y==="valid"?"#52c41a":"#ff4d4f",fontSize:13,display:"flex",alignItems:"center",gap:4},children:[y==="valid"?(0,t.jsx)(Fe.Z,{style:{color:"#52c41a"}}):(0,t.jsx)(Ee.Z,{style:{color:"#ff4d4f"}}),y]})]}),(0,t.jsxs)(de.Z,{span:24,className:E.propertyWrap,children:[(0,t.jsx)("div",{className:E.propertyName,children:S.formatMessage({id:"cloudAccount.extend.title.createAndUpdateTime"})}),(0,t.jsxs)("div",{style:{color:"#999",fontSize:13,lineHeight:"18px"},children:[(0,t.jsx)("div",{children:Y||"-"}),(0,t.jsx)("div",{children:P||"-"})]})]})]}),(0,t.jsx)(he.Z,{style:{width:"100%",marginTop:16},justify:"center",children:(0,t.jsx)(ee.ZP,{size:"small",type:"primary",disabled:d,style:{width:64,height:30,borderRadius:4,backgroundColor:d?"#f5f5f5":"#E7F1FF",color:d?"#999":"#1677FF",border:"none"},onClick:i,children:S.formatMessage({id:"common.button.text.edit"})})})]})]})},Ze=Re,Oe=function(){var c=(0,g.useIntl)(),M=J.ZP.useMessage(),$=l()(M,2),K=$[0],se=$[1],x=(0,a.useState)(!1),X=l()(x,2),Y=X[0],P=X[1],y=(0,a.useRef)({}),d=(0,a.useRef)({}),S=(0,a.useState)(!1),k=l()(S,2),T=k[0],m=k[1],u=(0,a.useState)([]),i=l()(u,2),z=i[0],C=i[1],_=(0,a.useState)(!1),j=l()(_,2),q=j[0],oe=j[1],R=(0,a.useState)({current:1,pageSize:12,total:0}),ge=l()(R,2),ue=ge[0],ce=ge[1],me=(0,a.useCallback)(f()(n()().mark(function I(){var w,U,H;return n()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.prev=0,oe(!0),v.next=4,(0,h.queryTenantListV2)();case 4:w=v.sent,U=w.content,H=w.code,H===200&&(C(U||[]),ce(function(ve){return s()(s()({},ve),{},{current:1,total:(U==null?void 0:U.length)||0})})),v.next=13;break;case 10:v.prev=10,v.t0=v.catch(0),K.error(c.formatMessage({id:"common.message.text.fetch.error"})||"Failed to fetch tenant list");case 13:return v.prev=13,oe(!1),v.finish(13);case 16:case"end":return v.stop()}},I,null,[[0,10,13,16]])})),[K,c]),De=function(w){P(!0),y.current=s()({},w)},be=function(w){m(!0),d.current=s()({},w)},Ae=function(){y.current={},P(!0)},Ne=function(){var I=f()(n()().mark(function w(){return n()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,me();case 2:case"end":return H.stop()}},w)}));return function(){return I.apply(this,arguments)}}(),pe={current:{reload:function(){var I=f()(n()().mark(function U(H){return n()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return H&&ce(function(ve){return s()(s()({},ve),{},{current:1})}),v.next=3,me();case 3:case"end":return v.stop()}},U)}));function w(U){return I.apply(this,arguments)}return w}(),reloadAndRest:Ne,reset:function(){ce({current:1,pageSize:12,total:0}),C([])},clearSelected:function(){},pageInfo:{current:ue.current,pageSize:ue.pageSize,total:ue.total}}};return(0,a.useEffect)(function(){me()},[]),(0,t.jsxs)(G._z,{ghost:!0,title:!1,breadcrumbRender:!1,children:[se,(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,t.jsx)("div",{className:b.Z.customTitle,children:c.formatMessage({id:"tenant.module.text.tenant.inquiry"})}),(0,t.jsx)(ee.ZP,{type:"primary",icon:(0,t.jsx)(Q.Z,{}),onClick:Ae,children:c.formatMessage({id:"tenant.extend.text.add"})})]}),(0,t.jsx)("div",{className:E.tenantModuleWrap,children:(0,t.jsx)(ie.Z,{spinning:q,children:z.length>0?(0,t.jsx)("div",{className:E.tenantCardList,children:z.map(function(I){return(0,t.jsx)(Ze,{tenant:I,onEdit:De,onViewMembers:be},I.id)})}):(0,t.jsx)("div",{className:E.emptyState,children:(0,t.jsx)(A.Z,{description:c.formatMessage({id:"common.message.text.no.data"})||"No tenant data"})})})}),(0,t.jsx)(ye,{editFormVisible:Y,setEditFormVisible:P,tenantInfo:y.current,tableActionRef:pe}),(0,t.jsx)(p,{drawerFormVisible:T,setDrawerFormVisible:m,drawerInfo:d.current,tableActionRef:pe})]})},Se=function(){return(0,t.jsx)(o.Z,{accessKey:"isPlatformAdmin",children:(0,t.jsx)(Oe,{})})},Ie=Se},53846:function(ae,F){F.Z={customTitle:"customTitle___nzcxh",riskHigh:"riskHigh___GstO6",riskMedium:"riskMedium___F4JTb",riskLow:"riskLow___HJopw",imgProcess:"imgProcess___NGndv",imgResult:"imgResult___wKhiG",validTag:"validTag___TRSau",invalidTag:"invalidTag___opVlG",waitingTag:"waitingTag___JZpZT"}}}]);
