(self.webpackChunk=self.webpackChunk||[]).push([[6673],{52745:function(se,B,a){"use strict";a.d(B,{Z:function(){return g}});var b=a(87462),h=a(62435),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},T=M,w=a(84089),c=function(L,G){return h.createElement(w.Z,(0,b.Z)({},L,{ref:G,icon:T}))},_=h.forwardRef(c),g=_},31732:function(se,B,a){"use strict";var b=a(97857),h=a.n(b),M=a(66309),T=a(62435),w=a(86074);B.Z=function(c){var _=c.text,g=c.style;return(0,w.jsx)(M.Z,{style:h()({background:"#ebf0ff",border:"1px solid #a6bfff",borderRadius:2,color:"#457aff"},g),children:_})}},24163:function(se,B,a){"use strict";var b=a(97857),h=a.n(b),M=a(25593),T=a(83062),w=a(62435),c=a(86074),_=M.Z.Paragraph;B.Z=function(g){var N=g.text,L=g.width,G=g.maxWidth,W=g.rows,le=W===void 0?2:W,oe=g.placement,Ce=oe===void 0?"top":oe,A=g.color,Le=A===void 0?"rgba(0, 0, 0, 0.88)":A,H=g.link,$e=H===void 0?!1:H,Ve=g.onClickCallBackFunc,q=g.style,j=q===void 0?{}:q,je=g.copyable,Ue=je===void 0?!1:je;return(0,c.jsx)("div",{style:{maxWidth:G,width:L},children:(0,c.jsx)(T.Z,{title:(0,c.jsx)("div",{children:N}),placement:Ce,children:(0,c.jsx)(_,{ellipsis:{rows:le},style:h()({marginBottom:0,color:Le,cursor:$e?"pointer":""},j),onClick:Ve,copyable:Ue,children:N})})})}},28235:function(se,B,a){"use strict";var b=a(97857),h=a.n(b),M=a(25593),T=a(83062),w=a(62435),c=a(86074),_=M.Z.Paragraph;B.Z=function(g){var N=g.text,L=g.width,G=g.maxWidth,W=g.rows,le=W===void 0?2:W,oe=g.placement,Ce=oe===void 0?"top":oe,A=g.color,Le=A===void 0?"rgba(0, 0, 0, 0.88)":A,H=g.link,$e=H===void 0?!1:H,Ve=g.onClickCallBackFunc,q=g.style,j=q===void 0?{}:q,je=g.copyable,Ue=je===void 0?!1:je,ht=g.tooltipText;return(0,c.jsx)("div",{style:{maxWidth:G,width:L},children:(0,c.jsx)(T.Z,{title:ht,placement:Ce,children:(0,c.jsx)(_,{ellipsis:{rows:le},style:h()({marginBottom:0,color:Le,cursor:$e?"pointer":""},j),onClick:Ve,copyable:Ue,children:N})})})}},28326:function(se,B,a){"use strict";a.r(B),a.d(B,{default:function(){return Ra}});var b=a(15009),h=a.n(b),M=a(99289),T=a.n(M),w=a(5574),c=a.n(w),_=a(79930),g=a(96655),N=a(17910),L=a(29448),G=a(39380),W=a(93410),le=a(92016),oe=a(3303),Ce=a(68872),A=a(23323),Le=a(71230),H=a(15746),$e=a(84567),Ve=a(34041),q=a(42075),j=a(83622),je=a(92398),Ue=a(68795),ht=a(33160),Me=a(96486),f=a(62435),Nt=a(13769),Wt=a.n(Nt),Zt=a(9783),de=a.n(Zt),r=a(97857),v=a.n(r),P=a(31732),x=a(24163),R=a(28235),ie=a(66309),ee=a(85265),Pe=a(57381),D=a(26412),te=a(25593),t=a(86074),Ge=function(y){var S=y.visible,Q=y.onClose,Re=y.ruleId,ut=y.ruleCode,Dt=(0,le.useIntl)(),ct=Ce.ZP.useMessage(),J=c()(ct,2),pe=J[0],me=J[1],K=(0,f.useState)(!1),Ee=c()(K,2),$=Ee[0],ae=Ee[1],fe=(0,f.useState)(null),C=c()(fe,2),z=C[0],d=C[1];(0,f.useEffect)(function(){S&&Re&&E()},[S,Re]);var E=function(){var ce=T()(h()().mark(function X(){var he;return h()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(ae(!0),I.prev=1,!Re){I.next=6;break}return I.next=5,(0,g.queryRuleDetail)({id:Re});case 5:he=I.sent;case 6:he&&he.content&&d(he.content),I.next=12;break;case 9:I.prev=9,I.t0=I.catch(1),pe.error("\u83B7\u53D6\u89C4\u5219\u8BE6\u60C5\u5931\u8D25");case 12:return I.prev=12,ae(!1),I.finish(12);case 15:case"end":return I.stop()}},X,null,[[1,9,12,15]])}));return function(){return ce.apply(this,arguments)}}(),Qe=function(){d(null),Q()},ze=function(X){switch(X.toLowerCase()){case"high":case"\u9AD8":return"red";case"medium":case"\u4E2D":return"orange";case"low":case"\u4F4E":return"green";default:return"default"}},dt=function(X){if(!X)return null;var he=X.split(",");return he.map(function(Xe,I){return(0,t.jsx)(ie.Z,{color:ze(Xe.trim()),children:Xe.trim()},I)})},Je=function(X){return(0,L.c5)(X)};return(0,t.jsxs)(t.Fragment,{children:[me,(0,t.jsx)(ee.Z,{title:"\u89C4\u5219\u8BE6\u60C5",placement:"right",onClose:Qe,open:S,width:1e3,destroyOnClose:!0,children:(0,t.jsx)(Pe.Z,{spinning:$,children:z&&(0,t.jsxs)(D.Z,{column:1,bordered:!0,children:[(0,t.jsx)(D.Z.Item,{label:"\u89C4\u5219\u540D\u79F0",children:(0,t.jsx)(te.Z.Text,{copyable:!0,children:z.ruleName})}),(0,t.jsx)(D.Z.Item,{label:"\u89C4\u5219code",children:(0,t.jsx)(te.Z.Text,{copyable:!0,children:z.ruleCode})}),(0,t.jsx)(D.Z.Item,{label:"\u4FEE\u590D\u5EFA\u8BAE",children:(0,t.jsx)(te.Z.Text,{copyable:!0,children:z.advice})}),(0,t.jsx)(D.Z.Item,{label:"\u4FEE\u590D\u6587\u6863",children:(0,t.jsx)(te.Z.Text,{copyable:!0,children:z.link})}),(0,t.jsx)(D.Z.Item,{label:"\u4E0A\u4E0B\u6587\u6A21\u677F",children:(0,t.jsx)(te.Z.Text,{copyable:!0,children:z.context})}),z.ruleRego&&(0,t.jsx)(D.Z.Item,{label:"\u7B56\u7565",children:(0,t.jsx)(te.Z.Paragraph,{copyable:!0,children:(0,t.jsx)("pre",{style:{background:"#f5f5f5",padding:"12px",borderRadius:"4px",fontSize:"12px",maxHeight:"1000px",overflow:"auto"},children:z.ruleRego})})}),z.createTime&&(0,t.jsx)(D.Z.Item,{label:"\u521B\u5EFA\u65F6\u95F4",children:(0,t.jsx)(te.Z.Text,{copyable:!0,children:z.createTime})}),z.updateTime&&(0,t.jsx)(D.Z.Item,{label:"\u66F4\u65B0\u65F6\u95F4",children:(0,t.jsx)(te.Z.Text,{copyable:!0,children:z.updateTime})})]})})})]})},xe=Ge,Be=a(87462),yt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"},ge=yt,Ae=a(84089),it=function(y,S){return f.createElement(Ae.Z,(0,Be.Z)({},y,{ref:S,icon:ge}))},Kt=f.forwardRef(it),Et=Kt,It=a(86548),Ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},Vt=Ct,ue=function(y,S){return f.createElement(Ae.Z,(0,Be.Z)({},y,{ref:S,icon:Vt}))},Ut=f.forwardRef(ue),Gt=Ut,kt=a(52745),Ht=a(24969),xt=a(90498),Ot=a(75302),He=a(83062),St=a(55241),Rt=a(86738),wt=a(72269),De=function(){return{style:{cursor:"pointer"},onMouseEnter:function(S){S.currentTarget.style.backgroundColor="#f5f5f5",S.currentTarget.style.transform="scale(1.01)",S.currentTarget.style.transition="all 0.2s ease",S.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},onMouseLeave:function(S){S.currentTarget.style.backgroundColor="",S.currentTarget.style.transform="scale(1)",S.currentTarget.style.boxShadow=""}}},$t=function(y){return function(S){return v()({onClick:function(){return y(S)}},De())}},Ze=["pageSize","current"],Bt=Ot.ZP.useBreakpoint,bt=function(y){var S=y.form,Q=y.platformList,Re=y.resourceTypeList,ut=y.ruleGroupList,Dt=y.ruleTypeList,ct=y.allRuleList,J=y.checkNewRules,pe=y.newRulesCount,me=y.queryTrigger,K=Ce.ZP.useMessage(),Ee=c()(K,2),$=Ee[0],ae=Ee[1],fe=Bt(),C=(0,f.useRef)(),z=(0,f.useRef)(),d=(0,le.useIntl)(),E=(0,f.useState)(),Qe=c()(E,2),ze=Qe[0],dt=Qe[1],Je=(0,f.useState)({}),ce=c()(Je,2),X=ce[0],he=ce[1],Xe=(0,f.useState)(!1),I=c()(Xe,2),mt=I[0],Ye=I[1],_e=(0,f.useState)(),qe=c()(_e,2),ft=qe[0],vt=qe[1],ve=(0,f.useState)({}),Ie=c()(ve,2),Fe=Ie[0],gt=Ie[1],zt=(0,f.useState)({}),et=c()(zt,2),Ne=et[0],ke=et[1],tt=(0,f.useState)({}),at=c()(tt,2),rt=at[0],We=at[1],nt=(0,f.useState)([]),Ke=c()(nt,2),pt=Ke[0],st=Ke[1],Tt=(0,f.useState)(!1),Oe=c()(Tt,2),Lt=Oe[0],be=Oe[1],jt=(0,f.useState)(!1),Te=c()(jt,2),lt=Te[0],we=Te[1],Mt=(0,f.useState)(!1),ot=c()(Mt,2),V=ot[0],k=ot[1];(0,f.useEffect)(function(){if(me!==void 0&&me>0){var m;(m=C.current)===null||m===void 0||m.reload()}},[me]);var U=function(i){return i.id===ze?"ant-table-row-selected":""},Ft=function(i){vt(i.id),Ye(!0)},Y=function(){Ye(!1),vt(void 0)},Qt=function(){var m=T()(h()().mark(function i(e){var l,n,u,p;return h()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return l=$.loading(d.formatMessage({id:"common.message.text.delete.loading"})),s.next=3,(0,g.deleteRule)({id:e});case 3:n=s.sent,l(),(n.code===200||n.msg==="success")&&($.success(d.formatMessage({id:"common.message.text.delete.success"})),(u=C.current)===null||u===void 0||(p=u.reloadAndRest)===null||p===void 0||p.call(u));case 6:case"end":return s.stop()}},i)}));return function(e){return m.apply(this,arguments)}}(),Jt=function(){var m=T()(h()().mark(function i(e){var l,n,u,p;return h()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return gt(v()(v()({},Fe),{},de()({},e,!0))),l=$.loading(d.formatMessage({id:"common.message.text.copy.loading"})),s.next=4,(0,g.copyRule)({id:e});case 4:n=s.sent,gt(v()(v()({},Fe),{},de()({},e,!1))),l(),(n.code===200||n.msg==="success")&&($.success(d.formatMessage({id:"common.message.text.copy.success"})),(u=C.current)===null||u===void 0||(p=u.reloadAndRest)===null||p===void 0||p.call(u));case 8:case"end":return s.stop()}},i)}));return function(e){return m.apply(this,arguments)}}(),Xt=function(){var m=T()(h()().mark(function i(e){var l,n,u,p;return h()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return l=e.id,ke(v()(v()({},Ne),{},de()({},l,!0))),s.prev=2,s.next=5,(0,g.addTenantSelectRule)({ruleCode:e.ruleCode});case 5:n=s.sent,(n.code===200||n.msg==="success")&&($.success(d.formatMessage({id:"common.message.text.success"})),(u=C.current)===null||u===void 0||(p=u.reloadAndRest)===null||p===void 0||p.call(u)),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(2),$.error(d.formatMessage({id:"common.message.text.failed"}));case 12:return s.prev=12,ke(v()(v()({},Ne),{},de()({},l,!1))),s.finish(12);case 15:case"end":return s.stop()}},i,null,[[2,9,12,15]])}));return function(e){return m.apply(this,arguments)}}(),Yt=function(){var m=T()(h()().mark(function i(e){var l,n,u,p;return h()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return l=e.id,We(v()(v()({},rt),{},de()({},l,!0))),s.prev=2,s.next=5,(0,g.removeTenantSelectRule)({ruleCode:e.ruleCode});case 5:n=s.sent,(n.code===200||n.msg==="success")&&($.success(d.formatMessage({id:"common.message.text.success"})),(u=C.current)===null||u===void 0||(p=u.reloadAndRest)===null||p===void 0||p.call(u)),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(2),$.error(d.formatMessage({id:"common.message.text.failed"}));case 12:return s.prev=12,We(v()(v()({},rt),{},de()({},l,!1))),s.finish(12);case 15:case"end":return s.stop()}},i,null,[[2,9,12,15]])}));return function(e){return m.apply(this,arguments)}}(),_t=function(i){k(!0),(0,g.queryExportRuleList)(i?{idList:i}:void 0,{responseType:"blob"}).then(function(e){(0,L.a5)(e,"CloudRec ".concat(d.formatMessage({id:"rule.module.text.rule.data"}))),$.success(d.formatMessage({id:"common.message.text.export.success"}))}).finally(function(){return k(!1)})},qt=function(){var m=T()(h()().mark(function i(e,l){var n,u,p,o;return h()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return n={id:e,status:l},F.next=3,(0,g.changeRuleStatus)(n);case 3:u=F.sent,(u.code===200||u.msg==="success")&&($.success(d.formatMessage({id:"common.message.text.edit.success"})),(p=C.current)===null||p===void 0||(o=p.reloadAndRest)===null||o===void 0||o.call(p));case 5:case"end":return F.stop()}},i)}));return function(e,l){return m.apply(this,arguments)}}(),ea=[{title:d.formatMessage({id:"home.module.inform.columns.ruleName"}),dataIndex:"ruleName",valueType:"text",align:"left",hideInSearch:!0,render:function(i,e){var l,n,u=(e==null?void 0:e.selectedTenantNameList)&&e.selectedTenantNameList.length>0;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,t.jsx)(R.Z,{placement:"topLeft",maxWidth:fe!=null&&fe.xxl?600:400,rows:1,text:(e==null?void 0:e.ruleName)||"-",style:{fontWeight:500,color:"rgb(58, 58, 58)"}}),u&&(0,t.jsx)(He.Z,{title:(0,t.jsx)("div",{children:(l=e.selectedTenantNameList)===null||l===void 0?void 0:l.map(function(p,o){return(0,t.jsxs)("div",{style:{fontSize:12},children:["\u2022 ",p]},o)})}),placement:"topRight",children:(0,t.jsx)(Et,{style:{color:"#1890ff",fontSize:14,cursor:"pointer"}})})]}),(0,t.jsx)(x.Z,{placement:"topLeft",maxWidth:fe!=null&&fe.xxl?600:400,rows:1,text:(e==null||(n=e.ruleTypeNameList)===null||n===void 0?void 0:n.toString())||"-",style:{color:"rgb(166, 167, 167)",fontSize:13}})]})}},{title:d.formatMessage({id:"cloudAccount.extend.title.asset.type"}),dataIndex:"resourceTypeStr",valueType:"text",align:"left",hideInSearch:!0,render:function(i,e){return(0,t.jsx)(P.Z,{text:(e==null?void 0:e.resourceTypeStr)||"-"})}},{title:d.formatMessage({id:"home.module.inform.columns.riskLevel"}),dataIndex:"riskLevel",valueType:"select",valueEnum:(0,L.W_)(N.I9),align:"center",hideInSearch:!0,render:function(i,e){return(0,L.Dd)(N.I9,e==null?void 0:e.riskLevel)}},{title:d.formatMessage({id:"common.table.columns.createAndUpdateTime"}),dataIndex:"gmtCreated",valueType:"text",align:"left",hideInSearch:!0,render:function(i,e){return(0,t.jsxs)("div",{children:[(0,t.jsx)("section",{style:{color:"#999"},children:(e==null?void 0:e.gmtCreate)||"-"}),(0,t.jsx)("section",{style:{color:"#999"},children:(e==null?void 0:e.gmtModified)||"-"})]})}},{title:d.formatMessage({id:"common.table.columns.platform"}),dataIndex:"platform",valueType:"select",valueEnum:(0,L.W_)(Q),align:"center",hideInSearch:!0,render:function(i,e){return(0,L.c5)(e.platform,Q)}},{title:d.formatMessage({id:"rule.input.text.rule.group.creator"}),dataIndex:"username",valueType:"text",hideInSearch:!0,width:120},{title:d.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),dataIndex:"option",valueType:"option",align:"center",fixed:"right",render:function(i,e){return(0,t.jsxs)(q.Z,{size:"small",children:[(0,t.jsx)(j.ZP,{size:"small",onClick:function(n){n.stopPropagation(),dt(e.id)},type:"link",target:"_self",href:"/ruleManagement/ruleProject/edit?id=".concat(e==null?void 0:e.id),children:(0,t.jsx)(He.Z,{title:d.formatMessage({id:"common.button.text.edit"}),children:(0,t.jsx)(It.Z,{})})}),(0,t.jsx)(St.Z,{content:(0,t.jsxs)(q.Z,{children:[(0,t.jsx)(Rt.Z,{title:d.formatMessage({id:"common.button.text.delete.confirm"}),onConfirm:function(n){n==null||n.stopPropagation(),Qt(e.id)},okText:d.formatMessage({id:"common.button.text.ok"}),cancelText:d.formatMessage({id:"common.button.text.cancel"}),children:(0,t.jsx)(j.ZP,{block:!0,type:"link",danger:!0,size:"small",onClick:function(n){return n.stopPropagation()},children:d.formatMessage({id:"common.button.text.delete"})})}),(0,t.jsx)(j.ZP,{block:!0,loading:Fe[Number(e.id)],onClick:function(n){n.stopPropagation(),Jt(e.id)},type:"link",target:"_blank",size:"small",children:d.formatMessage({id:"common.button.text.copy"})})]}),children:(0,t.jsx)(j.ZP,{type:"link",icon:(0,t.jsx)(Gt,{}),onClick:function(n){return n.stopPropagation()}})}),e.tenantSelected?(0,t.jsx)(Rt.Z,{title:d.formatMessage({id:"rule.module.selected.rules.popconfirm.content"}),onConfirm:function(n){n==null||n.stopPropagation(),Yt(e)},onCancel:function(n){return n==null?void 0:n.stopPropagation()},okText:d.formatMessage({id:"common.button.text.ok"}),cancelText:d.formatMessage({id:"common.button.text.cancel"}),children:(0,t.jsx)(j.ZP,{type:"default",size:"small",loading:rt[Number(e.id)],onClick:function(n){return n.stopPropagation()},icon:(0,t.jsx)(kt.Z,{}),danger:!0})}):(0,t.jsx)(j.ZP,{type:"primary",size:"small",loading:Ne[Number(e.id)],onClick:function(n){n.stopPropagation(),Xt(e)},icon:(0,t.jsx)(Ht.Z,{})}),(0,t.jsx)(He.Z,{title:d.formatMessage({id:"rule.module.text.tooltip.status"}),children:(0,t.jsx)(wt.Z,{checked:(e==null?void 0:e.status)==="valid",onClick:function(n,u){u==null||u.stopPropagation(),qt(e.id,(e==null?void 0:e.status)==="valid"?"invalid":"valid")}})})]})}}];return(0,t.jsxs)(t.Fragment,{children:[ae,(0,t.jsx)(xt.Z,{scroll:{x:"max-content"},rowSelection:{type:"checkbox",selectedRowKeys:pt,onChange:function(i){return st(i)},preserveSelectedRowKeys:!0},actionRef:C,formRef:z,rowClassName:U,rowKey:"id",search:!1,toolBarRender:function(){return[(0,t.jsx)(St.Z,{open:Lt,onOpenChange:function(e){return be(e)},title:d.formatMessage({id:"rule.module.text.sync.confirm"}),content:(0,t.jsxs)(q.Z,{children:[(0,t.jsx)(j.ZP,{danger:!0,type:"primary",loading:lt,onClick:T()(h()().mark(function i(){var e,l,n,u;return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return we(!0),e=$.loading(d.formatMessage({id:"rule.module.text.sync.loading"})),o.prev=2,o.next=5,(0,g.loadRuleFromGithub)({coverage:!0});case 5:l=o.sent,(l.code===200||l.msg==="success")&&($.success(d.formatMessage({id:"rule.module.text.sync.success"})),(n=C.current)===null||n===void 0||(u=n.reloadAndRest)===null||u===void 0||u.call(n),J());case 7:return o.prev=7,e(),we(!1),be(!1),o.finish(7);case 12:case"end":return o.stop()}},i,null,[[2,,7,12]])})),children:d.formatMessage({id:"rule.module.text.sync.overwrite"})}),(0,t.jsx)(j.ZP,{type:"primary",loading:lt,onClick:T()(h()().mark(function i(){var e,l,n,u;return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return we(!0),e=$.loading(d.formatMessage({id:"rule.module.text.sync.loading"})),o.prev=2,o.next=5,(0,g.loadRuleFromGithub)({coverage:!1});case 5:l=o.sent,(l.code===200||l.msg==="success")&&($.success(d.formatMessage({id:"rule.module.text.sync.success"})),(n=C.current)===null||n===void 0||(u=n.reloadAndRest)===null||u===void 0||u.call(n),J());case 7:return o.prev=7,e(),we(!1),be(!1),o.finish(7);case 12:case"end":return o.stop()}},i,null,[[2,,7,12]])})),children:d.formatMessage({id:"rule.module.text.sync.no.overwrite"})}),(0,t.jsx)(j.ZP,{onClick:function(){be(!1)},children:d.formatMessage({id:"common.button.text.cancel"})})]}),trigger:"click",children:(0,t.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,t.jsx)(j.ZP,{type:"primary",children:d.formatMessage({id:"rule.module.text.sync.button"})}),pe>0&&(0,t.jsx)("div",{style:{position:"absolute",top:"-8px",right:"-8px",backgroundColor:"#ff4d4f",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",zIndex:1},children:pe>99?"99+":pe})]})},"sync"),(0,t.jsx)(j.ZP,{type:"primary",href:"/ruleManagement/ruleProject/edit",children:d.formatMessage({id:"rule.extend.basic.add"})},"CREATE"),(0,t.jsx)(j.ZP,{loading:V,type:"primary",onClick:function(){return _t(pt)},children:d.formatMessage({id:"common.button.text.export"})},"EXPORT")]},request:function(){var m=T()(h()().mark(function i(e,l){var n,u,p,o,s,F,re,ne,ye,Z;return h()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return n=e.pageSize,u=e.current,p=Wt()(e,Ze),o=S.getFieldsValue(),s=(0,L.Hm)(l),F=v()(v()(v()({},p),o),{},{page:u,size:n}),(0,Me.isEmpty)(s)||(F.sortParam=s==null?void 0:s.key,F.sortType=s==null||(re=s.value)===null||re===void 0||(re=re.slice(0,-3))===null||re===void 0?void 0:re.toUpperCase()),O.next=7,(0,g.queryRuleList)(F);case 7:return ne=O.sent,ye=ne.content,Z=ne.code,O.abrupt("return",{data:(ye==null?void 0:ye.data)||[],total:(ye==null?void 0:ye.total)||0,success:Z===200||!1});case 11:case"end":return O.stop()}},i)}));return function(i,e){return m.apply(this,arguments)}}(),columns:ea,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1},onRow:$t(Ft)}),(0,t.jsx)(xe,{visible:mt,onClose:Y,ruleId:ft})]})},ra=bt,na=a(53846),sa=a(90598),la={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm144.1 454.9L437.7 677.8a8.02 8.02 0 01-12.7-6.5V353.7a8 8 0 0112.7-6.5L656.1 506a7.9 7.9 0 010 12.9z"}}]},name:"play-circle",theme:"filled"},oa=la,ia=function(y,S){return f.createElement(Ae.Z,(0,Be.Z)({},y,{ref:S,icon:oa}))},ua=f.forwardRef(ia),ca=ua,da={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},ma=da,fa=function(y,S){return f.createElement(Ae.Z,(0,Be.Z)({},y,{ref:S,icon:ma}))},va=f.forwardRef(fa),ga=va,At=a(78045),pa=["pageSize","current"],ha=Ot.ZP.useBreakpoint,ya=function(y){var S=y.form,Q=y.platformList,Re=y.resourceTypeList,ut=y.ruleGroupList,Dt=y.ruleTypeList,ct=y.allRuleList,J=y.queryTrigger,pe=Ce.ZP.useMessage(),me=c()(pe,2),K=me[0],Ee=me[1],$=ha(),ae=(0,f.useRef)(),fe=(0,f.useRef)(),C=(0,le.useIntl)(),z=(0,f.useState)(),d=c()(z,2),E=d[0],Qe=d[1],ze=(0,f.useState)({}),dt=c()(ze,2),Je=dt[0],ce=dt[1],X=(0,f.useState)({}),he=c()(X,2),Xe=he[0],I=he[1],mt=(0,f.useState)({}),Ye=c()(mt,2),_e=Ye[0],qe=Ye[1],ft=(0,f.useState)([]),vt=c()(ft,2),ve=vt[0],Ie=vt[1],Fe=(0,f.useState)(!1),gt=c()(Fe,2),zt=gt[0],et=gt[1],Ne=(0,f.useState)(!1),ke=c()(Ne,2),tt=ke[0],at=ke[1],rt=(0,f.useState)(!1),We=c()(rt,2),nt=We[0],Ke=We[1],pt=(0,f.useState)(),st=c()(pt,2),Tt=st[0],Oe=st[1],Lt=(0,f.useState)(!0),be=c()(Lt,2),jt=be[0],Te=be[1],lt=(0,f.useState)(!1),we=c()(lt,2),Mt=we[0],ot=we[1],V=(0,f.useState)("all"),k=c()(V,2),U=k[0],Ft=k[1],Y=function(i){return i.id===E?"ant-table-row-selected":""},Qt=function(i){Oe(i.id),Ke(!0)};(0,f.useEffect)(function(){if(J!==void 0&&J>0){var m;(m=ae.current)===null||m===void 0||m.reload()}},[J]);var Jt=function(){var m=T()(h()().mark(function i(e){var l,n,u,p;return h()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return ce(v()(v()({},Je),{},de()({},e,!0))),l=K.loading(C.formatMessage({id:"common.message.text.execute.loading"})),s.next=4,(0,g.scanByRule)({id:e});case 4:n=s.sent,ce(v()(v()({},Je),{},de()({},e,!1))),l(),(n.code===200||n.msg==="success")&&(K.success(C.formatMessage({id:"common.message.text.execute.success"})),(u=ae.current)===null||u===void 0||(p=u.reloadAndRest)===null||p===void 0||p.call(u));case 8:case"end":return s.stop()}},i)}));return function(e){return m.apply(this,arguments)}}(),Xt=function(){var m=T()(h()().mark(function i(e){var l,n,u,p;return h()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return l=e.id,qe(v()(v()({},_e),{},de()({},l,!0))),s.prev=2,s.next=5,(0,g.removeTenantSelectRule)({ruleCode:e.ruleCode});case 5:n=s.sent,(n.code===200||n.msg==="success")&&(K.success(C.formatMessage({id:"common.message.text.success"})),(u=ae.current)===null||u===void 0||(p=u.reloadAndRest)===null||p===void 0||p.call(u)),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(2),K.error(C.formatMessage({id:"common.message.text.fail"}));case 12:return s.prev=12,qe(v()(v()({},_e),{},de()({},l,!1))),s.finish(12);case 15:case"end":return s.stop()}},i,null,[[2,9,12,15]])}));return function(e){return m.apply(this,arguments)}}(),Yt=function(){var m=T()(h()().mark(function i(){var e,l,n,u;return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(ve.length!==0){o.next=2;break}return o.abrupt("return");case 2:return et(!0),o.prev=3,e=ve.map(function(s){return Number(s)}),o.next=7,(0,g.scanRuleList)({idList:e});case 7:l=o.sent,(l.code===200||l.msg==="success")&&(K.success(C.formatMessage({id:"common.message.text.success"})),Ie([]),(n=ae.current)===null||n===void 0||(u=n.reloadAndRest)===null||u===void 0||u.call(n)),o.next=14;break;case 11:o.prev=11,o.t0=o.catch(3),K.error(C.formatMessage({id:"common.message.text.fail"}));case 14:return o.prev=14,et(!1),o.finish(14);case 17:case"end":return o.stop()}},i,null,[[3,11,14,17]])}));return function(){return m.apply(this,arguments)}}(),_t=function(){var m=T()(h()().mark(function i(){var e,l,n,u,p,o,s,F,re,ne;return h()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(ve.length!==0){Z.next=2;break}return Z.abrupt("return");case 2:return at(!0),Z.prev=3,l=S.getFieldsValue(),n={page:1,size:1e3,platformList:l.platformList,riskLevelList:l.riskLevelList,ruleCodeList:l.ruleCodeList,resourceTypeList:l.resourceTypeList,ruleGroupIdList:l.ruleGroupIdList,ruleTypeIdList:l.ruleTypeIdList},Z.next=8,(0,g.queryEffectRuleList)(n);case 8:return u=Z.sent,p=(u==null||(e=u.content)===null||e===void 0?void 0:e.data)||[],o=p.filter(function(Pt){return ve.includes(Pt.id)}),s=o.map(function(Pt){return Pt.ruleCode}),Z.next=14,(0,g.batchDeleteTenantSelectRule)({ruleCodeList:s});case 14:F=Z.sent,(F.code===200||F.msg==="success")&&(K.success(C.formatMessage({id:"common.message.text.success"})),Ie([]),(re=ae.current)===null||re===void 0||(ne=re.reloadAndRest)===null||ne===void 0||ne.call(re)),Z.next=21;break;case 18:Z.prev=18,Z.t0=Z.catch(3),K.error(C.formatMessage({id:"common.message.text.fail"}));case 21:return Z.prev=21,at(!1),Z.finish(21);case 24:case"end":return Z.stop()}},i,null,[[3,18,21,24]])}));return function(){return m.apply(this,arguments)}}(),qt=function(){var m=T()(h()().mark(function i(e,l){var n,u,p,o,s,F,re,ne,ye,Z;return h()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return n=e.pageSize,u=e.current,p=Wt()(e,pa),O.prev=1,o=S.getFieldsValue(),s=v()({page:u||1,size:n||10,platformList:o.platformList,riskLevelList:o.riskLevelList,ruleCodeList:o.ruleCodeList,resourceTypeList:o.resourceTypeList,ruleGroupIdList:o.ruleGroupIdList,ruleTypeIdList:o.ruleTypeIdList,effectRuleType:U},p),l&&Object.keys(l).length>0&&(F=Object.keys(l)[0],re=l[F],s.sortParam=F,s.sortType=re==="ascend"?"ASC":"DESC"),O.next=7,(0,g.queryEffectRuleList)(s);case 7:if(ne=O.sent,!(ne!=null&&ne.content)){O.next=16;break}return ye=ne.content.data||[],Z=ne.content.total||0,Te(Z>0),ot(!0),O.abrupt("return",{data:ye,total:Z,success:!0});case 16:return Te(!1),ot(!0),O.abrupt("return",{data:[],total:0,success:!1});case 19:O.next=26;break;case 21:return O.prev=21,O.t0=O.catch(1),Te(!1),ot(!0),O.abrupt("return",{data:[],total:0,success:!1});case 26:case"end":return O.stop()}},i,null,[[1,21]])}));return function(e,l){return m.apply(this,arguments)}}(),ea=[{title:C.formatMessage({id:"home.module.inform.columns.ruleName"}),dataIndex:"ruleName",valueType:"text",align:"left",hideInSearch:!0,render:function(i,e){var l;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{fontWeight:500,color:"rgb(58, 58, 58)",display:"flex",alignItems:"center",gap:"8px"},children:[(0,t.jsx)("span",{children:(e==null?void 0:e.ruleName)||"-"}),(e==null?void 0:e.defaultRuleSelected)&&(0,t.jsx)(He.Z,{title:"default",children:(0,t.jsx)(sa.Z,{style:{color:"#faad14",fontSize:"14px"}})})]}),(0,t.jsx)("div",{style:{color:"rgb(166, 167, 167)",fontSize:13},children:(e==null||(l=e.ruleTypeNameList)===null||l===void 0?void 0:l.toString())||"-"})]})}},{title:C.formatMessage({id:"cloudAccount.extend.title.asset.type"}),dataIndex:"resourceTypeStr",valueType:"text",align:"left",hideInSearch:!0,render:function(i,e){return(0,t.jsx)(P.Z,{text:(e==null?void 0:e.resourceTypeStr)||"-"})}},{title:C.formatMessage({id:"home.module.inform.columns.riskLevel"}),dataIndex:"riskLevel",valueType:"select",valueEnum:(0,L.W_)(N.I9),align:"center",hideInSearch:!0,render:function(i,e){return(0,L.Dd)(N.I9,e==null?void 0:e.riskLevel)}},{title:C.formatMessage({id:"common.table.columns.platform"}),dataIndex:"platform",valueType:"select",valueEnum:(0,L.W_)(Q),align:"center",hideInSearch:!0,render:function(i,e){return(0,L.c5)(e.platform,Q)}},{title:C.formatMessage({id:"asset.module.risk.number"}),dataIndex:"riskCount",valueType:"text",hideInSearch:!0,align:"center",sorter:!0,render:function(i,e){return(0,t.jsx)(j.ZP,{type:"link",size:"small",href:"/riskManagement/riskList?platform=".concat(e==null?void 0:e.platform,"&ruleCode=").concat(e==null?void 0:e.ruleCode),children:e==null?void 0:e.riskCount})}},{title:C.formatMessage({id:"cloudAccount.extend.title.lastScanTime"}),dataIndex:"lastScanTime",valueType:"text",hideInSearch:!0,align:"center",width:150,sorter:!0,render:function(i,e){return e!=null&&e.lastScanTime?(0,t.jsx)(He.Z,{title:e.lastScanTime,children:(0,t.jsx)("span",{children:e.lastScanTime})}):"-"}},{title:C.formatMessage({id:"cloudAccount.extend.title.cloud.operate"}),dataIndex:"option",valueType:"option",align:"center",fixed:"right",width:180,render:function(i,e){var l=e==null?void 0:e.isRunning,n=l===0,u=function(){return l===1?(0,t.jsx)(ca,{}):(0,t.jsx)(ga,{})};return(0,t.jsxs)(q.Z,{size:"small",children:[(0,t.jsx)(j.ZP,{block:!0,loading:Je[Number(e.id)],disabled:!n,onClick:function(o){o.stopPropagation(),Jt(e.id)},type:"default",target:"_blank",size:"small",icon:u(),style:{color:l===1?"#52c41a":void 0,borderColor:l===1?"#52c41a":void 0},children:C.formatMessage({id:"common.button.text.test"})}),U==="selected"&&(0,t.jsx)(Rt.Z,{title:C.formatMessage({id:"rule.module.selected.rules.popconfirm.content"}),onConfirm:function(o){o==null||o.stopPropagation(),Xt(e)},onCancel:function(o){return o==null?void 0:o.stopPropagation()},okText:C.formatMessage({id:"common.button.text.ok"}),cancelText:C.formatMessage({id:"common.button.text.cancel"}),children:(0,t.jsx)(j.ZP,{danger:!0,size:"small",loading:_e[Number(e.id)],icon:(0,t.jsx)(kt.Z,{}),onClick:function(o){return o.stopPropagation()}})})]})}}];return(0,t.jsxs)(t.Fragment,{children:[Ee,(0,t.jsx)(xt.Z,{scroll:{x:"max-content"},rowSelection:{type:"checkbox",selectedRowKeys:ve,onChange:function(i){return Ie(i)},preserveSelectedRowKeys:!0},headerTitle:(0,t.jsx)("div",{className:na.Z.customTitle,children:(0,t.jsx)(q.Z,{children:(0,t.jsxs)(At.ZP.Group,{value:U,onChange:function(i){var e;Ft(i.target.value),Ie([]),(e=ae.current)===null||e===void 0||e.reload()},size:"middle",buttonStyle:"solid",children:[(0,t.jsx)(At.ZP.Button,{value:"all",children:C.formatMessage({id:"common.module.text.all"})}),(0,t.jsx)(At.ZP.Button,{value:"selected",children:C.formatMessage({id:"common.module.text.selected"})}),(0,t.jsx)(At.ZP.Button,{value:"default",children:C.formatMessage({id:"common.module.text.default"})})]})})}),actionRef:ae,formRef:fe,rowClassName:Y,rowKey:"id",search:!1,toolBarRender:function(){return[(0,t.jsx)(j.ZP,{type:"primary",loading:zt,disabled:ve.length===0,onClick:Yt,children:C.formatMessage({id:"rule.module.text.batch.test"})},"BATCH_DETECT"),U==="selected"&&(0,t.jsx)(j.ZP,{danger:!0,loading:tt,disabled:ve.length===0,onClick:_t,children:C.formatMessage({id:"rule.module.text.batch.remove"})},"BATCH_REMOVE")].filter(Boolean)},request:qt,columns:ea,pagination:{showQuickJumper:!1,showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1},onRow:$t(Qt)}),(0,t.jsx)(xe,{visible:nt,onClose:function(){return Ke(!1)},ruleId:Tt})]})},Ca=ya,ta=a(61194),aa=oe.Z.SHOW_CHILD,xa=function(y,S){var Q;return(Q=S.label)===null||Q===void 0?void 0:Q.includes(y)},Sa=function(){var y=(0,le.useModel)("rule"),S=y.platformList,Q=y.ruleTypeList,Re=y.allRuleList,ut=y.ruleGroupList,Dt=(0,le.useLocation)(),ct=Dt.search,J=new URLSearchParams(ct),pe=J.get("groupId"),me=J.get("ruleCode"),K=J.get("platform"),Ee=Ce.ZP.useMessage(),$=c()(Ee,2),ae=$[0],fe=$[1],C=A.Z.useForm(),z=c()(C,1),d=z[0],E=(0,le.useIntl)(),Qe=(0,f.useState)(!1),ze=c()(Qe,2),dt=ze[0],Je=ze[1],ce=(0,f.useState)(!1),X=c()(ce,2),he=X[0],Xe=X[1],I=(0,f.useState)(0),mt=c()(I,2),Ye=mt[0],_e=mt[1],qe=(0,f.useState)(!1),ft=c()(qe,2),vt=ft[0],ve=ft[1],Ie=(0,f.useState)([]),Fe=c()(Ie,2),gt=Fe[0],zt=Fe[1],et=(0,f.useState)([]),Ne=c()(et,2),ke=Ne[0],tt=Ne[1],at=J.get("tab"),rt=(0,f.useState)(at||"selected"),We=c()(rt,2),nt=We[0],Ke=We[1];(0,f.useEffect)(function(){var V=J.get("tab");V&&V!==nt&&Ke(V)},[ct,nt]);var pt=(0,f.useState)(!1),st=c()(pt,2),Tt=st[0],Oe=st[1],Lt=(0,f.useState)(0),be=c()(Lt,2),jt=be[0],Te=be[1],lt=function(){var V=T()(h()().mark(function k(){var U;return h()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.prev=0,Y.next=3,(0,g.checkExistNewRule)();case 3:U=Y.sent,U.code===200&&typeof U.content=="number"&&_e(U.content),Y.next=10;break;case 7:Y.prev=7,Y.t0=Y.catch(0),console.error("Failed to check new rules:",Y.t0);case 10:case"end":return Y.stop()}},k,null,[[0,7]])}));return function(){return V.apply(this,arguments)}}(),we=(0,le.useRequest)(function(V){return(0,_.queryGroupTypeList)({platformList:V})},{manual:!0,formatResult:function(k){var U=k.content;tt(U||[])}}),Mt=we.run,ot=function(k){ve(!0),(0,g.queryExportRuleList)(k?{idList:k}:void 0,{responseType:"blob"}).then(function(U){(0,L.a5)(U,"CloudRec ".concat(E.formatMessage({id:"rule.module.text.rule.data"}))),ae.success(E.formatMessage({id:"common.message.text.export.success"}))}).finally(function(){return ve(!1)})};return(0,f.useEffect)(function(){(0,Me.isEmpty)(pe)||d.setFieldValue("ruleGroupIdList",[Number(pe)]),(0,Me.isEmpty)(me)||d.setFieldValue("ruleCodeList",[me]),(0,Me.isEmpty)(K)||(d.setFieldValue("platformList",[K]),Mt([K])),lt()},[pe,me,K]),(0,t.jsxs)(G._z,{ghost:!0,title:!1,className:ta.Z.rulePageContainer,breadcrumbRender:!1,children:[fe,(0,t.jsx)(W.Z,{bodyStyle:{paddingBottom:0},className:ta.Z.customFilterCard,children:(0,t.jsx)(A.Z,{form:d,children:(0,t.jsxs)(Le.Z,{gutter:[24,10],children:[(0,t.jsx)(H.Z,{span:24,children:(0,t.jsx)(A.Z.Item,{name:"platformList",label:E.formatMessage({id:"common.select.label.cloudPlatform"}),style:{marginBottom:0},children:(0,t.jsx)($e.Z.Group,{options:(0,L.T$)(S),onChange:function(k){d.setFieldValue("resourceTypeList",null),tt([]),Mt(k)}})})}),(0,t.jsx)(H.Z,{span:24,children:(0,t.jsx)(A.Z.Item,{name:"riskLevelList",label:E.formatMessage({id:"home.module.inform.columns.riskLevel"}),style:{marginBottom:0},children:(0,t.jsx)($e.Z.Group,{options:(0,L.at)(N.I9)})})}),(0,t.jsx)(H.Z,{span:6,children:(0,t.jsx)(A.Z.Item,{name:"ruleCodeList",label:E.formatMessage({id:"home.module.inform.columns.ruleName"}),style:{marginBottom:0},children:(0,t.jsx)(Ve.Z,{filterOption:xa,placeholder:E.formatMessage({id:"common.select.text.placeholder"}),allowClear:!0,options:Re,mode:"multiple"})})}),(0,t.jsx)(H.Z,{span:6,children:(0,t.jsx)(A.Z.Item,{name:"resourceTypeList",label:E.formatMessage({id:"cloudAccount.extend.title.asset.type"}),style:{marginBottom:0,width:"100%"},children:(0,t.jsx)(oe.Z,{options:ke,multiple:!0,placeholder:E.formatMessage({id:"common.select.text.placeholder"}),showCheckedStrategy:aa,allowClear:!0,showSearch:!0})})}),(0,t.jsx)(H.Z,{span:6,children:(0,t.jsx)(A.Z.Item,{name:"ruleGroupIdList",label:E.formatMessage({id:"layout.routes.title.ruleGroup"}),style:{marginBottom:0,width:"100%"},children:(0,t.jsx)(Ve.Z,{placeholder:E.formatMessage({id:"common.select.text.placeholder"}),options:ut,allowClear:!0,mode:"multiple"})})}),(0,t.jsx)(H.Z,{span:6,children:(0,t.jsx)(A.Z.Item,{name:"ruleTypeIdList",label:E.formatMessage({id:"home.module.inform.columns.ruleTypeName"}),style:{marginBottom:0,width:"100%"},children:(0,t.jsx)(oe.Z,{placeholder:E.formatMessage({id:"common.select.text.placeholder"}),showCheckedStrategy:aa,allowClear:!0,showSearch:!0,fieldNames:{label:"typeName",value:"id",children:"childList"},multiple:!0,options:Q||[]})})}),(0,t.jsx)(H.Z,{span:24,children:(0,t.jsx)(A.Z.Item,{style:{marginBottom:0,textAlign:"right"},children:(0,t.jsxs)(q.Z,{children:[(0,t.jsx)(j.ZP,{type:"primary",icon:(0,t.jsx)(Ue.Z,{}),loading:Tt,onClick:function(){Oe(!0),Te(function(k){return k+1}),setTimeout(function(){Oe(!1)},500)},children:E.formatMessage({id:"common.button.text.query"})}),(0,t.jsx)(j.ZP,{icon:(0,t.jsx)(ht.Z,{}),onClick:function(){d.resetFields(),tt([]),Oe(!0),Te(function(k){return k+1}),setTimeout(function(){Oe(!1)},500)},children:E.formatMessage({id:"common.button.text.reset"})})]})})})]})})}),(0,t.jsx)(W.Z,{style:{marginTop:16},children:(0,t.jsx)(je.Z,{activeKey:nt,onChange:function(k){Ke(k),Te(function(U){return U+1})},items:[{key:"selected",label:E.formatMessage({id:"rule.module.text.selected.rules"}),children:(0,t.jsx)(Ca,{form:d,platformList:S,resourceTypeList:ke,ruleGroupList:ut,ruleTypeList:Q,allRuleList:Re,queryTrigger:jt})},{key:"market",label:E.formatMessage({id:"rule.module.text.market.rules"}),children:(0,t.jsx)(ra,{form:d,platformList:S,resourceTypeList:ke,ruleGroupList:ut,ruleTypeList:Q,allRuleList:Re,checkNewRules:lt,newRulesCount:Ye,queryTrigger:jt})}]})})]})},Ra=Sa},53846:function(se,B){"use strict";B.Z={customTitle:"customTitle___nzcxh",riskHigh:"riskHigh___GstO6",riskMedium:"riskMedium___F4JTb",riskLow:"riskLow___HJopw",imgProcess:"imgProcess___NGndv",imgResult:"imgResult___wKhiG",validTag:"validTag___TRSau",invalidTag:"invalidTag___opVlG",waitingTag:"waitingTag___JZpZT"}},61194:function(se,B){"use strict";B.Z={floatButton:"floatButton___c4Q61",ruleEditPageContainer:"ruleEditPageContainer___JtP7R",stepListMain:"stepListMain___MjGkn",stepsWrap:"stepsWrap___GXD6m",contentMainTransparent:"contentMainTransparent___KcrOp",contentMain:"contentMain___zT9JY",ruleEditPageContainerSpecial:"ruleEditPageContainerSpecial___JGb_t",rulePageContainer:"rulePageContainer___p2US0",customFilterCard:"customFilterCard___A5TQf",customTitle:"customTitle___k1LUC",cleanBlock:"cleanBlock___et5AN",dimBlock:"dimBlock___EvyJb",lineBreak:"lineBreak___Oybab"}},75302:function(se,B,a){"use strict";var b=a(25378);function h(){return(0,b.Z)()}B.ZP={useBreakpoint:h}},66309:function(se,B,a){"use strict";a.d(B,{Z:function(){return de}});var b=a(62435),h=a(93967),M=a.n(h),T=a(98423),w=a(98787),c=a(69760),_=a(96159),g=a(45353),N=a(53124),L=a(861),G=a(15063),W=a(14747),le=a(83262),oe=a(83559);const Ce=r=>{const{paddingXXS:v,lineWidth:P,tagPaddingHorizontal:x,componentCls:R,calc:ie}=r,ee=ie(x).sub(P).equal(),Pe=ie(v).sub(P).equal();return{[R]:Object.assign(Object.assign({},(0,W.Wf)(r)),{display:"inline-block",height:"auto",marginInlineEnd:r.marginXS,paddingInline:ee,fontSize:r.tagFontSize,lineHeight:r.tagLineHeight,whiteSpace:"nowrap",background:r.defaultBg,border:`${(0,L.unit)(r.lineWidth)} ${r.lineType} ${r.colorBorder}`,borderRadius:r.borderRadiusSM,opacity:1,transition:`all ${r.motionDurationMid}`,textAlign:"start",position:"relative",[`&${R}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:r.defaultColor},[`${R}-close-icon`]:{marginInlineStart:Pe,fontSize:r.tagIconSize,color:r.colorIcon,cursor:"pointer",transition:`all ${r.motionDurationMid}`,"&:hover":{color:r.colorTextHeading}},[`&${R}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${r.iconCls}-close, ${r.iconCls}-close:hover`]:{color:r.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${R}-checkable-checked):hover`]:{color:r.colorPrimary,backgroundColor:r.colorFillSecondary},"&:active, &-checked":{color:r.colorTextLightSolid},"&-checked":{backgroundColor:r.colorPrimary,"&:hover":{backgroundColor:r.colorPrimaryHover}},"&:active":{backgroundColor:r.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${r.iconCls} + span, > span + ${r.iconCls}`]:{marginInlineStart:ee}}),[`${R}-borderless`]:{borderColor:"transparent",background:r.tagBorderlessBg}}},A=r=>{const{lineWidth:v,fontSizeIcon:P,calc:x}=r,R=r.fontSizeSM;return(0,le.mergeToken)(r,{tagFontSize:R,tagLineHeight:(0,L.unit)(x(r.lineHeightSM).mul(R).equal()),tagIconSize:x(P).sub(x(v).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:r.defaultBg})},Le=r=>({defaultBg:new G.FastColor(r.colorFillQuaternary).onBackground(r.colorBgContainer).toHexString(),defaultColor:r.colorText});var H=(0,oe.I$)("Tag",r=>{const v=A(r);return Ce(v)},Le),$e=function(r,v){var P={};for(var x in r)Object.prototype.hasOwnProperty.call(r,x)&&v.indexOf(x)<0&&(P[x]=r[x]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var R=0,x=Object.getOwnPropertySymbols(r);R<x.length;R++)v.indexOf(x[R])<0&&Object.prototype.propertyIsEnumerable.call(r,x[R])&&(P[x[R]]=r[x[R]]);return P},q=b.forwardRef((r,v)=>{const{prefixCls:P,style:x,className:R,checked:ie,onChange:ee,onClick:Pe}=r,D=$e(r,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:te,tag:t}=b.useContext(N.E_),Ge=it=>{ee==null||ee(!ie),Pe==null||Pe(it)},xe=te("tag",P),[Be,yt,ge]=H(xe),Ae=M()(xe,`${xe}-checkable`,{[`${xe}-checkable-checked`]:ie},t==null?void 0:t.className,R,yt,ge);return Be(b.createElement("span",Object.assign({},D,{ref:v,style:Object.assign(Object.assign({},x),t==null?void 0:t.style),className:Ae,onClick:Ge})))}),j=a(98719);const je=r=>(0,j.Z)(r,(v,{textColor:P,lightBorderColor:x,lightColor:R,darkColor:ie})=>({[`${r.componentCls}${r.componentCls}-${v}`]:{color:P,background:R,borderColor:x,"&-inverse":{color:r.colorTextLightSolid,background:ie,borderColor:ie},[`&${r.componentCls}-borderless`]:{borderColor:"transparent"}}}));var Ue=(0,oe.bk)(["Tag","preset"],r=>{const v=A(r);return je(v)},Le);function ht(r){return typeof r!="string"?r:r.charAt(0).toUpperCase()+r.slice(1)}const Me=(r,v,P)=>{const x=ht(P);return{[`${r.componentCls}${r.componentCls}-${v}`]:{color:r[`color${P}`],background:r[`color${x}Bg`],borderColor:r[`color${x}Border`],[`&${r.componentCls}-borderless`]:{borderColor:"transparent"}}}};var f=(0,oe.bk)(["Tag","status"],r=>{const v=A(r);return[Me(v,"success","Success"),Me(v,"processing","Info"),Me(v,"error","Error"),Me(v,"warning","Warning")]},Le),Nt=function(r,v){var P={};for(var x in r)Object.prototype.hasOwnProperty.call(r,x)&&v.indexOf(x)<0&&(P[x]=r[x]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var R=0,x=Object.getOwnPropertySymbols(r);R<x.length;R++)v.indexOf(x[R])<0&&Object.prototype.propertyIsEnumerable.call(r,x[R])&&(P[x[R]]=r[x[R]]);return P};const Zt=b.forwardRef((r,v)=>{const{prefixCls:P,className:x,rootClassName:R,style:ie,children:ee,icon:Pe,color:D,onClose:te,bordered:t=!0,visible:Ge}=r,xe=Nt(r,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:Be,direction:yt,tag:ge}=b.useContext(N.E_),[Ae,it]=b.useState(!0),Kt=(0,T.Z)(xe,["closeIcon","closable"]);b.useEffect(()=>{Ge!==void 0&&it(Ge)},[Ge]);const Et=(0,w.o2)(D),It=(0,w.yT)(D),Ct=Et||It,Vt=Object.assign(Object.assign({backgroundColor:D&&!Ct?D:void 0},ge==null?void 0:ge.style),ie),ue=Be("tag",P),[Ut,Gt,kt]=H(ue),Ht=M()(ue,ge==null?void 0:ge.className,{[`${ue}-${D}`]:Ct,[`${ue}-has-color`]:D&&!Ct,[`${ue}-hidden`]:!Ae,[`${ue}-rtl`]:yt==="rtl",[`${ue}-borderless`]:!t},x,R,Gt,kt),xt=De=>{De.stopPropagation(),te==null||te(De),!De.defaultPrevented&&it(!1)},[,Ot]=(0,c.Z)((0,c.w)(r),(0,c.w)(ge),{closable:!1,closeIconRender:De=>{const $t=b.createElement("span",{className:`${ue}-close-icon`,onClick:xt},De);return(0,_.wm)(De,$t,Ze=>({onClick:Bt=>{var bt;(bt=Ze==null?void 0:Ze.onClick)===null||bt===void 0||bt.call(Ze,Bt),xt(Bt)},className:M()(Ze==null?void 0:Ze.className,`${ue}-close-icon`)}))}}),He=typeof xe.onClick=="function"||ee&&ee.type==="a",St=Pe||null,Rt=St?b.createElement(b.Fragment,null,St,ee&&b.createElement("span",null,ee)):ee,wt=b.createElement("span",Object.assign({},Kt,{ref:v,className:Ht,style:Vt}),Rt,Ot,Et&&b.createElement(Ue,{key:"preset",prefixCls:ue}),It&&b.createElement(f,{key:"status",prefixCls:ue}));return Ut(He?b.createElement(g.Z,{component:"Tag"},wt):wt)});Zt.CheckableTag=q;var de=Zt},64599:function(se,B,a){var b=a(96263);function h(M,T){var w=typeof Symbol!="undefined"&&M[Symbol.iterator]||M["@@iterator"];if(!w){if(Array.isArray(M)||(w=b(M))||T&&M&&typeof M.length=="number"){w&&(M=w);var c=0,_=function(){};return{s:_,n:function(){return c>=M.length?{done:!0}:{done:!1,value:M[c++]}},e:function(W){throw W},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,N=!1,L;return{s:function(){w=w.call(M)},n:function(){var W=w.next();return g=W.done,W},e:function(W){N=!0,L=W},f:function(){try{!g&&w.return!=null&&w.return()}finally{if(N)throw L}}}}se.exports=h,se.exports.__esModule=!0,se.exports.default=se.exports}}]);
